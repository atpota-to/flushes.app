"use strict";exports.id=32,exports.ids=[32],exports.modules={88910:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.AtUri=t.ATP_URI_REGEX=void 0,a(r(72616),t),t.ATP_URI_REGEX=/^(at:\/\/)?((?:did:[a-z0-9:%-]+)|(?:[a-z0-9][a-z0-9.:-]*))(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i;let i=/^(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i;class o{constructor(e,t){let r;if(Object.defineProperty(this,"hash",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"host",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"searchParams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t){if(!(r=s(t)))throw Error(`Invalid at uri: ${t}`);let n=function(e){let t=i.exec(e);if(t)return{hash:t[3]||"",pathname:t[1]||"",searchParams:new URLSearchParams(t[2]||"")}}(e);if(!n)throw Error(`Invalid path: ${e}`);Object.assign(r,n)}else if(!(r=s(e)))throw Error(`Invalid at uri: ${e}`);this.hash=r.hash,this.host=r.host,this.pathname=r.pathname,this.searchParams=r.searchParams}static make(e,t,r){let n=e;return t&&(n+="/"+t),r&&(n+="/"+r),new o(n)}get protocol(){return"at:"}get origin(){return`at://${this.host}`}get hostname(){return this.host}set hostname(e){this.host=e}get search(){return this.searchParams.toString()}set search(e){this.searchParams=new URLSearchParams(e)}get collection(){return this.pathname.split("/").filter(Boolean)[0]||""}set collection(e){let t=this.pathname.split("/").filter(Boolean);t[0]=e,this.pathname=t.join("/")}get rkey(){return this.pathname.split("/").filter(Boolean)[1]||""}set rkey(e){let t=this.pathname.split("/").filter(Boolean);t[0]||(t[0]="undefined"),t[1]=e,this.pathname=t.join("/")}get href(){return this.toString()}toString(){let e=this.pathname||"/";e.startsWith("/")||(e=`/${e}`);let t=this.searchParams.toString();t&&!t.startsWith("?")&&(t=`?${t}`);let r=this.hash;return r&&!r.startsWith("#")&&(r=`#${r}`),`at://${this.host}${e}${t}${r}`}}function s(e){let r=t.ATP_URI_REGEX.exec(e);if(r)return{hash:r[5]||"",host:r[2]||"",pathname:r[3]||"",searchParams:new URLSearchParams(r[4]||"")}}t.AtUri=o},72616:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ensureValidAtUriRegex=t.ensureValidAtUri=void 0;let n=r(65781),a=r(93816),i=r(18354);t.ensureValidAtUri=e=>{let t=e.split("#");if(t.length>2)throw Error('ATURI can have at most one "#", separating fragment out');let r=t[1]||null;if(e=t[0],!/^[a-zA-Z0-9._~:@!$&')(*+,;=%/-]*$/.test(e))throw Error("Disallowed characters in ATURI (ASCII)");let o=e.split("/");if(o.length>=3&&("at:"!==o[0]||0!==o[1].length))throw Error('ATURI must start with "at://"');if(o.length<3)throw Error("ATURI requires at least method and authority sections");try{o[2].startsWith("did:")?(0,n.ensureValidDid)(o[2]):(0,a.ensureValidHandle)(o[2])}catch{throw Error("ATURI authority must be a valid handle or DID")}if(o.length>=4){if(0===o[3].length)throw Error("ATURI can not have a slash after authority without a path segment");try{(0,i.ensureValidNsid)(o[3])}catch{throw Error("ATURI requires first path segment (if supplied) to be valid NSID")}}if(o.length>=5&&0===o[4].length)throw Error("ATURI can not have a slash after collection, unless record key is provided");if(o.length>=6)throw Error("ATURI path can have at most two parts, and no trailing slash");if(t.length>=2&&null==r)throw Error("ATURI fragment must be non-empty and start with slash");if(null!=r){if(0===r.length||"/"!==r[0])throw Error("ATURI fragment must be non-empty and start with slash");if(!/^\/[a-zA-Z0-9._~:@!$&')(*+,;=%[\]/-]*$/.test(r))throw Error("Disallowed characters in ATURI fragment (ASCII)")}if(e.length>8192)throw Error("ATURI is far too long")},t.ensureValidAtUriRegex=e=>{let t=e.match(/^at:\/\/(?<authority>[a-zA-Z0-9._:%-]+)(\/(?<collection>[a-zA-Z0-9-.]+)(\/(?<rkey>[a-zA-Z0-9._~:@!$&%')(*+,;=-]+))?)?(#(?<fragment>\/[a-zA-Z0-9._~:@!$&%')(*+,;=\-[\]/\\]*))?$/);if(!t||!t.groups)throw Error("ATURI didn't validate via regex");let r=t.groups;try{(0,a.ensureValidHandleRegex)(r.authority)}catch{try{(0,n.ensureValidDidRegex)(r.authority)}catch{throw Error("ATURI authority must be a valid handle or DID")}}if(r.collection)try{(0,i.ensureValidNsidRegex)(r.collection)}catch{throw Error("ATURI collection path segment must be a valid NSID")}if(e.length>8192)throw Error("ATURI is far too long")}},90048:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidDatetimeError=t.normalizeDatetimeAlways=t.normalizeDatetime=t.isValidDatetime=t.ensureValidDatetime=void 0,t.ensureValidDatetime=e=>{let t=new Date(e);if(isNaN(t.getTime()))throw new r("datetime did not parse as ISO 8601");if(t.toISOString().startsWith("-"))throw new r("datetime normalized to a negative time");if(!/^[0-9]{4}-[01][0-9]-[0-3][0-9]T[0-2][0-9]:[0-6][0-9]:[0-6][0-9](.[0-9]{1,20})?(Z|([+-][0-2][0-9]:[0-5][0-9]))$/.test(e))throw new r("datetime didn't validate via regex");if(e.length>64)throw new r("datetime is too long (64 chars max)");if(e.endsWith("-00:00"))throw new r('datetime can not use "-00:00" for UTC timezone');if(e.startsWith("000"))throw new r("datetime so close to year zero not allowed")},t.isValidDatetime=e=>{try{(0,t.ensureValidDatetime)(e)}catch(e){if(e instanceof r)return!1;throw e}return!0},t.normalizeDatetime=e=>{if((0,t.isValidDatetime)(e)){let r=new Date(e).toISOString();if((0,t.isValidDatetime)(r))return r}if(!/.*(([+-]\d\d:?\d\d)|[a-zA-Z])$/.test(e)){let r=new Date(e+"Z");if(!isNaN(r.getTime())){let e=r.toISOString();if((0,t.isValidDatetime)(e))return e}}let n=new Date(e);if(isNaN(n.getTime()))throw new r("datetime did not parse as any timestamp format");let a=n.toISOString();if((0,t.isValidDatetime)(a))return a;throw new r("datetime normalized to invalid timestamp string")},t.normalizeDatetimeAlways=e=>{try{return(0,t.normalizeDatetime)(e)}catch(e){if(e instanceof r)return new Date(0).toISOString();throw e}};class r extends Error{}t.InvalidDatetimeError=r},65781:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidDidError=t.ensureValidDidRegex=t.ensureValidDid=void 0,t.ensureValidDid=e=>{if(!e.startsWith("did:"))throw new r('DID requires "did:" prefix');if(!/^[a-zA-Z0-9._:%-]*$/.test(e))throw new r("Disallowed characters in DID (ASCII letters, digits, and a couple other characters only)");let{length:t,1:n}=e.split(":");if(t<3)throw new r("DID requires prefix, method, and method-specific content");if(!/^[a-z]+$/.test(n))throw new r("DID method must be lower-case letters");if(e.endsWith(":")||e.endsWith("%"))throw new r('DID can not end with ":" or "%"');if(e.length>2048)throw new r("DID is too long (2048 chars max)")},t.ensureValidDidRegex=e=>{if(!/^did:[a-z]+:[a-zA-Z0-9._:%-]*[a-zA-Z0-9._-]$/.test(e))throw new r("DID didn't validate via regex");if(e.length>2048)throw new r("DID is too long (2048 chars max)")};class r extends Error{}t.InvalidDidError=r},93816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisallowedDomainError=t.UnsupportedDomainError=t.ReservedHandleError=t.InvalidHandleError=t.isValidTld=t.isValidHandle=t.normalizeAndEnsureValidHandle=t.normalizeHandle=t.ensureValidHandleRegex=t.ensureValidHandle=t.DISALLOWED_TLDS=t.INVALID_HANDLE=void 0,t.INVALID_HANDLE="handle.invalid",t.DISALLOWED_TLDS=[".local",".arpa",".invalid",".localhost",".internal",".example",".alt",".onion"],t.ensureValidHandle=e=>{if(!/^[a-zA-Z0-9.-]*$/.test(e))throw new r("Disallowed characters in handle (ASCII letters, digits, dashes, periods only)");if(e.length>253)throw new r("Handle is too long (253 chars max)");let t=e.split(".");if(t.length<2)throw new r("Handle domain needs at least two parts");for(let e=0;e<t.length;e++){let n=t[e];if(n.length<1)throw new r("Handle parts can not be empty");if(n.length>63)throw new r("Handle part too long (max 63 chars)");if(n.endsWith("-")||n.startsWith("-"))throw new r("Handle parts can not start or end with hyphens");if(e+1===t.length&&!/^[a-zA-Z]/.test(n))throw new r("Handle final component (TLD) must start with ASCII letter")}},t.ensureValidHandleRegex=e=>{if(!/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/.test(e))throw new r("Handle didn't validate via regex");if(e.length>253)throw new r("Handle is too long (253 chars max)")},t.normalizeHandle=e=>e.toLowerCase(),t.normalizeAndEnsureValidHandle=e=>{let r=(0,t.normalizeHandle)(e);return(0,t.ensureValidHandle)(r),r},t.isValidHandle=e=>{try{(0,t.ensureValidHandle)(e)}catch(e){if(e instanceof r)return!1;throw e}return!0},t.isValidTld=e=>!t.DISALLOWED_TLDS.some(t=>e.endsWith(t));class r extends Error{}t.InvalidHandleError=r;class n extends Error{}t.ReservedHandleError=n;class a extends Error{}t.UnsupportedDomainError=a;class i extends Error{}t.DisallowedDomainError=i},68227:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(93816),t),a(r(65781),t),a(r(18354),t),a(r(88910),t),a(r(22106),t),a(r(19461),t),a(r(90048),t)},18354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidNsidError=t.ensureValidNsidRegex=t.ensureValidNsid=t.NSID=void 0;class r{static parse(e){return new r(e)}static create(e,t){return new r([...e.split(".").reverse(),t].join("."))}static isValid(e){try{return r.parse(e),!0}catch(e){return!1}}constructor(e){Object.defineProperty(this,"segments",{enumerable:!0,configurable:!0,writable:!0,value:[]}),(0,t.ensureValidNsid)(e),this.segments=e.split(".")}get authority(){return this.segments.slice(0,this.segments.length-1).reverse().join(".")}get name(){return this.segments.at(this.segments.length-1)}toString(){return this.segments.join(".")}}t.NSID=r,t.ensureValidNsid=e=>{if(!/^[a-zA-Z0-9.-]*$/.test(e))throw new n("Disallowed characters in NSID (ASCII letters, digits, dashes, periods only)");if(e.length>317)throw new n("NSID is too long (317 chars max)");let t=e.split(".");if(t.length<3)throw new n("NSID needs at least three parts");for(let e=0;e<t.length;e++){let r=t[e];if(r.length<1)throw new n("NSID parts can not be empty");if(r.length>63)throw new n("NSID part too long (max 63 chars)");if(r.endsWith("-")||r.startsWith("-"))throw new n("NSID parts can not start or end with hyphen");if(/^[0-9]/.test(r)&&0===e)throw new n("NSID first part may not start with a digit");if(!/^[a-zA-Z][a-zA-Z0-9]*$/.test(r)&&e+1===t.length)throw new n("NSID name part must be only letters and digits (and no leading digit)")}},t.ensureValidNsidRegex=e=>{if(!/^[a-zA-Z]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(\.[a-zA-Z]([a-zA-Z0-9]{0,62})?)$/.test(e))throw new n("NSID didn't validate via regex");if(e.length>317)throw new n("NSID is too long (317 chars max)")};class n extends Error{}t.InvalidNsidError=n},19461:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidRecordKeyError=t.isValidRecordKey=t.ensureValidRecordKey=void 0,t.ensureValidRecordKey=e=>{if(e.length>512||e.length<1)throw new r("record key must be 1 to 512 characters");if(!/^[a-zA-Z0-9_~.:-]{1,512}$/.test(e))throw new r("record key syntax not valid (regex)");if("."===e||".."===e)throw new r('record key can not be "." or ".."')},t.isValidRecordKey=e=>{try{(0,t.ensureValidRecordKey)(e)}catch(e){if(e instanceof r)return!1;throw e}return!0};class r extends Error{}t.InvalidRecordKeyError=r},22106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTidError=t.isValidTid=t.ensureValidTid=void 0;let r=/^[234567abcdefghij][234567abcdefghijklmnopqrstuvwxyz]{12}$/;t.ensureValidTid=e=>{if(13!==e.length)throw new n("TID must be 13 characters");if(!r.test(e))throw new n("TID syntax not valid (regex)")},t.isValidTid=e=>13===e.length&&r.test(e);class n extends Error{}t.InvalidTidError=n},55547:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cryptoRuntime=t.base64url=t.generateSecret=t.generateKeyPair=t.errors=t.decodeJwt=t.decodeProtectedHeader=t.importJWK=t.importX509=t.importPKCS8=t.importSPKI=t.exportJWK=t.exportSPKI=t.exportPKCS8=t.UnsecuredJWT=t.experimental_jwksCache=t.jwksCache=t.createRemoteJWKSet=t.createLocalJWKSet=t.EmbeddedJWK=t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=t.EncryptJWT=t.SignJWT=t.GeneralSign=t.FlattenedSign=t.CompactSign=t.FlattenedEncrypt=t.CompactEncrypt=t.jwtDecrypt=t.jwtVerify=t.generalVerify=t.flattenedVerify=t.compactVerify=t.GeneralEncrypt=t.generalDecrypt=t.flattenedDecrypt=t.compactDecrypt=void 0;var n=r(82290);Object.defineProperty(t,"compactDecrypt",{enumerable:!0,get:function(){return n.compactDecrypt}});var a=r(1806);Object.defineProperty(t,"flattenedDecrypt",{enumerable:!0,get:function(){return a.flattenedDecrypt}});var i=r(9908);Object.defineProperty(t,"generalDecrypt",{enumerable:!0,get:function(){return i.generalDecrypt}});var o=r(92416);Object.defineProperty(t,"GeneralEncrypt",{enumerable:!0,get:function(){return o.GeneralEncrypt}});var s=r(161);Object.defineProperty(t,"compactVerify",{enumerable:!0,get:function(){return s.compactVerify}});var l=r(40122);Object.defineProperty(t,"flattenedVerify",{enumerable:!0,get:function(){return l.flattenedVerify}});var d=r(6229);Object.defineProperty(t,"generalVerify",{enumerable:!0,get:function(){return d.generalVerify}});var u=r(38176);Object.defineProperty(t,"jwtVerify",{enumerable:!0,get:function(){return u.jwtVerify}});var c=r(83337);Object.defineProperty(t,"jwtDecrypt",{enumerable:!0,get:function(){return c.jwtDecrypt}});var h=r(88777);Object.defineProperty(t,"CompactEncrypt",{enumerable:!0,get:function(){return h.CompactEncrypt}});var p=r(31979);Object.defineProperty(t,"FlattenedEncrypt",{enumerable:!0,get:function(){return p.FlattenedEncrypt}});var f=r(3131);Object.defineProperty(t,"CompactSign",{enumerable:!0,get:function(){return f.CompactSign}});var y=r(24532);Object.defineProperty(t,"FlattenedSign",{enumerable:!0,get:function(){return y.FlattenedSign}});var m=r(44945);Object.defineProperty(t,"GeneralSign",{enumerable:!0,get:function(){return m.GeneralSign}});var g=r(1373);Object.defineProperty(t,"SignJWT",{enumerable:!0,get:function(){return g.SignJWT}});var v=r(51612);Object.defineProperty(t,"EncryptJWT",{enumerable:!0,get:function(){return v.EncryptJWT}});var _=r(62826);Object.defineProperty(t,"calculateJwkThumbprint",{enumerable:!0,get:function(){return _.calculateJwkThumbprint}}),Object.defineProperty(t,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return _.calculateJwkThumbprintUri}});var b=r(27576);Object.defineProperty(t,"EmbeddedJWK",{enumerable:!0,get:function(){return b.EmbeddedJWK}});var w=r(5979);Object.defineProperty(t,"createLocalJWKSet",{enumerable:!0,get:function(){return w.createLocalJWKSet}});var S=r(25267);Object.defineProperty(t,"createRemoteJWKSet",{enumerable:!0,get:function(){return S.createRemoteJWKSet}}),Object.defineProperty(t,"jwksCache",{enumerable:!0,get:function(){return S.jwksCache}}),Object.defineProperty(t,"experimental_jwksCache",{enumerable:!0,get:function(){return S.experimental_jwksCache}});var E=r(29211);Object.defineProperty(t,"UnsecuredJWT",{enumerable:!0,get:function(){return E.UnsecuredJWT}});var P=r(85175);Object.defineProperty(t,"exportPKCS8",{enumerable:!0,get:function(){return P.exportPKCS8}}),Object.defineProperty(t,"exportSPKI",{enumerable:!0,get:function(){return P.exportSPKI}}),Object.defineProperty(t,"exportJWK",{enumerable:!0,get:function(){return P.exportJWK}});var O=r(54183);Object.defineProperty(t,"importSPKI",{enumerable:!0,get:function(){return O.importSPKI}}),Object.defineProperty(t,"importPKCS8",{enumerable:!0,get:function(){return O.importPKCS8}}),Object.defineProperty(t,"importX509",{enumerable:!0,get:function(){return O.importX509}}),Object.defineProperty(t,"importJWK",{enumerable:!0,get:function(){return O.importJWK}});var j=r(96678);Object.defineProperty(t,"decodeProtectedHeader",{enumerable:!0,get:function(){return j.decodeProtectedHeader}});var R=r(91758);Object.defineProperty(t,"decodeJwt",{enumerable:!0,get:function(){return R.decodeJwt}}),t.errors=r(3674);var T=r(62730);Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return T.generateKeyPair}});var I=r(53029);Object.defineProperty(t,"generateSecret",{enumerable:!0,get:function(){return I.generateSecret}}),t.base64url=r(46486);var k=r(1357);Object.defineProperty(t,"cryptoRuntime",{enumerable:!0,get:function(){return k.default}})},82290:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compactDecrypt=o;let n=r(1806),a=r(3674),i=r(41444);async function o(e,t,r){if(e instanceof Uint8Array&&(e=i.decoder.decode(e)),"string"!=typeof e)throw new a.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:o,1:s,2:l,3:d,4:u,length:c}=e.split(".");if(5!==c)throw new a.JWEInvalid("Invalid Compact JWE");let h=await (0,n.flattenedDecrypt)({ciphertext:d,iv:l||void 0,protected:o,tag:u||void 0,encrypted_key:s||void 0},t,r),p={plaintext:h.plaintext,protectedHeader:h.protectedHeader};return"function"==typeof t?{...p,key:h.key}:p}},88777:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompactEncrypt=void 0;let n=r(31979);class a{_flattened;constructor(e){this._flattened=new n.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}t.CompactEncrypt=a},1806:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedDecrypt=p;let n=r(77145),a=r(49622),i=r(3674),o=r(17905),s=r(95788),l=r(10806),d=r(41444),u=r(54463),c=r(97430),h=r(62642);async function p(e,t,r){let p,f,y,m,g,v,_;if(!(0,s.default)(e))throw new i.JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new i.JWEInvalid("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new i.JWEInvalid("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new i.JWEInvalid("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new i.JWEInvalid("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new i.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new i.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new i.JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!(0,s.default)(e.header))throw new i.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!(0,s.default)(e.unprotected))throw new i.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=(0,n.decode)(e.protected);p=JSON.parse(d.decoder.decode(t))}catch{throw new i.JWEInvalid("JWE Protected Header is invalid")}if(!(0,o.default)(p,e.header,e.unprotected))throw new i.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let b={...p,...e.header,...e.unprotected};if((0,c.default)(i.JWEInvalid,new Map,r?.crit,p,b),void 0!==b.zip)throw new i.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:w,enc:S}=b;if("string"!=typeof w||!w)throw new i.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof S||!S)throw new i.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let E=r&&(0,h.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),P=r&&(0,h.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(E&&!E.has(w)||!E&&w.startsWith("PBES2"))throw new i.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(P&&!P.has(S))throw new i.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{f=(0,n.decode)(e.encrypted_key)}catch{throw new i.JWEInvalid("Failed to base64url decode the encrypted_key")}let O=!1;"function"==typeof t&&(t=await t(p,e),O=!0);try{y=await (0,l.default)(w,t,f,b,r)}catch(e){if(e instanceof TypeError||e instanceof i.JWEInvalid||e instanceof i.JOSENotSupported)throw e;y=(0,u.default)(S)}if(void 0!==e.iv)try{m=(0,n.decode)(e.iv)}catch{throw new i.JWEInvalid("Failed to base64url decode the iv")}if(void 0!==e.tag)try{g=(0,n.decode)(e.tag)}catch{throw new i.JWEInvalid("Failed to base64url decode the tag")}let j=d.encoder.encode(e.protected??"");v=void 0!==e.aad?(0,d.concat)(j,d.encoder.encode("."),d.encoder.encode(e.aad)):j;try{_=(0,n.decode)(e.ciphertext)}catch{throw new i.JWEInvalid("Failed to base64url decode the ciphertext")}let R={plaintext:await (0,a.default)(S,y,_,m,g,v)};if(void 0!==e.protected&&(R.protectedHeader=p),void 0!==e.aad)try{R.additionalAuthenticatedData=(0,n.decode)(e.aad)}catch{throw new i.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(R.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(R.unprotectedHeader=e.header),O)?{...R,key:t}:R}},31979:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedEncrypt=void 0;let n=r(77145),a=r(70061),i=r(75712),o=r(25983),s=r(3674),l=r(17905),d=r(41444),u=r(97430);class c{_plaintext;_protectedHeader;_sharedUnprotectedHeader;_unprotectedHeader;_aad;_cek;_iv;_keyManagementParameters;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let r,c,h,p,f;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new s.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,l.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new s.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let y={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,u.default)(s.JWEInvalid,new Map,t?.crit,this._protectedHeader,y),void 0!==y.zip)throw new s.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:m,enc:g}=y;if("string"!=typeof m||!m)throw new s.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof g||!g)throw new s.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===m||"ECDH-ES"===m))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${m}`);{let n;({cek:c,encryptedKey:r,parameters:n}=await (0,o.default)(m,g,e,this._cek,this._keyManagementParameters)),n&&(t&&a.unprotected in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}p=this._protectedHeader?d.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):d.encoder.encode(""),this._aad?(f=(0,n.encode)(this._aad),h=(0,d.concat)(p,d.encoder.encode("."),d.encoder.encode(f))):h=p;let{ciphertext:v,tag:_,iv:b}=await (0,i.default)(g,this._plaintext,c,this._iv,h),w={ciphertext:(0,n.encode)(v)};return b&&(w.iv=(0,n.encode)(b)),_&&(w.tag=(0,n.encode)(_)),r&&(w.encrypted_key=(0,n.encode)(r)),f&&(w.aad=f),this._protectedHeader&&(w.protected=d.decoder.decode(p)),this._sharedUnprotectedHeader&&(w.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(w.header=this._unprotectedHeader),w}}t.FlattenedEncrypt=c},9908:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generalDecrypt=o;let n=r(1806),a=r(3674),i=r(95788);async function o(e,t,r){if(!(0,i.default)(e))throw new a.JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(i.default))throw new a.JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new a.JWEInvalid("JWE Recipients has no members");for(let a of e.recipients)try{return await (0,n.flattenedDecrypt)({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:a.encrypted_key,header:a.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new a.JWEDecryptionFailed}},92416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralEncrypt=void 0;let n=r(31979),a=r(70061),i=r(3674),o=r(54463),s=r(17905),l=r(25983),d=r(77145),u=r(97430);class c{parent;unprotectedHeader;key;options;constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class h{_plaintext;_recipients=[];_protectedHeader;_unprotectedHeader;_aad;constructor(e){this._plaintext=e}addRecipient(e,t){let r=new c(this,e,{crit:t?.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(){let e;if(!this._recipients.length)throw new i.JWEInvalid("at least one recipient must be added");if(1===this._recipients.length){let[e]=this._recipients,t=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(e.unprotectedHeader).encrypt(e.key,{...e.options}),r={ciphertext:t.ciphertext,iv:t.iv,recipients:[{}],tag:t.tag};return t.aad&&(r.aad=t.aad),t.protected&&(r.protected=t.protected),t.unprotected&&(r.unprotected=t.unprotected),t.encrypted_key&&(r.recipients[0].encrypted_key=t.encrypted_key),t.header&&(r.recipients[0].header=t.header),r}for(let t=0;t<this._recipients.length;t++){let r=this._recipients[t];if(!(0,s.default)(this._protectedHeader,this._unprotectedHeader,r.unprotectedHeader))throw new i.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader,...r.unprotectedHeader},{alg:a}=n;if("string"!=typeof a||!a)throw new i.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===a||"ECDH-ES"===a)throw new i.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof n.enc||!n.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(e){if(e!==n.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else e=n.enc;if((0,u.default)(i.JWEInvalid,new Map,r.options.crit,this._protectedHeader,n),void 0!==n.zip)throw new i.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}let t=(0,o.default)(e),r={ciphertext:"",iv:"",recipients:[],tag:""};for(let i=0;i<this._recipients.length;i++){let o=this._recipients[i],s={};r.recipients.push(s);let u=({...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader}).alg.startsWith("PBES2")?2048+i:void 0;if(0===i){let e=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(t).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).setKeyManagementParameters({p2c:u}).encrypt(o.key,{...o.options,[a.unprotected]:!0});r.ciphertext=e.ciphertext,r.iv=e.iv,r.tag=e.tag,e.aad&&(r.aad=e.aad),e.protected&&(r.protected=e.protected),e.unprotected&&(r.unprotected=e.unprotected),s.encrypted_key=e.encrypted_key,e.header&&(s.header=e.header);continue}let{encryptedKey:c,parameters:h}=await (0,l.default)(o.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,e,o.key,t,{p2c:u});s.encrypted_key=(0,d.encode)(c),(o.unprotectedHeader||h)&&(s.header={...o.unprotectedHeader,...h})}return r}}t.GeneralEncrypt=h},27576:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedJWK=o;let n=r(54183),a=r(95788),i=r(3674);async function o(e,t){let r={...e,...t?.header};if(!(0,a.default)(r.jwk))throw new i.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let o=await (0,n.importJWK)({...r.jwk,ext:!0},r.alg);if(o instanceof Uint8Array||"public"!==o.type)throw new i.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return o}},62826:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateJwkThumbprint=d,t.calculateJwkThumbprintUri=u;let n=r(35657),a=r(77145),i=r(3674),o=r(41444),s=r(95788),l=(e,t)=>{if("string"!=typeof e||!e)throw new i.JWKInvalid(`${t} missing or invalid`)};async function d(e,t){let r;if(!(0,s.default)(e))throw TypeError("JWK must be an object");if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":l(e.crv,'"crv" (Curve) Parameter'),l(e.x,'"x" (X Coordinate) Parameter'),l(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":l(e.crv,'"crv" (Subtype of Key Pair) Parameter'),l(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":l(e.e,'"e" (Exponent) Parameter'),l(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":l(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new i.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let d=o.encoder.encode(JSON.stringify(r));return(0,a.encode)(await (0,n.default)(t,d))}async function u(e,t){t??="sha256";let r=await d(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}},5979:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalJWKSet=function(e){let t=new l(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>s(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r};let n=r(54183),a=r(3674),i=r(95788);function o(e){return(0,i.default)(e)}function s(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class l{_jwks;_cached=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(o)}(e))throw new a.JWKSInvalid("JSON Web Key Set malformed");this._jwks=s(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new a.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(r),o=this._jwks.keys.filter(e=>{let t=i===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":t="Ed25519"===e.crv;break;case"EdDSA":t="Ed25519"===e.crv||"Ed448"===e.crv}return t}),{0:s,length:l}=o;if(0===l)throw new a.JWKSNoMatchingKey;if(1!==l){let e=new a.JWKSMultipleMatchingKeys,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of o)try{yield await d(t,e,r)}catch{}},e}return d(this._cached,s,r)}}async function d(e,t,r){let i=e.get(t)||e.set(t,{}).get(t);if(void 0===i[r]){let e=await (0,n.importJWK)({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new a.JWKSInvalid("JSON Web Key Set members must be public keys");i[r]=e}return i[r]}},25267:(e,t,r)=>{let n;Object.defineProperty(t,"__esModule",{value:!0}),t.experimental_jwksCache=t.jwksCache=void 0,t.createRemoteJWKSet=function(e,t){let r=new l(e,t),n=async(e,t)=>r.getKey(e,t);return Object.defineProperties(n,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),n};let a=r(43264),i=r(3674),o=r(5979),s=r(95788);"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(n="jose/v5.10.0"),t.jwksCache=Symbol();class l{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(e,r){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:r?.agent,headers:r?.headers},this._timeoutDuration="number"==typeof r?.timeoutDuration?r?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof r?.cooldownDuration?r?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof r?.cacheMaxAge?r?.cacheMaxAge:6e5,r?.[t.jwksCache]!==void 0&&(this._cache=r?.[t.jwksCache],function(e,t){return!!(!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&(0,s.default)(e.jwks)&&Array.isArray(e.jwks.keys)&&Array.prototype.every.call(e.jwks.keys,s.default))}(r?.[t.jwksCache],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=(0,o.createLocalJWKSet)(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof i.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);n&&!e.has("User-Agent")&&(e.set("User-Agent",n),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||=(0,a.default)(this._url,this._timeoutDuration,this._options).then(e=>{this._local=(0,o.createLocalJWKSet)(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e}),await this._pendingFetch}}t.experimental_jwksCache=t.jwksCache},3131:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompactSign=void 0;let n=r(24532);class a{_flattened;constructor(e){this._flattened=new n.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}t.CompactSign=a},161:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compactVerify=o;let n=r(40122),a=r(3674),i=r(41444);async function o(e,t,r){if(e instanceof Uint8Array&&(e=i.decoder.decode(e)),"string"!=typeof e)throw new a.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:o,1:s,2:l,length:d}=e.split(".");if(3!==d)throw new a.JWSInvalid("Invalid Compact JWS");let u=await (0,n.flattenedVerify)({payload:s,protected:o,signature:l},t,r),c={payload:u.payload,protectedHeader:u.protectedHeader};return"function"==typeof t?{...c,key:u.key}:c}},24532:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedSign=void 0;let n=r(77145),a=r(87200),i=r(17905),o=r(3674),s=r(41444),l=r(50168),d=r(97430);class u{_payload;_protectedHeader;_unprotectedHeader;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new o.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,i.default)(this._protectedHeader,this._unprotectedHeader))throw new o.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let u={...this._protectedHeader,...this._unprotectedHeader},c=(0,d.default)(o.JWSInvalid,new Map([["b64",!0]]),t?.crit,this._protectedHeader,u),h=!0;if(c.has("b64")&&"boolean"!=typeof(h=this._protectedHeader.b64))throw new o.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:p}=u;if("string"!=typeof p||!p)throw new o.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,l.checkKeyTypeWithJwk)(p,e,"sign");let f=this._payload;h&&(f=s.encoder.encode((0,n.encode)(f))),r=this._protectedHeader?s.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):s.encoder.encode("");let y=(0,s.concat)(r,s.encoder.encode("."),f),m=await (0,a.default)(p,e,y),g={signature:(0,n.encode)(m),payload:""};return h&&(g.payload=s.decoder.decode(f)),this._unprotectedHeader&&(g.header=this._unprotectedHeader),this._protectedHeader&&(g.protected=s.decoder.decode(r)),g}}t.FlattenedSign=u},40122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedVerify=f;let n=r(77145),a=r(4008),i=r(3674),o=r(41444),s=r(17905),l=r(95788),d=r(50168),u=r(97430),c=r(62642),h=r(5620),p=r(54183);async function f(e,t,r){let f,y;if(!(0,l.default)(e))throw new i.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new i.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new i.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new i.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new i.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new i.JWSInvalid("JWS Unprotected Header incorrect type");let m={};if(e.protected)try{let t=(0,n.decode)(e.protected);m=JSON.parse(o.decoder.decode(t))}catch{throw new i.JWSInvalid("JWS Protected Header is invalid")}if(!(0,s.default)(m,e.header))throw new i.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...m,...e.header},v=(0,u.default)(i.JWSInvalid,new Map([["b64",!0]]),r?.crit,m,g),_=!0;if(v.has("b64")&&"boolean"!=typeof(_=m.b64))throw new i.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:b}=g;if("string"!=typeof b||!b)throw new i.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let w=r&&(0,c.default)("algorithms",r.algorithms);if(w&&!w.has(b))throw new i.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(_){if("string"!=typeof e.payload)throw new i.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new i.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let S=!1;"function"==typeof t?(t=await t(m,e),S=!0,(0,d.checkKeyTypeWithJwk)(b,t,"verify"),(0,h.isJWK)(t)&&(t=await (0,p.importJWK)(t,b))):(0,d.checkKeyTypeWithJwk)(b,t,"verify");let E=(0,o.concat)(o.encoder.encode(e.protected??""),o.encoder.encode("."),"string"==typeof e.payload?o.encoder.encode(e.payload):e.payload);try{f=(0,n.decode)(e.signature)}catch{throw new i.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,a.default)(b,t,f,E))throw new i.JWSSignatureVerificationFailed;if(_)try{y=(0,n.decode)(e.payload)}catch{throw new i.JWSInvalid("Failed to base64url decode the payload")}else y="string"==typeof e.payload?o.encoder.encode(e.payload):e.payload;let P={payload:y};return(void 0!==e.protected&&(P.protectedHeader=m),void 0!==e.header&&(P.unprotectedHeader=e.header),S)?{...P,key:t}:P}},44945:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralSign=void 0;let n=r(24532),a=r(3674);class i{parent;protectedHeader;unprotectedHeader;options;key;constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class o{_payload;_signatures=[];constructor(e){this._payload=e}addSignature(e,t){let r=new i(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new a.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){let r=this._signatures[t],i=new n.FlattenedSign(this._payload);i.setProtectedHeader(r.protectedHeader),i.setUnprotectedHeader(r.unprotectedHeader);let{payload:o,...s}=await i.sign(r.key,r.options);if(0===t)e.payload=o;else if(e.payload!==o)throw new a.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(s)}return e}}t.GeneralSign=o},6229:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generalVerify=o;let n=r(40122),a=r(3674),i=r(95788);async function o(e,t,r){if(!(0,i.default)(e))throw new a.JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(i.default))throw new a.JWSInvalid("JWS Signatures missing or incorrect type");for(let a of e.signatures)try{return await (0,n.flattenedVerify)({header:a.header,payload:e.payload,protected:a.protected,signature:a.signature},t,r)}catch{}throw new a.JWSSignatureVerificationFailed}},83337:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwtDecrypt=o;let n=r(82290),a=r(61473),i=r(3674);async function o(e,t,r){let o=await (0,n.compactDecrypt)(e,t,r),s=(0,a.default)(o.protectedHeader,o.plaintext,r),{protectedHeader:l}=o;if(void 0!==l.iss&&l.iss!==s.iss)throw new i.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',s,"iss","mismatch");if(void 0!==l.sub&&l.sub!==s.sub)throw new i.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',s,"sub","mismatch");if(void 0!==l.aud&&JSON.stringify(l.aud)!==JSON.stringify(s.aud))throw new i.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',s,"aud","mismatch");let d={payload:s,protectedHeader:l};return"function"==typeof t?{...d,key:o.key}:d}},51612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptJWT=void 0;let n=r(88777),a=r(41444),i=r(19007);class o extends i.ProduceJWT{_cek;_iv;_keyManagementParameters;_protectedHeader;_replicateIssuerAsHeader;_replicateSubjectAsHeader;_replicateAudienceAsHeader;setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new n.CompactEncrypt(a.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}t.EncryptJWT=o},19007:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProduceJWT=void 0;let n=r(173),a=r(95788),i=r(48892);function o(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class s{_payload;constructor(e={}){if(!(0,a.default)(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:o("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:o("setNotBefore",(0,n.default)(e))}:this._payload={...this._payload,nbf:(0,n.default)(new Date)+(0,i.default)(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:o("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:o("setExpirationTime",(0,n.default)(e))}:this._payload={...this._payload,exp:(0,n.default)(new Date)+(0,i.default)(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:(0,n.default)(new Date)}:e instanceof Date?this._payload={...this._payload,iat:o("setIssuedAt",(0,n.default)(e))}:"string"==typeof e?this._payload={...this._payload,iat:o("setIssuedAt",(0,n.default)(new Date)+(0,i.default)(e))}:this._payload={...this._payload,iat:o("setIssuedAt",e)},this}}t.ProduceJWT=s},1373:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SignJWT=void 0;let n=r(3131),a=r(3674),i=r(41444),o=r(19007);class s extends o.ProduceJWT{_protectedHeader;setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let r=new n.CompactSign(i.encoder.encode(JSON.stringify(this._payload)));if(r.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new a.JWTInvalid("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}t.SignJWT=s},29211:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnsecuredJWT=void 0;let n=r(77145),a=r(41444),i=r(3674),o=r(61473),s=r(19007);class l extends s.ProduceJWT{encode(){let e=n.encode(JSON.stringify({alg:"none"})),t=n.encode(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){let r;if("string"!=typeof e)throw new i.JWTInvalid("Unsecured JWT must be a string");let{0:s,1:l,2:d,length:u}=e.split(".");if(3!==u||""!==d)throw new i.JWTInvalid("Invalid Unsecured JWT");try{if(r=JSON.parse(a.decoder.decode(n.decode(s))),"none"!==r.alg)throw Error()}catch{throw new i.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,o.default)(r,n.decode(l),t),header:r}}}t.UnsecuredJWT=l},38176:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwtVerify=o;let n=r(161),a=r(61473),i=r(3674);async function o(e,t,r){let o=await (0,n.compactVerify)(e,t,r);if(o.protectedHeader.crit?.includes("b64")&&!1===o.protectedHeader.b64)throw new i.JWTInvalid("JWTs MUST NOT use unencoded payload");let s={payload:(0,a.default)(o.protectedHeader,o.payload,r),protectedHeader:o.protectedHeader};return"function"==typeof t?{...s,key:o.key}:s}},85175:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exportSPKI=o,t.exportPKCS8=s,t.exportJWK=l;let n=r(95758),a=r(95758),i=r(50450);async function o(e){return(0,n.toSPKI)(e)}async function s(e){return(0,a.toPKCS8)(e)}async function l(e){return(0,i.default)(e)}},62730:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=a;let n=r(21785);async function a(e,t){return(0,n.generateKeyPair)(e,t)}},53029:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateSecret=a;let n=r(21785);async function a(e,t){return(0,n.generateSecret)(e,t)}},54183:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.importSPKI=l,t.importX509=d,t.importPKCS8=u,t.importJWK=c;let n=r(77145),a=r(95758),i=r(67542),o=r(3674),s=r(95788);async function l(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,a.fromSPKI)(e,t,r)}async function d(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,a.fromX509)(e,t,r)}async function u(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,a.fromPKCS8)(e,t,r)}async function c(e,t){if(!(0,s.default)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,n.decode)(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new o.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,i.default)({...e,alg:t});default:throw new o.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}},97265:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrap=o,t.unwrap=s;let n=r(75712),a=r(49622),i=r(77145);async function o(e,t,r,a){let o=e.slice(0,7),s=await (0,n.default)(o,r,t,a,new Uint8Array(0));return{encryptedKey:s.ciphertext,iv:(0,i.encode)(s.iv),tag:(0,i.encode)(s.tag)}}async function s(e,t,r,n,i){let o=e.slice(0,7);return(0,a.default)(o,t,r,n,i,new Uint8Array(0))}},41444:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decoder=t.encoder=void 0,t.concat=a,t.p2s=function(e,r){return a(t.encoder.encode(e),new Uint8Array([0]),r)},t.uint64be=function(e){let t=new Uint8Array(8);return i(t,Math.floor(e/4294967296),0),i(t,e%4294967296,4),t},t.uint32be=o,t.lengthAndInput=function(e){return a(o(e.length),e)},t.concatKdf=s;let n=r(35657);function a(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function i(e,t,r){if(t<0||t>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function o(e){let t=new Uint8Array(4);return i(t,e),t}async function s(e,t,r){let a=Math.ceil((t>>3)/32),i=new Uint8Array(32*a);for(let t=0;t<a;t++){let a=new Uint8Array(4+e.length+r.length);a.set(o(t+1)),a.set(e,4),a.set(r,4+e.length),i.set(await (0,n.default)("sha256",a),32*t)}return i.slice(0,t>>3)}t.encoder=new TextEncoder,t.decoder=new TextDecoder},54463:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=i;let n=r(3674),a=r(90831);function i(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.default=e=>(0,a.default)(new Uint8Array(i(e)>>3))},57719:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(3674),a=r(12081);t.default=(e,t)=>{if(t.length<<3!==(0,a.bitLength)(e))throw new n.JWEInvalid("Invalid Initialization Vector length")}},50168:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkKeyTypeWithJwk=void 0;let n=r(41707),a=r(25595),i=r(5620),o=e=>e?.[Symbol.toStringTag],s=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},l=(e,t,r,l)=>{if(!(t instanceof Uint8Array)){if(l&&i.isJWK(t)){if(i.isSecretJWK(t)&&s(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!(0,a.default)(t))throw TypeError((0,n.withAlg)(e,t,...a.types,"Uint8Array",l?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${o(t)} instances for symmetric algorithms must be of type "secret"`)}},d=(e,t,r,l)=>{if(l&&i.isJWK(t))switch(r){case"sign":if(i.isPrivateJWK(t)&&s(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(i.isPublicJWK(t)&&s(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!(0,a.default)(t))throw TypeError((0,n.withAlg)(e,t,...a.types,l?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function u(e,t,r,n){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?l(t,r,n,e):d(t,r,n,e)}t.default=u.bind(void 0,!1),t.checkKeyTypeWithJwk=u.bind(void 0,!0)},64759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new n.JWEInvalid("PBES2 Salt Input must be 8 or more octets")};let n=r(3674)},4820:(e,t)=>{function r(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function n(e,t){return e.name===t}function a(e){return parseInt(e.name.slice(4),10)}function i(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkSigCryptoKey=function(e,t,...o){switch(t){case"HS256":case"HS384":case"HS512":{if(!n(e.algorithm,"HMAC"))throw r("HMAC");let i=parseInt(t.slice(2),10);if(a(e.algorithm.hash)!==i)throw r(`SHA-${i}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!n(e.algorithm,"RSASSA-PKCS1-v1_5"))throw r("RSASSA-PKCS1-v1_5");let i=parseInt(t.slice(2),10);if(a(e.algorithm.hash)!==i)throw r(`SHA-${i}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!n(e.algorithm,"RSA-PSS"))throw r("RSA-PSS");let i=parseInt(t.slice(2),10);if(a(e.algorithm.hash)!==i)throw r(`SHA-${i}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw r("Ed25519 or Ed448");break;case"Ed25519":if(!n(e.algorithm,"Ed25519"))throw r("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!n(e.algorithm,"ECDSA"))throw r("ECDSA");let a=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==a)throw r(a,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}i(e,o)},t.checkEncCryptoKey=function(e,t,...o){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!n(e.algorithm,"AES-GCM"))throw r("AES-GCM");let a=parseInt(t.slice(1,4),10);if(e.algorithm.length!==a)throw r(a,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!n(e.algorithm,"AES-KW"))throw r("AES-KW");let a=parseInt(t.slice(1,4),10);if(e.algorithm.length!==a)throw r(a,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw r("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!n(e.algorithm,"PBKDF2"))throw r("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!n(e.algorithm,"RSA-OAEP"))throw r("RSA-OAEP");let i=parseInt(t.slice(9),10)||1;if(a(e.algorithm.hash)!==i)throw r(`SHA-${i}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}i(e,o)}},10806:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(75186),a=r(90141),i=r(19052),o=r(88524),s=r(77145),l=r(34741),d=r(3674),u=r(54463),c=r(54183),h=r(50168),p=r(95788),f=r(97265);async function y(e,t,r,y,m){switch((0,h.default)(e,t,"decrypt"),t=await l.default.normalizePrivateKey?.(t,e)||t,e){case"dir":if(void 0!==r)throw new d.JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new d.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,o;if(!(0,p.default)(y.epk))throw new d.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!a.ecdhAllowed(t))throw new d.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let l=await (0,c.importJWK)(y.epk,e);if(void 0!==y.apu){if("string"!=typeof y.apu)throw new d.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=(0,s.decode)(y.apu)}catch{throw new d.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==y.apv){if("string"!=typeof y.apv)throw new d.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{o=(0,s.decode)(y.apv)}catch{throw new d.JWEInvalid("Failed to base64url decode the apv")}}let h=await a.deriveKey(l,t,"ECDH-ES"===e?y.enc:e,"ECDH-ES"===e?(0,u.bitLength)(y.enc):parseInt(e.slice(-5,-2),10),i,o);if("ECDH-ES"===e)return h;if(void 0===r)throw new d.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e.slice(-6),h,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new d.JWEInvalid("JWE Encrypted Key missing");return(0,o.decrypt)(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let n;if(void 0===r)throw new d.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof y.p2c)throw new d.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let a=m?.maxPBES2Count||1e4;if(y.p2c>a)throw new d.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof y.p2s)throw new d.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{n=(0,s.decode)(y.p2s)}catch{throw new d.JWEInvalid("Failed to base64url decode the p2s")}return(0,i.decrypt)(e,t,r,y.p2c,n)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new d.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let n,a;if(void 0===r)throw new d.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof y.iv)throw new d.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof y.tag)throw new d.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{n=(0,s.decode)(y.iv)}catch{throw new d.JWEInvalid("Failed to base64url decode the iv")}try{a=(0,s.decode)(y.tag)}catch{throw new d.JWEInvalid("Failed to base64url decode the tag")}return(0,f.unwrap)(e,t,r,n,a)}default:throw new d.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}t.default=y},25983:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(75186),a=r(90141),i=r(19052),o=r(88524),s=r(77145),l=r(34741),d=r(54463),u=r(3674),c=r(85175),h=r(50168),p=r(97265);async function f(e,t,r,f,y={}){let m,g,v;switch((0,h.default)(e,r,"encrypt"),r=await l.default.normalizePublicKey?.(r,e)||r,e){case"dir":v=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!a.ecdhAllowed(r))throw new u.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:i,apv:o}=y,{epk:l}=y;l||=(await a.generateEpk(r)).privateKey;let{x:h,y:p,crv:_,kty:b}=await (0,c.exportJWK)(l),w=await a.deriveKey(r,l,"ECDH-ES"===e?t:e,"ECDH-ES"===e?(0,d.bitLength)(t):parseInt(e.slice(-5,-2),10),i,o);if(g={epk:{x:h,crv:_,kty:b}},"EC"===b&&(g.epk.y=p),i&&(g.apu=(0,s.encode)(i)),o&&(g.apv=(0,s.encode)(o)),"ECDH-ES"===e){v=w;break}v=f||(0,d.default)(t);let S=e.slice(-6);m=await (0,n.wrap)(S,w,v);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":v=f||(0,d.default)(t),m=await (0,o.encrypt)(e,r,v);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{v=f||(0,d.default)(t);let{p2c:n,p2s:a}=y;({encryptedKey:m,...g}=await (0,i.encrypt)(e,r,v,n,a));break}case"A128KW":case"A192KW":case"A256KW":v=f||(0,d.default)(t),m=await (0,n.wrap)(e,r,v);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{v=f||(0,d.default)(t);let{iv:n}=y;({encryptedKey:m,...g}=await (0,p.wrap)(e,r,v,n));break}default:throw new u.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:v,encryptedKey:m,parameters:g}}t.default=f},173:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>Math.floor(e.getTime()/1e3)},41707:(e,t)=>{function r(e,t,...n){if((n=n.filter(Boolean)).length>2){let t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}Object.defineProperty(t,"__esModule",{value:!0}),t.withAlg=function(e,t,...n){return r(`Key for the ${e} algorithm must be `,t,...n)},t.default=(e,...t)=>r("Key must be ",e,...t)},17905:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}},5620:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isJWK=a,t.isPrivateJWK=function(e){return"oct"!==e.kty&&"string"==typeof e.d},t.isPublicJWK=function(e){return"oct"!==e.kty&&void 0===e.d},t.isSecretJWK=function(e){return a(e)&&"oct"===e.kty&&"string"==typeof e.k};let n=r(95788);function a(e){return(0,n.default)(e)&&"string"==typeof e.kty}},95788:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},12081:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=i;let n=r(3674),a=r(90831);function i(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.default=e=>(0,a.default)(new Uint8Array(i(e)>>3))},61473:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(3674),a=r(41444),i=r(173),o=r(48892),s=r(95788),l=e=>e.toLowerCase().replace(/^application\//,""),d=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));t.default=(e,t,r={})=>{let u,c;try{u=JSON.parse(a.decoder.decode(t))}catch{}if(!(0,s.default)(u))throw new n.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{typ:h}=r;if(h&&("string"!=typeof e.typ||l(e.typ)!==l(h)))throw new n.JWTClaimValidationFailed('unexpected "typ" JWT header value',u,"typ","check_failed");let{requiredClaims:p=[],issuer:f,subject:y,audience:m,maxTokenAge:g}=r,v=[...p];for(let e of(void 0!==g&&v.push("iat"),void 0!==m&&v.push("aud"),void 0!==y&&v.push("sub"),void 0!==f&&v.push("iss"),new Set(v.reverse())))if(!(e in u))throw new n.JWTClaimValidationFailed(`missing required "${e}" claim`,u,e,"missing");if(f&&!(Array.isArray(f)?f:[f]).includes(u.iss))throw new n.JWTClaimValidationFailed('unexpected "iss" claim value',u,"iss","check_failed");if(y&&u.sub!==y)throw new n.JWTClaimValidationFailed('unexpected "sub" claim value',u,"sub","check_failed");if(m&&!d(u.aud,"string"==typeof m?[m]:m))throw new n.JWTClaimValidationFailed('unexpected "aud" claim value',u,"aud","check_failed");switch(typeof r.clockTolerance){case"string":c=(0,o.default)(r.clockTolerance);break;case"number":c=r.clockTolerance;break;case"undefined":c=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:_}=r,b=(0,i.default)(_||new Date);if((void 0!==u.iat||g)&&"number"!=typeof u.iat)throw new n.JWTClaimValidationFailed('"iat" claim must be a number',u,"iat","invalid");if(void 0!==u.nbf){if("number"!=typeof u.nbf)throw new n.JWTClaimValidationFailed('"nbf" claim must be a number',u,"nbf","invalid");if(u.nbf>b+c)throw new n.JWTClaimValidationFailed('"nbf" claim timestamp check failed',u,"nbf","check_failed")}if(void 0!==u.exp){if("number"!=typeof u.exp)throw new n.JWTClaimValidationFailed('"exp" claim must be a number',u,"exp","invalid");if(u.exp<=b-c)throw new n.JWTExpired('"exp" claim timestamp check failed',u,"exp","check_failed")}if(g){let e=b-u.iat;if(e-c>("number"==typeof g?g:(0,o.default)(g)))throw new n.JWTExpired('"iat" claim timestamp check failed (too far in the past)',u,"iat","check_failed");if(e<0-c)throw new n.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',u,"iat","check_failed")}return u}},70061:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unprotected=void 0,t.unprotected=Symbol()},48892:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});let r=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;t.default=e=>{let t;let n=r.exec(e);if(!n||n[4]&&n[1])throw TypeError("Invalid time period format");let a=parseFloat(n[2]);switch(n[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(a);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*a);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*a);break;case"day":case"days":case"d":t=Math.round(86400*a);break;case"week":case"weeks":case"w":t=Math.round(604800*a);break;default:t=Math.round(31557600*a)}return"-"===n[1]||"ago"===n[4]?-t:t}},62642:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}},97430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(3674);t.default=function(e,t,r,a,i){let o;if(void 0!==i.crit&&a?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!a||void 0===a.crit)return new Set;if(!Array.isArray(a.crit)||0===a.crit.length||a.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,a.crit)){if(!o.has(s))throw new n.JOSENotSupported(`Extension Header Parameter "${s}" is not recognized`);if(void 0===i[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&void 0===a[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(a.crit)}},75186:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(72254),a=r(6005),i=r(3674),o=r(41444),s=r(6419),l=r(4820),d=r(31745),u=r(41707),c=r(97959),h=r(25595);function p(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function f(e,t,r){if((0,d.default)(e))return e;if(e instanceof Uint8Array)return(0,a.createSecretKey)(e);if((0,s.isCryptoKey)(e))return(0,l.checkEncCryptoKey)(e,t,r),a.KeyObject.from(e);throw TypeError((0,u.default)(e,...h.types,"Uint8Array"))}t.wrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,c.default)(l))throw new i.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let d=f(t,e,"wrapKey");p(d,e);let u=(0,a.createCipheriv)(l,d,n.Buffer.alloc(8,166));return(0,o.concat)(u.update(r),u.final())},t.unwrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,c.default)(l))throw new i.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let d=f(t,e,"unwrapKey");p(d,e);let u=(0,a.createDecipheriv)(l,d,n.Buffer.alloc(8,166));return(0,o.concat)(u.update(r),u.final())}},95758:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fromX509=t.fromSPKI=t.fromPKCS8=t.toPKCS8=t.toSPKI=void 0;let n=r(6005),a=r(72254),i=r(6419),o=r(31745),s=r(41707),l=r(25595),d=(e,t,r)=>{let a;if((0,i.isCryptoKey)(r)){if(!r.extractable)throw TypeError("CryptoKey is not extractable");a=n.KeyObject.from(r)}else if((0,o.default)(r))a=r;else throw TypeError((0,s.default)(r,...l.types));if(a.type!==e)throw TypeError(`key is not a ${e} key`);return a.export({format:"pem",type:t})};t.toSPKI=e=>d("public","spki",e),t.toPKCS8=e=>d("private","pkcs8",e),t.fromPKCS8=e=>(0,n.createPrivateKey)({key:a.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),t.fromSPKI=e=>(0,n.createPublicKey)({key:a.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),t.fromX509=e=>(0,n.createPublicKey)({key:e,type:"spki",format:"pem"})},77145:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodeBase64=t.decodeBase64=void 0;let n=r(72254),a=r(41444);t.encode=e=>n.Buffer.from(e).toString("base64url"),t.decodeBase64=e=>new Uint8Array(n.Buffer.from(e,"base64")),t.encodeBase64=e=>n.Buffer.from(e).toString("base64"),t.decode=e=>new Uint8Array(n.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=a.decoder.decode(t)),t}(e),"base64url"))},79701:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i,o,s){let l=(0,a.concat)(e,t,r,(0,a.uint64be)(e.length<<3)),d=(0,n.createHmac)(`sha${i}`,o);return d.update(l),d.digest().slice(0,s>>3)};let n=r(6005),a=r(41444)},35380:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(3674),a=r(31745);t.default=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new n.JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if((0,a.default)(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},50644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005);t.default=(e,t)=>{let r;try{r=e instanceof n.KeyObject?e.asymmetricKeyDetails?.modulusLength:Buffer.from(e.n,"base64url").byteLength<<3}catch{}if("number"!=typeof r||r<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},97959:(e,t,r)=>{let n;Object.defineProperty(t,"__esModule",{value:!0});let a=r(6005);t.default=e=>(n||=new Set((0,a.getCiphers)())).has(e)},49622:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),a=r(57719),i=r(35380),o=r(41444),s=r(3674),l=r(21478),d=r(79701),u=r(6419),c=r(4820),h=r(31745),p=r(41707),f=r(97959),y=r(25595);t.default=(e,t,r,m,g,v)=>{let _;if((0,u.isCryptoKey)(t))(0,c.checkEncCryptoKey)(t,e,"decrypt"),_=n.KeyObject.from(t);else if(t instanceof Uint8Array||(0,h.default)(t))_=t;else throw TypeError((0,p.default)(t,...y.types,"Uint8Array"));if(!m)throw new s.JWEInvalid("JWE Initialization Vector missing");if(!g)throw new s.JWEInvalid("JWE Authentication Tag missing");switch((0,i.default)(e,_),(0,a.default)(e,m),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,a,i,u){let c,p;let y=parseInt(e.slice(1,4),10);(0,h.default)(t)&&(t=t.export());let m=t.subarray(y>>3),g=t.subarray(0,y>>3),v=parseInt(e.slice(-3),10),_=`aes-${y}-cbc`;if(!(0,f.default)(_))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let b=(0,d.default)(u,a,r,v,g,y);try{c=(0,l.default)(i,b)}catch{}if(!c)throw new s.JWEDecryptionFailed;try{let e=(0,n.createDecipheriv)(_,m,a);p=(0,o.concat)(e.update(r),e.final())}catch{}if(!p)throw new s.JWEDecryptionFailed;return p}(e,_,r,m,g,v);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,a,i,o){let l=parseInt(e.slice(1,4),10),d=`aes-${l}-gcm`;if(!(0,f.default)(d))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,n.createDecipheriv)(d,t,a,{authTagLength:16});e.setAuthTag(i),o.byteLength&&e.setAAD(o,{plaintextLength:r.length});let s=e.update(r);return e.final(),s}catch{throw new s.JWEDecryptionFailed}}(e,_,r,m,g,v);default:throw new s.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},35657:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005);t.default=(e,t)=>(0,n.createHash)(e).update(t).digest()},37927:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"Ed25519":case"EdDSA":return;default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};let n=r(3674)},90141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ecdhAllowed=void 0,t.deriveKey=f,t.generateEpk=y;let n=r(6005),a=r(47261),i=r(519),o=r(41444),s=r(3674),l=r(6419),d=r(4820),u=r(31745),c=r(41707),h=r(25595),p=(0,a.promisify)(n.generateKeyPair);async function f(e,t,r,a,i=new Uint8Array(0),s=new Uint8Array(0)){let p,f;if((0,l.isCryptoKey)(e))(0,d.checkEncCryptoKey)(e,"ECDH"),p=n.KeyObject.from(e);else if((0,u.default)(e))p=e;else throw TypeError((0,c.default)(e,...h.types));if((0,l.isCryptoKey)(t))(0,d.checkEncCryptoKey)(t,"ECDH","deriveBits"),f=n.KeyObject.from(t);else if((0,u.default)(t))f=t;else throw TypeError((0,c.default)(t,...h.types));let y=(0,o.concat)((0,o.lengthAndInput)(o.encoder.encode(r)),(0,o.lengthAndInput)(i),(0,o.lengthAndInput)(s),(0,o.uint32be)(a)),m=(0,n.diffieHellman)({privateKey:f,publicKey:p});return(0,o.concatKdf)(m,a,y)}async function y(e){let t;if((0,l.isCryptoKey)(e))t=n.KeyObject.from(e);else if((0,u.default)(e))t=e;else throw TypeError((0,c.default)(e,...h.types));switch(t.asymmetricKeyType){case"x25519":return p("x25519");case"x448":return p("x448");case"ec":return p("ec",{namedCurve:(0,i.default)(t)});default:throw new s.JOSENotSupported("Invalid or unsupported EPK")}}t.ecdhAllowed=e=>["P-256","P-384","P-521","X25519","X448"].includes((0,i.default)(e))},75712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),a=r(57719),i=r(35380),o=r(41444),s=r(79701),l=r(6419),d=r(4820),u=r(31745),c=r(41707),h=r(12081),p=r(3674),f=r(97959),y=r(25595);t.default=(e,t,r,m,g)=>{let v;if((0,l.isCryptoKey)(r))(0,d.checkEncCryptoKey)(r,e,"encrypt"),v=n.KeyObject.from(r);else if(r instanceof Uint8Array||(0,u.default)(r))v=r;else throw TypeError((0,c.default)(r,...y.types,"Uint8Array"));switch((0,i.default)(e,v),m?(0,a.default)(e,m):m=(0,h.default)(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,a,i){let l=parseInt(e.slice(1,4),10);(0,u.default)(r)&&(r=r.export());let d=r.subarray(l>>3),c=r.subarray(0,l>>3),h=`aes-${l}-cbc`;if(!(0,f.default)(h))throw new p.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let y=(0,n.createCipheriv)(h,d,a),m=(0,o.concat)(y.update(t),y.final()),g=parseInt(e.slice(-3),10),v=(0,s.default)(i,a,m,g,c,l);return{ciphertext:m,tag:v,iv:a}}(e,t,v,m,g);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,a,i){let o=parseInt(e.slice(1,4),10),s=`aes-${o}-gcm`;if(!(0,f.default)(s))throw new p.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let l=(0,n.createCipheriv)(s,r,a,{authTagLength:16});i.byteLength&&l.setAAD(i,{plaintextLength:t.length});let d=l.update(t);return l.final(),{ciphertext:d,tag:l.getAuthTag(),iv:a}}(e,t,v,m,g);default:throw new p.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},43264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(88849),a=r(22286),i=r(15673),o=r(3674),s=r(41444),l=async(e,t,r)=>{let l;switch(e.protocol){case"https:":l=a.get;break;case"http:":l=n.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:d,headers:u}=r,c=l(e.href,{agent:d,timeout:t,headers:u}),[h]=await Promise.race([(0,i.once)(c,"response"),(0,i.once)(c,"timeout")]);if(!h)throw c.destroy(),new o.JWKSTimeout;if(200!==h.statusCode)throw new o.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let p=[];for await(let e of h)p.push(e);try{return JSON.parse(s.decoder.decode((0,s.concat)(...p)))}catch{throw new o.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};t.default=l},21785:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateSecret=l,t.generateKeyPair=d;let n=r(6005),a=r(47261),i=r(90831),o=r(3674),s=(0,a.promisify)(n.generateKeyPair);async function l(e,t){let r;switch(e){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new o.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,n.createSecretKey)((0,i.default)(new Uint8Array(r>>3)))}async function d(e,t){switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let e=t?.modulusLength??2048;if("number"!=typeof e||e<2048)throw new o.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return await s("rsa",{modulusLength:e,publicExponent:65537})}case"ES256":return s("ec",{namedCurve:"P-256"});case"ES256K":return s("ec",{namedCurve:"secp256k1"});case"ES384":return s("ec",{namedCurve:"P-384"});case"ES512":return s("ec",{namedCurve:"P-521"});case"Ed25519":return s("ed25519");case"EdDSA":switch(t?.crv){case void 0:case"Ed25519":return s("ed25519");case"Ed448":return s("ed448");default:throw new o.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e=t?.crv??"P-256";switch(e){case void 0:case"P-256":case"P-384":case"P-521":return s("ec",{namedCurve:e});case"X25519":return s("x25519");case"X448":return s("x448");default:throw new o.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}}default:throw new o.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}},519:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.weakMap=void 0;let n=r(6005),a=r(3674),i=r(6419),o=r(31745),s=r(41707),l=r(25595),d=r(5620);t.weakMap=new WeakMap;let u=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new a.JOSENotSupported("Unsupported key curve for this operation")}};t.default=(e,t)=>{let r;if((0,i.isCryptoKey)(e))r=n.KeyObject.from(e);else if((0,o.default)(e))r=e;else if((0,d.isJWK)(e))return e.crv;else throw TypeError((0,s.default)(e,...l.types));if("secret"===r.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let e=r.asymmetricKeyDetails.namedCurve;if(t)return e;return u(e)}default:throw TypeError("Invalid asymmetric key type for this operation")}}},17885:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError((0,o.default)(t,...s.types));return(0,n.createSecretKey)(t)}if(t instanceof n.KeyObject)return t;if((0,a.isCryptoKey)(t))return(0,i.checkSigCryptoKey)(t,e,r),n.KeyObject.from(t);if(l.isJWK(t))return e.startsWith("HS")?(0,n.createSecretKey)(Buffer.from(t.k,"base64url")):t;throw TypeError((0,o.default)(t,...s.types,"Uint8Array","JSON Web Key"))};let n=r(6005),a=r(6419),i=r(4820),o=r(41707),s=r(25595),l=r(5620)},49618:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};let n=r(3674)},25595:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;let n=r(6419),a=r(31745);t.default=e=>(0,a.default)(e)||(0,n.isCryptoKey)(e);let i=["KeyObject"];t.types=i,(globalThis.CryptoKey||n.default?.CryptoKey)&&i.push("CryptoKey")},31745:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(47261);t.default=e=>n.types.isKeyObject(e)},67542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005);t.default=e=>e.d?(0,n.createPrivateKey)({format:"jwk",key:e}):(0,n.createPublicKey)({format:"jwk",key:e})},50450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),a=r(77145),i=r(3674),o=r(6419),s=r(31745),l=r(41707),d=r(25595);t.default=e=>{let t;if((0,o.isCryptoKey)(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=n.KeyObject.from(e)}else if((0,s.default)(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:(0,a.encode)(e)};else throw TypeError((0,l.default)(e,...d.types,"Uint8Array"));if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new i.JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}},15274:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let r,l,d,u;if(t instanceof n.KeyObject)r=t.asymmetricKeyType,l=t.asymmetricKeyDetails;else switch(d=!0,t.kty){case"RSA":r="rsa";break;case"EC":r="ec";break;case"OKP":if("Ed25519"===t.crv){r="ed25519";break}if("Ed448"===t.crv){r="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(e){case"Ed25519":if("ed25519"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case"EdDSA":if(!["ed25519","ed448"].includes(r))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,o.default)(t,e);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===r){let{hashAlgorithm:t,mgf1HashAlgorithm:r,saltLength:n}=l,a=parseInt(e.slice(-3),10);if(void 0!==t&&(t!==`sha${a}`||r!==t))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==n&&n>a>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");(0,o.default)(t,e),u={padding:n.constants.RSA_PKCS1_PSS_PADDING,saltLength:n.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let n=(0,a.default)(t),i=s.get(e);if(n!==i)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${i}, got ${n}`);u={dsaEncoding:"ieee-p1363"};break}default:throw new i.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return d?{format:"jwk",key:t,...u}:u?{...u,key:t}:t};let n=r(6005),a=r(519),i=r(3674),o=r(50644),s=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]])},34741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},19052:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(47261),a=r(6005),i=r(90831),o=r(41444),s=r(77145),l=r(75186),d=r(64759),u=r(6419),c=r(4820),h=r(31745),p=r(41707),f=r(25595),y=(0,n.promisify)(a.pbkdf2);function m(e,t){if((0,h.default)(e))return e.export();if(e instanceof Uint8Array)return e;if((0,u.isCryptoKey)(e))return(0,c.checkEncCryptoKey)(e,t,"deriveBits","deriveKey"),a.KeyObject.from(e).export();throw TypeError((0,p.default)(e,...f.types,"Uint8Array"))}let g=async(e,t,r,n=2048,a=(0,i.default)(new Uint8Array(16)))=>{(0,d.default)(a);let u=(0,o.p2s)(e,a),c=parseInt(e.slice(13,16),10)>>3,h=m(t,e),p=await y(h,u,n,c,`sha${e.slice(8,11)}`);return{encryptedKey:await (0,l.wrap)(e.slice(-6),p,r),p2c:n,p2s:(0,s.encode)(a)}};t.encrypt=g;let v=async(e,t,r,n,a)=>{(0,d.default)(a);let i=(0,o.p2s)(e,a),s=parseInt(e.slice(13,16),10)>>3,u=m(t,e),c=await y(u,i,n,s,`sha${e.slice(8,11)}`);return(0,l.unwrap)(e.slice(-6),c,r)};t.decrypt=v},90831:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(6005);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.randomFillSync}})},88524:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(6005),a=r(47261),i=r(50644),o=r(6419),s=r(4820),l=r(31745),d=r(41707),u=r(25595),c=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,i.default)(e,t)},h=(0,a.deprecate)(()=>n.constants.RSA_PKCS1_PADDING,'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),p=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return n.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return h();default:return}},f=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function y(e,t,...r){if((0,l.default)(e))return e;if((0,o.isCryptoKey)(e))return(0,s.checkEncCryptoKey)(e,t,...r),n.KeyObject.from(e);throw TypeError((0,d.default)(e,...u.types))}t.encrypt=(e,t,r)=>{let a=p(e),i=f(e),o=y(t,e,"wrapKey","encrypt");return c(o,e),(0,n.publicEncrypt)({key:o,oaepHash:i,padding:a},r)},t.decrypt=(e,t,r)=>{let a=p(e),i=f(e),o=y(t,e,"unwrapKey","decrypt");return c(o,e),(0,n.privateDecrypt)({key:o,oaepHash:i,padding:a},r)}},34265:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default="node:crypto"},87200:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),a=r(47261),i=r(37927),o=r(49618),s=r(15274),l=r(17885),d=(0,a.promisify)(n.sign),u=async(e,t,r)=>{let a=(0,l.default)(e,t,"sign");if(e.startsWith("HS")){let t=n.createHmac((0,o.default)(e),a);return t.update(r),t.digest()}return d((0,i.default)(e),r,(0,s.default)(e,a))};t.default=u},21478:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005).timingSafeEqual;t.default=n},4008:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),a=r(47261),i=r(37927),o=r(15274),s=r(87200),l=r(17885),d=(0,a.promisify)(n.verify),u=async(e,t,r,a)=>{let u=(0,l.default)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,s.default)(e,u,a);try{return n.timingSafeEqual(r,t)}catch{return!1}}let c=(0,i.default)(e),h=(0,o.default)(e,u);try{return await d(c,a,h,r)}catch{return!1}};t.default=u},6419:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCryptoKey=void 0;let n=r(6005),a=r(47261),i=n.webcrypto;t.default=i,t.isCryptoKey=e=>a.types.isCryptoKey(e)},46486:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let n=r(77145);t.encode=n.encode,t.decode=n.decode},91758:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeJwt=function(e){let t,r;if("string"!=typeof e)throw new o.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:s,length:l}=e.split(".");if(5===l)throw new o.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==l)throw new o.JWTInvalid("Invalid JWT");if(!s)throw new o.JWTInvalid("JWTs must contain a payload");try{t=(0,n.decode)(s)}catch{throw new o.JWTInvalid("Failed to base64url decode the payload")}try{r=JSON.parse(a.decoder.decode(t))}catch{throw new o.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,i.default)(r))throw new o.JWTInvalid("Invalid JWT Claims Set");return r};let n=r(46486),a=r(41444),i=r(95788),o=r(3674)},96678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProtectedHeader=function(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e){if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(a.decoder.decode((0,n.decode)(t)));if(!(0,i.default)(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}};let n=r(46486),a=r(41444),i=r(95788)},3674:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JWSSignatureVerificationFailed=t.JWKSTimeout=t.JWKSMultipleMatchingKeys=t.JWKSNoMatchingKey=t.JWKSInvalid=t.JWKInvalid=t.JWTInvalid=t.JWSInvalid=t.JWEInvalid=t.JWEDecryptionFailed=t.JOSENotSupported=t.JOSEAlgNotAllowed=t.JWTExpired=t.JWTClaimValidationFailed=t.JOSEError=void 0;class r extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}t.JOSEError=r;class n extends r{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}t.JWTClaimValidationFailed=n;class a extends r{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}t.JWTExpired=a;class i extends r{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}t.JOSEAlgNotAllowed=i;class o extends r{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}t.JOSENotSupported=o;class s extends r{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}t.JWEDecryptionFailed=s;class l extends r{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}t.JWEInvalid=l;class d extends r{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}t.JWSInvalid=d;class u extends r{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}t.JWTInvalid=u;class c extends r{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}t.JWKInvalid=c;class h extends r{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}t.JWKSInvalid=h;class p extends r{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}t.JWKSNoMatchingKey=p;class f extends r{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}t.JWKSMultipleMatchingKeys=f;class y extends r{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}t.JWKSTimeout=y;class m extends r{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}t.JWSSignatureVerificationFailed=m},1357:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(34265);t.default=n.default},60060:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(12877),a=r(41549);class i{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class o{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return l(this,e)}}class s{constructor(e){this.decoders=e}or(e){return l(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let l=(e,t)=>new s({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class d{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new i(e,t,r),this.decoder=new o(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let u=({name:e,prefix:t,encode:r,decode:n})=>new d(e,t,r,n),c=(e,t,r,n)=>{let a={};for(let e=0;e<t.length;++e)a[t[e]]=e;let i=e.length;for(;"="===e[i-1];)--i;let o=new Uint8Array(i*r/8|0),s=0,l=0,d=0;for(let t=0;t<i;++t){let i=a[e[t]];if(void 0===i)throw SyntaxError(`Non-${n} character`);l=l<<r|i,(s+=r)>=8&&(s-=8,o[d++]=255&l>>s)}if(s>=r||255&l<<8-s)throw SyntaxError("Unexpected end of data");return o},h=(e,t,r)=>{let n="="===t[t.length-1],a=(1<<r)-1,i="",o=0,s=0;for(let n=0;n<e.length;++n)for(s=s<<8|e[n],o+=8;o>r;)o-=r,i+=t[a&s>>o];if(o&&(i+=t[a&s<<r-o]),n)for(;i.length*r&7;)i+="=";return i};t.Codec=d,t.baseX=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:o}=n(r,t);return u({prefix:e,name:t,encode:i,decode:e=>a.coerce(o(e))})},t.from=u,t.or=l,t.rfc4648=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>u({prefix:t,name:e,encode:e=>h(e,n,r),decode:t=>c(t,n,r,e)})},59716:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(60060);let a=n.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),i=n.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),o=n.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),s=n.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=a,t.base64pad=i,t.base64url=o,t.base64urlpad=s},41549:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});let r=new Uint8Array(0);t.coerce=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},t.empty=r,t.equals=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},t.fromHex=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map(e=>parseInt(e,16))):r},t.fromString=e=>new TextEncoder().encode(e),t.isBinary=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),t.toHex=e=>e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),t.toString=e=>new TextDecoder().decode(e)},12877:e=>{e.exports=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==r[o])throw TypeError(i+" is ambiguous");r[o]=a}var s=e.length,l=e.charAt(0),d=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,a=0;e[t]===l;)n++,t++;for(var i=(e.length-t)*d+1>>>0,o=new Uint8Array(i);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var c=0,h=i-1;(0!==u||c<a)&&-1!==h;h--,c++)u+=s*o[h]>>>0,o[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");a=c,t++}if(" "!==e[t]){for(var p=i-a;p!==i&&0===o[p];)p++;for(var f=new Uint8Array(n+(i-p)),y=n;p!==i;)f[y++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var o=(i-a)*u+1>>>0,d=new Uint8Array(o);a!==i;){for(var c=t[a],h=0,p=o-1;(0!==c||h<n)&&-1!==p;p--,h++)c+=256*d[p]>>>0,d[p]=c%s>>>0,c=c/s>>>0;if(0!==c)throw Error("Non-zero carry");n=h,a++}for(var f=o-n;f!==o&&0===d[f];)f++;for(var y=l.repeat(r);f<o;++f)y+=e.charAt(d[f]);return y},decodeUnsafe:c,decode:function(e){var r=c(e);if(r)return r;throw Error(`Non-${t} character`)}}}},46226:(e,t,r)=>{r.d(t,{default:()=>a.a});var n=r(69029),a=r.n(n)},90434:(e,t,r)=>{r.d(t,{default:()=>a.a});var n=r(79404),a=r.n(n)},35047:(e,t,r)=>{var n=r(77389);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},3486:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addBasePath",{enumerable:!0,get:function(){return i}});let n=r(8974),a=r(23658);function i(e,t){return(0,a.normalizePathTrailingSlash)((0,n.addPathPrefix)(e,""))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return n}}),r(23658);let n=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},15424:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"callServer",{enumerable:!0,get:function(){return a}});let n=r(12994);async function a(e,t){let r=(0,n.getServerActionDispatcher)();if(!r)throw Error("Invariant: missing action dispatcher.");return new Promise((n,a)=>{r({actionId:e,actionArgs:t,resolve:n,reject:a})})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},68038:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AppRouterAnnouncer",{enumerable:!0,get:function(){return o}});let n=r(17577),a=r(60962),i="next-route-announcer";function o(e){let{tree:t}=e,[r,o]=(0,n.useState)(null);(0,n.useEffect)(()=>(o(function(){var e;let t=document.getElementsByName(i)[0];if(null==t?void 0:null==(e=t.shadowRoot)?void 0:e.childNodes[0])return t.shadowRoot.childNodes[0];{let e=document.createElement(i);e.style.cssText="position:absolute";let t=document.createElement("div");return t.ariaLive="assertive",t.id="__next-route-announcer__",t.role="alert",t.style.cssText="position:absolute;border:0;height:1px;margin:-1px;padding:0;width:1px;clip:rect(0 0 0 0);overflow:hidden;white-space:nowrap;word-wrap:normal",e.attachShadow({mode:"open"}).appendChild(t),document.body.appendChild(e),t}}()),()=>{let e=document.getElementsByTagName(i)[0];(null==e?void 0:e.isConnected)&&document.body.removeChild(e)}),[]);let[s,l]=(0,n.useState)(""),d=(0,n.useRef)();return(0,n.useEffect)(()=>{let e="";if(document.title)e=document.title;else{let t=document.querySelector("h1");t&&(e=t.innerText||t.textContent||"")}void 0!==d.current&&d.current!==e&&l(e),d.current=e},[t]),r?(0,a.createPortal)(s,r):null}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5138:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION:function(){return n},FLIGHT_PARAMETERS:function(){return l},NEXT_DID_POSTPONE_HEADER:function(){return u},NEXT_ROUTER_PREFETCH_HEADER:function(){return i},NEXT_ROUTER_STATE_TREE:function(){return a},NEXT_RSC_UNION_QUERY:function(){return d},NEXT_URL:function(){return o},RSC_CONTENT_TYPE_HEADER:function(){return s},RSC_HEADER:function(){return r}});let r="RSC",n="Next-Action",a="Next-Router-State-Tree",i="Next-Router-Prefetch",o="Next-Url",s="text/x-component",l=[[r],[a],[i]],d="_rsc",u="x-nextjs-postponed";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},12994:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createEmptyCacheNode:function(){return k},default:function(){return M},getServerActionDispatcher:function(){return O},urlToUrlWithoutFlightMarker:function(){return R}});let n=r(58374),a=r(10326),i=n._(r(17577)),o=r(52413),s=r(57767),l=r(17584),d=r(97008),u=r(77326),c=r(9727),h=r(6199),p=r(32148),f=r(3486),y=r(68038),m=r(46265),g=r(22492),v=r(39519),_=r(5138),b=r(74237),w=r(37929),S=r(68071),E=null,P=null;function O(){return P}let j={};function R(e){let t=new URL(e,location.origin);return t.searchParams.delete(_.NEXT_RSC_UNION_QUERY),t}function T(e){return e.origin!==window.location.origin}function I(e){let{appRouterState:t,sync:r}=e;return(0,i.useInsertionEffect)(()=>{let{tree:e,pushRef:n,canonicalUrl:a}=t,i={...n.preserveCustomHistoryState?window.history.state:{},__NA:!0,__PRIVATE_NEXTJS_INTERNALS_TREE:e};n.pendingPush&&(0,l.createHrefFromUrl)(new URL(window.location.href))!==a?(n.pendingPush=!1,window.history.pushState(i,"",a)):window.history.replaceState(i,"",a),r(t)},[t,r]),null}function k(){return{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null}}function A(e){null==e&&(e={});let t=window.history.state,r=null==t?void 0:t.__NA;r&&(e.__NA=r);let n=null==t?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE;return n&&(e.__PRIVATE_NEXTJS_INTERNALS_TREE=n),e}function C(e){let{headCacheNode:t}=e,r=null!==t?t.head:null,n=null!==t?t.prefetchHead:null,a=null!==n?n:r;return(0,i.useDeferredValue)(r,a)}function x(e){let t,{buildId:r,initialHead:n,initialTree:l,urlParts:c,initialSeedData:_,couldBeIntercepted:O,assetPrefix:R,missingSlots:k}=e,x=(0,i.useMemo)(()=>(0,h.createInitialRouterState)({buildId:r,initialSeedData:_,urlParts:c,initialTree:l,initialParallelRoutes:E,location:null,initialHead:n,couldBeIntercepted:O}),[r,_,c,l,n,O]),[M,D,z]=(0,u.useReducerWithReduxDevtools)(x);(0,i.useEffect)(()=>{E=null},[]);let{canonicalUrl:W}=(0,u.useUnwrapState)(M),{searchParams:U,pathname:N}=(0,i.useMemo)(()=>{let e=new URL(W,"http://n");return{searchParams:e.searchParams,pathname:(0,w.hasBasePath)(e.pathname)?(0,b.removeBasePath)(e.pathname):e.pathname}},[W]),J=(0,i.useCallback)(e=>{let{previousTree:t,serverResponse:r}=e;(0,i.startTransition)(()=>{D({type:s.ACTION_SERVER_PATCH,previousTree:t,serverResponse:r})})},[D]),L=(0,i.useCallback)((e,t,r)=>{let n=new URL((0,f.addBasePath)(e),location.href);return D({type:s.ACTION_NAVIGATE,url:n,isExternalUrl:T(n),locationSearch:location.search,shouldScroll:null==r||r,navigateType:t})},[D]);P=(0,i.useCallback)(e=>{(0,i.startTransition)(()=>{D({...e,type:s.ACTION_SERVER_ACTION})})},[D]);let K=(0,i.useMemo)(()=>({back:()=>window.history.back(),forward:()=>window.history.forward(),prefetch:(e,t)=>{let r;if(!(0,p.isBot)(window.navigator.userAgent)){try{r=new URL((0,f.addBasePath)(e),window.location.href)}catch(t){throw Error("Cannot prefetch '"+e+"' because it cannot be converted to a URL.")}T(r)||(0,i.startTransition)(()=>{var e;D({type:s.ACTION_PREFETCH,url:r,kind:null!=(e=null==t?void 0:t.kind)?e:s.PrefetchKind.FULL})})}},replace:(e,t)=>{void 0===t&&(t={}),(0,i.startTransition)(()=>{var r;L(e,"replace",null==(r=t.scroll)||r)})},push:(e,t)=>{void 0===t&&(t={}),(0,i.startTransition)(()=>{var r;L(e,"push",null==(r=t.scroll)||r)})},refresh:()=>{(0,i.startTransition)(()=>{D({type:s.ACTION_REFRESH,origin:window.location.origin})})},fastRefresh:()=>{throw Error("fastRefresh can only be used in development mode. Please use refresh instead.")}}),[D,L]);(0,i.useEffect)(()=>{window.next&&(window.next.router=K)},[K]),(0,i.useEffect)(()=>{function e(e){var t;e.persisted&&(null==(t=window.history.state)?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE)&&(j.pendingMpaPath=void 0,D({type:s.ACTION_RESTORE,url:new URL(window.location.href),tree:window.history.state.__PRIVATE_NEXTJS_INTERNALS_TREE}))}return window.addEventListener("pageshow",e),()=>{window.removeEventListener("pageshow",e)}},[D]);let{pushRef:H}=(0,u.useUnwrapState)(M);if(H.mpaNavigation){if(j.pendingMpaPath!==W){let e=window.location;H.pendingPush?e.assign(W):e.replace(W),j.pendingMpaPath=W}(0,i.use)(v.unresolvedThenable)}(0,i.useEffect)(()=>{let e=window.history.pushState.bind(window.history),t=window.history.replaceState.bind(window.history),r=e=>{var t;let r=window.location.href,n=null==(t=window.history.state)?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE;(0,i.startTransition)(()=>{D({type:s.ACTION_RESTORE,url:new URL(null!=e?e:r,r),tree:n})})};window.history.pushState=function(t,n,a){return(null==t?void 0:t.__NA)||(null==t?void 0:t._N)||(t=A(t),a&&r(a)),e(t,n,a)},window.history.replaceState=function(e,n,a){return(null==e?void 0:e.__NA)||(null==e?void 0:e._N)||(e=A(e),a&&r(a)),t(e,n,a)};let n=e=>{let{state:t}=e;if(t){if(!t.__NA){window.location.reload();return}(0,i.startTransition)(()=>{D({type:s.ACTION_RESTORE,url:new URL(window.location.href),tree:t.__PRIVATE_NEXTJS_INTERNALS_TREE})})}};return window.addEventListener("popstate",n),()=>{window.history.pushState=e,window.history.replaceState=t,window.removeEventListener("popstate",n)}},[D]);let{cache:F,tree:Z,nextUrl:$,focusAndScrollRef:V}=(0,u.useUnwrapState)(M),B=(0,i.useMemo)(()=>(0,g.findHeadInCache)(F,Z[1]),[F,Z]),G=(0,i.useMemo)(()=>(function e(t,r){for(let n of(void 0===r&&(r={}),Object.values(t[1]))){let t=n[0],a=Array.isArray(t),i=a?t[1]:t;!i||i.startsWith(S.PAGE_SEGMENT_KEY)||(a&&("c"===t[2]||"oc"===t[2])?r[t[0]]=t[1].split("/"):a&&(r[t[0]]=t[1]),r=e(n,r))}return r})(Z),[Z]);if(null!==B){let[e,r]=B;t=(0,a.jsx)(C,{headCacheNode:e},r)}else t=null;let q=(0,a.jsxs)(m.RedirectBoundary,{children:[t,F.rsc,(0,a.jsx)(y.AppRouterAnnouncer,{tree:Z})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{appRouterState:(0,u.useUnwrapState)(M),sync:z}),(0,a.jsx)(d.PathParamsContext.Provider,{value:G,children:(0,a.jsx)(d.PathnameContext.Provider,{value:N,children:(0,a.jsx)(d.SearchParamsContext.Provider,{value:U,children:(0,a.jsx)(o.GlobalLayoutRouterContext.Provider,{value:{buildId:r,changeByServerResponse:J,tree:Z,focusAndScrollRef:V,nextUrl:$},children:(0,a.jsx)(o.AppRouterContext.Provider,{value:K,children:(0,a.jsx)(o.LayoutRouterContext.Provider,{value:{childNodes:F.parallelRoutes,tree:Z,url:W,loading:F.loading},children:q})})})})})})]})}function M(e){let{globalErrorComponent:t,...r}=e;return(0,a.jsx)(c.ErrorBoundary,{errorComponent:t,children:(0,a.jsx)(x,{...r})})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},16136:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bailoutToClientRendering",{enumerable:!0,get:function(){return i}});let n=r(94129),a=r(45869);function i(e){let t=a.staticGenerationAsyncStorage.getStore();if((null==t||!t.forceStatic)&&(null==t?void 0:t.isStaticGeneration))throw new n.BailoutToCSRError(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},96114:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ClientPageRoot",{enumerable:!0,get:function(){return i}});let n=r(10326),a=r(23325);function i(e){let{Component:t,props:r}=e;return r.searchParams=(0,a.createDynamicallyTrackedSearchParams)(r.searchParams||{}),(0,n.jsx)(t,{...r})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9727:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ErrorBoundary:function(){return f},ErrorBoundaryHandler:function(){return c},GlobalError:function(){return h},default:function(){return p}});let n=r(91174),a=r(10326),i=n._(r(17577)),o=r(77389),s=r(37313),l=r(45869),d={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}};function u(e){let{error:t}=e,r=l.staticGenerationAsyncStorage.getStore();if((null==r?void 0:r.isRevalidate)||(null==r?void 0:r.isStaticGeneration))throw console.error(t),t;return null}class c extends i.default.Component{static getDerivedStateFromError(e){if((0,s.isNextRouterError)(e))throw e;return{error:e}}static getDerivedStateFromProps(e,t){return e.pathname!==t.previousPathname&&t.error?{error:null,previousPathname:e.pathname}:{error:t.error,previousPathname:e.pathname}}render(){return this.state.error?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{error:this.state.error}),this.props.errorStyles,this.props.errorScripts,(0,a.jsx)(this.props.errorComponent,{error:this.state.error,reset:this.reset})]}):this.props.children}constructor(e){super(e),this.reset=()=>{this.setState({error:null})},this.state={error:null,previousPathname:this.props.pathname}}}function h(e){let{error:t}=e,r=null==t?void 0:t.digest;return(0,a.jsxs)("html",{id:"__next_error__",children:[(0,a.jsx)("head",{}),(0,a.jsxs)("body",{children:[(0,a.jsx)(u,{error:t}),(0,a.jsx)("div",{style:d.error,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{style:d.text,children:"Application error: a "+(r?"server":"client")+"-side exception has occurred (see the "+(r?"server logs":"browser console")+" for more information)."}),r?(0,a.jsx)("p",{style:d.text,children:"Digest: "+r}):null]})})]})]})}let p=h;function f(e){let{errorComponent:t,errorStyles:r,errorScripts:n,children:i}=e,s=(0,o.usePathname)();return t?(0,a.jsx)(c,{pathname:s,errorComponent:t,errorStyles:r,errorScripts:n,children:i}):(0,a.jsx)(a.Fragment,{children:i})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70442:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return a}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=r}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37313:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return i}});let n=r(50706),a=r(62747);function i(e){return e&&e.digest&&((0,a.isRedirectError)(e)||(0,n.isNotFoundError)(e))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},79671:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return E}}),r(91174);let n=r(58374),a=r(10326),i=n._(r(17577));r(60962);let o=r(52413),s=r(9009),l=r(39519),d=r(9727),u=r(70455),c=r(79976),h=r(46265),p=r(41868),f=r(62162),y=r(39886),m=r(45262),g=["bottom","height","left","right","top","width","x","y"];function v(e,t){let r=e.getBoundingClientRect();return r.top>=0&&r.top<=t}class _ extends i.default.Component{componentDidMount(){this.handlePotentialScroll()}componentDidUpdate(){this.props.focusAndScrollRef.apply&&this.handlePotentialScroll()}render(){return this.props.children}constructor(...e){super(...e),this.handlePotentialScroll=()=>{let{focusAndScrollRef:e,segmentPath:t}=this.props;if(e.apply){if(0!==e.segmentPaths.length&&!e.segmentPaths.some(e=>t.every((t,r)=>(0,u.matchSegment)(t,e[r]))))return;let r=null,n=e.hashFragment;if(n&&(r=function(e){var t;return"top"===e?document.body:null!=(t=document.getElementById(e))?t:document.getElementsByName(e)[0]}(n)),!r&&(r=null),!(r instanceof Element))return;for(;!(r instanceof HTMLElement)||function(e){if(["sticky","fixed"].includes(getComputedStyle(e).position))return!0;let t=e.getBoundingClientRect();return g.every(e=>0===t[e])}(r);){if(null===r.nextElementSibling)return;r=r.nextElementSibling}e.apply=!1,e.hashFragment=null,e.segmentPaths=[],(0,c.handleSmoothScroll)(()=>{if(n){r.scrollIntoView();return}let e=document.documentElement,t=e.clientHeight;!v(r,t)&&(e.scrollTop=0,v(r,t)||r.scrollIntoView())},{dontForceLayout:!0,onlyHashChange:e.onlyHashChange}),e.onlyHashChange=!1,r.focus()}}}}function b(e){let{segmentPath:t,children:r}=e,n=(0,i.useContext)(o.GlobalLayoutRouterContext);if(!n)throw Error("invariant global layout router not mounted");return(0,a.jsx)(_,{segmentPath:t,focusAndScrollRef:n.focusAndScrollRef,children:r})}function w(e){let{parallelRouterKey:t,url:r,childNodes:n,segmentPath:d,tree:c,cacheKey:h}=e,p=(0,i.useContext)(o.GlobalLayoutRouterContext);if(!p)throw Error("invariant global layout router not mounted");let{buildId:f,changeByServerResponse:y,tree:g}=p,v=n.get(h);if(void 0===v){let e={lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null};v=e,n.set(h,e)}let _=null!==v.prefetchRsc?v.prefetchRsc:v.rsc,b=(0,i.useDeferredValue)(v.rsc,_),w="object"==typeof b&&null!==b&&"function"==typeof b.then?(0,i.use)(b):b;if(!w){let e=v.lazyData;if(null===e){let t=function e(t,r){if(t){let[n,a]=t,i=2===t.length;if((0,u.matchSegment)(r[0],n)&&r[1].hasOwnProperty(a)){if(i){let t=e(void 0,r[1][a]);return[r[0],{...r[1],[a]:[t[0],t[1],t[2],"refetch"]}]}return[r[0],{...r[1],[a]:e(t.slice(2),r[1][a])}]}}return r}(["",...d],g),n=(0,m.hasInterceptionRouteInCurrentTree)(g);v.lazyData=e=(0,s.fetchServerResponse)(new URL(r,location.origin),t,n?p.nextUrl:null,f),v.lazyDataResolved=!1}let t=(0,i.use)(e);v.lazyDataResolved||(setTimeout(()=>{(0,i.startTransition)(()=>{y({previousTree:g,serverResponse:t})})}),v.lazyDataResolved=!0),(0,i.use)(l.unresolvedThenable)}return(0,a.jsx)(o.LayoutRouterContext.Provider,{value:{tree:c[1][t],childNodes:v.parallelRoutes,url:r,loading:v.loading},children:w})}function S(e){let{children:t,hasLoading:r,loading:n,loadingStyles:o,loadingScripts:s}=e;return r?(0,a.jsx)(i.Suspense,{fallback:(0,a.jsxs)(a.Fragment,{children:[o,s,n]}),children:t}):(0,a.jsx)(a.Fragment,{children:t})}function E(e){let{parallelRouterKey:t,segmentPath:r,error:n,errorStyles:s,errorScripts:l,templateStyles:u,templateScripts:c,template:m,notFound:g,notFoundStyles:v}=e,_=(0,i.useContext)(o.LayoutRouterContext);if(!_)throw Error("invariant expected layout router to be mounted");let{childNodes:E,tree:P,url:O,loading:j}=_,R=E.get(t);R||(R=new Map,E.set(t,R));let T=P[1][t][0],I=(0,f.getSegmentValue)(T),k=[T];return(0,a.jsx)(a.Fragment,{children:k.map(e=>{let i=(0,f.getSegmentValue)(e),_=(0,y.createRouterCacheKey)(e);return(0,a.jsxs)(o.TemplateContext.Provider,{value:(0,a.jsx)(b,{segmentPath:r,children:(0,a.jsx)(d.ErrorBoundary,{errorComponent:n,errorStyles:s,errorScripts:l,children:(0,a.jsx)(S,{hasLoading:!!j,loading:null==j?void 0:j[0],loadingStyles:null==j?void 0:j[1],loadingScripts:null==j?void 0:j[2],children:(0,a.jsx)(p.NotFoundBoundary,{notFound:g,notFoundStyles:v,children:(0,a.jsx)(h.RedirectBoundary,{children:(0,a.jsx)(w,{parallelRouterKey:t,url:O,tree:P,childNodes:R,segmentPath:r,cacheKey:_,isActive:I===i})})})})})}),children:[u,c,m]},(0,y.createRouterCacheKey)(e,!0))})})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70455:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{canSegmentBeOverridden:function(){return i},matchSegment:function(){return a}});let n=r(92357),a=(e,t)=>"string"==typeof e?"string"==typeof t&&e===t:"string"!=typeof t&&e[0]===t[0]&&e[1]===t[1],i=(e,t)=>{var r;return!Array.isArray(e)&&!!Array.isArray(t)&&(null==(r=(0,n.getSegmentParam)(e))?void 0:r.param)===t[0]};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},77389:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return d.ServerInsertedHTMLContext},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},useParams:function(){return p},usePathname:function(){return c},useRouter:function(){return h},useSearchParams:function(){return u},useSelectedLayoutSegment:function(){return y},useSelectedLayoutSegments:function(){return f},useServerInsertedHTML:function(){return d.useServerInsertedHTML}});let n=r(17577),a=r(52413),i=r(97008),o=r(62162),s=r(68071),l=r(97375),d=r(93347);function u(){let e=(0,n.useContext)(i.SearchParamsContext),t=(0,n.useMemo)(()=>e?new l.ReadonlyURLSearchParams(e):null,[e]);{let{bailoutToClientRendering:e}=r(16136);e("useSearchParams()")}return t}function c(){return(0,n.useContext)(i.PathnameContext)}function h(){let e=(0,n.useContext)(a.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function p(){return(0,n.useContext)(i.PathParamsContext)}function f(e){void 0===e&&(e="children");let t=(0,n.useContext)(a.LayoutRouterContext);return t?function e(t,r,n,a){let i;if(void 0===n&&(n=!0),void 0===a&&(a=[]),n)i=t[1][r];else{var l;let e=t[1];i=null!=(l=e.children)?l:Object.values(e)[0]}if(!i)return a;let d=i[0],u=(0,o.getSegmentValue)(d);return!u||u.startsWith(s.PAGE_SEGMENT_KEY)?a:(a.push(u),e(i,r,!1,a))}(t.tree,e):null}function y(e){void 0===e&&(e="children");let t=f(e);if(!t||0===t.length)return null;let r="children"===e?t[0]:t[t.length-1];return r===s.DEFAULT_SEGMENT_KEY?null:r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},97375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return o},RedirectType:function(){return n.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=r(62747),a=r(50706);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class o extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},41868:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotFoundBoundary",{enumerable:!0,get:function(){return u}});let n=r(58374),a=r(10326),i=n._(r(17577)),o=r(77389),s=r(50706);r(576);let l=r(52413);class d extends i.default.Component{componentDidCatch(){}static getDerivedStateFromError(e){if((0,s.isNotFoundError)(e))return{notFoundTriggered:!0};throw e}static getDerivedStateFromProps(e,t){return e.pathname!==t.previousPathname&&t.notFoundTriggered?{notFoundTriggered:!1,previousPathname:e.pathname}:{notFoundTriggered:t.notFoundTriggered,previousPathname:e.pathname}}render(){return this.state.notFoundTriggered?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{name:"robots",content:"noindex"}),!1,this.props.notFoundStyles,this.props.notFound]}):this.props.children}constructor(e){super(e),this.state={notFoundTriggered:!!e.asNotFound,previousPathname:e.pathname}}}function u(e){let{notFound:t,notFoundStyles:r,asNotFound:n,children:s}=e,u=(0,o.usePathname)(),c=(0,i.useContext)(l.MissingSlotContext);return t?(0,a.jsx)(d,{pathname:u,notFound:t,notFoundStyles:r,asNotFound:n,missingSlots:c,children:s}):(0,a.jsx)(a.Fragment,{children:s})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},50706:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return a},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},77815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PromiseQueue",{enumerable:!0,get:function(){return d}});let n=r(98285),a=r(78817);var i=a._("_maxConcurrency"),o=a._("_runningCount"),s=a._("_queue"),l=a._("_processNext");class d{enqueue(e){let t,r;let a=new Promise((e,n)=>{t=e,r=n}),i=async()=>{try{n._(this,o)[o]++;let r=await e();t(r)}catch(e){r(e)}finally{n._(this,o)[o]--,n._(this,l)[l]()}};return n._(this,s)[s].push({promiseFn:a,task:i}),n._(this,l)[l](),a}bump(e){let t=n._(this,s)[s].findIndex(t=>t.promiseFn===e);if(t>-1){let e=n._(this,s)[s].splice(t,1)[0];n._(this,s)[s].unshift(e),n._(this,l)[l](!0)}}constructor(e=5){Object.defineProperty(this,l,{value:u}),Object.defineProperty(this,i,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),n._(this,i)[i]=e,n._(this,o)[o]=0,n._(this,s)[s]=[]}}function u(e){if(void 0===e&&(e=!1),(n._(this,o)[o]<n._(this,i)[i]||e)&&n._(this,s)[s].length>0){var t;null==(t=n._(this,s)[s].shift())||t.task()}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},46265:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectBoundary:function(){return u},RedirectErrorBoundary:function(){return d}});let n=r(58374),a=r(10326),i=n._(r(17577)),o=r(77389),s=r(62747);function l(e){let{redirect:t,reset:r,redirectType:n}=e,a=(0,o.useRouter)();return(0,i.useEffect)(()=>{i.default.startTransition(()=>{n===s.RedirectType.push?a.push(t,{}):a.replace(t,{}),r()})},[t,n,r,a]),null}class d extends i.default.Component{static getDerivedStateFromError(e){if((0,s.isRedirectError)(e))return{redirect:(0,s.getURLFromRedirectError)(e),redirectType:(0,s.getRedirectTypeFromError)(e)};throw e}render(){let{redirect:e,redirectType:t}=this.state;return null!==e&&null!==t?(0,a.jsx)(l,{redirect:e,redirectType:t,reset:()=>this.setState({redirect:null})}):this.props.children}constructor(e){super(e),this.state={redirect:null,redirectType:null}}}function u(e){let{children:t}=e,r=(0,o.useRouter)();return(0,a.jsx)(d,{router:r,children:t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},28778:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62747:(e,t,r)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return h},isRedirectError:function(){return c},permanentRedirect:function(){return u},redirect:function(){return d}});let a=r(54580),i=r(72934),o=r(28778),s="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=o.RedirectStatusCode.TemporaryRedirect);let n=Error(s);n.digest=s+";"+t+";"+e+";"+r+";";let i=a.requestAsyncStorage.getStore();return i&&(n.mutableCookies=i.mutableCookies),n}function d(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.TemporaryRedirect)}function u(e,t){void 0===t&&(t="replace");let r=i.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.PermanentRedirect)}function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,a]=e.digest.split(";",4),i=Number(a);return t===s&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(i)&&i in o.RedirectStatusCode}function h(e){return c(e)?e.digest.split(";",3)[2]:null}function p(e){if(!c(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function f(e){if(!c(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},84759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=r(58374),a=r(10326),i=n._(r(17577)),o=r(52413);function s(){let e=(0,i.useContext)(o.TemplateContext);return(0,a.jsx)(a.Fragment,{children:e})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9894:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"applyFlightData",{enumerable:!0,get:function(){return i}});let n=r(114),a=r(19056);function i(e,t,r,i){let[o,s,l]=r.slice(-3);if(null===s)return!1;if(3===r.length){let r=s[2],a=s[3];t.loading=a,t.rsc=r,t.prefetchRsc=null,(0,n.fillLazyItemsTillLeafWithHead)(t,e,o,s,l,i)}else t.rsc=e.rsc,t.prefetchRsc=e.prefetchRsc,t.parallelRoutes=new Map(e.parallelRoutes),t.loading=e.loading,(0,a.fillCacheWithNewSubTreeData)(t,e,r,i);return!0}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},95166:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"applyRouterStatePatchToTree",{enumerable:!0,get:function(){return function e(t,r,n,s){let l;let[d,u,c,h,p]=r;if(1===t.length){let e=o(r,n,t);return(0,i.addRefreshMarkerToActiveParallelSegments)(e,s),e}let[f,y]=t;if(!(0,a.matchSegment)(f,d))return null;if(2===t.length)l=o(u[y],n,t);else if(null===(l=e(t.slice(2),u[y],n,s)))return null;let m=[t[0],{...u,[y]:l},c,h];return p&&(m[4]=!0),(0,i.addRefreshMarkerToActiveParallelSegments)(m,s),m}}});let n=r(68071),a=r(70455),i=r(84158);function o(e,t,r){let[i,s]=e,[l,d]=t;if(l===n.DEFAULT_SEGMENT_KEY&&i!==n.DEFAULT_SEGMENT_KEY)return e;if((0,a.matchSegment)(i,l)){let t={};for(let e in s)void 0!==d[e]?t[e]=o(s[e],d[e],r):t[e]=s[e];for(let e in d)t[e]||(t[e]=d[e]);let n=[i,t];return e[2]&&(n[2]=e[2]),e[3]&&(n[3]=e[3]),e[4]&&(n[4]=e[4]),n}return t}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},12895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clearCacheNodeDataForSegmentPath",{enumerable:!0,get:function(){return function e(t,r,a){let i=a.length<=2,[o,s]=a,l=(0,n.createRouterCacheKey)(s),d=r.parallelRoutes.get(o),u=t.parallelRoutes.get(o);u&&u!==d||(u=new Map(d),t.parallelRoutes.set(o,u));let c=null==d?void 0:d.get(l),h=u.get(l);if(i){h&&h.lazyData&&h!==c||u.set(l,{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null});return}if(!h||!c){h||u.set(l,{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null});return}return h===c&&(h={lazyData:h.lazyData,rsc:h.rsc,prefetchRsc:h.prefetchRsc,head:h.head,prefetchHead:h.prefetchHead,parallelRoutes:new Map(h.parallelRoutes),lazyDataResolved:h.lazyDataResolved,loading:h.loading},u.set(l,h)),e(h,c,a.slice(2))}}});let n=r(39886);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},47326:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{computeChangedPath:function(){return u},extractPathFromFlightRouterState:function(){return d}});let n=r(87356),a=r(68071),i=r(70455),o=e=>"/"===e[0]?e.slice(1):e,s=e=>"string"==typeof e?"children"===e?"":e:e[1];function l(e){return e.reduce((e,t)=>""===(t=o(t))||(0,a.isGroupSegment)(t)?e:e+"/"+t,"")||"/"}function d(e){var t;let r=Array.isArray(e[0])?e[0][1]:e[0];if(r===a.DEFAULT_SEGMENT_KEY||n.INTERCEPTION_ROUTE_MARKERS.some(e=>r.startsWith(e)))return;if(r.startsWith(a.PAGE_SEGMENT_KEY))return"";let i=[s(r)],o=null!=(t=e[1])?t:{},u=o.children?d(o.children):void 0;if(void 0!==u)i.push(u);else for(let[e,t]of Object.entries(o)){if("children"===e)continue;let r=d(t);void 0!==r&&i.push(r)}return l(i)}function u(e,t){let r=function e(t,r){let[a,o]=t,[l,u]=r,c=s(a),h=s(l);if(n.INTERCEPTION_ROUTE_MARKERS.some(e=>c.startsWith(e)||h.startsWith(e)))return"";if(!(0,i.matchSegment)(a,l)){var p;return null!=(p=d(r))?p:""}for(let t in o)if(u[t]){let r=e(o[t],u[t]);if(null!==r)return s(l)+"/"+r}return null}(e,t);return null==r||"/"===r?r:l(r.split("/"))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},17584:(e,t)=>{function r(e,t){return void 0===t&&(t=!0),e.pathname+e.search+(t?e.hash:"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createHrefFromUrl",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6199:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createInitialRouterState",{enumerable:!0,get:function(){return d}});let n=r(17584),a=r(114),i=r(47326),o=r(79373),s=r(57767),l=r(84158);function d(e){var t;let{buildId:r,initialTree:d,initialSeedData:u,urlParts:c,initialParallelRoutes:h,location:p,initialHead:f,couldBeIntercepted:y}=e,m=c.join("/"),g=!p,v={lazyData:null,rsc:u[2],prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:g?new Map:h,lazyDataResolved:!1,loading:u[3]},_=p?(0,n.createHrefFromUrl)(p):m;(0,l.addRefreshMarkerToActiveParallelSegments)(d,_);let b=new Map;(null===h||0===h.size)&&(0,a.fillLazyItemsTillLeafWithHead)(v,void 0,d,u,f);let w={buildId:r,tree:d,cache:v,prefetchCache:b,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:{apply:!1,onlyHashChange:!1,hashFragment:null,segmentPaths:[]},canonicalUrl:_,nextUrl:null!=(t=(0,i.extractPathFromFlightRouterState)(d)||(null==p?void 0:p.pathname))?t:null};if(p){let e=new URL(""+p.pathname+p.search,p.origin),t=[["",d,null,null]];(0,o.createPrefetchCacheEntryForInitialLoad)({url:e,kind:s.PrefetchKind.AUTO,data:[t,void 0,!1,y],tree:w.tree,prefetchCache:w.prefetchCache,nextUrl:w.nextUrl})}return w}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createRouterCacheKey",{enumerable:!0,get:function(){return a}});let n=r(68071);function a(e,t){return(void 0===t&&(t=!1),Array.isArray(e))?e[0]+"|"+e[1]+"|"+e[2]:t&&e.startsWith(n.PAGE_SEGMENT_KEY)?n.PAGE_SEGMENT_KEY:e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9009:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fetchServerResponse",{enumerable:!0,get:function(){return u}});let n=r(5138),a=r(12994),i=r(15424),o=r(57767),s=r(92165),{createFromFetch:l}=r(56493);function d(e){return[(0,a.urlToUrlWithoutFlightMarker)(e).toString(),void 0,!1,!1]}async function u(e,t,r,u,c){let h={[n.RSC_HEADER]:"1",[n.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify(t))};c===o.PrefetchKind.AUTO&&(h[n.NEXT_ROUTER_PREFETCH_HEADER]="1"),r&&(h[n.NEXT_URL]=r);let p=(0,s.hexHash)([h[n.NEXT_ROUTER_PREFETCH_HEADER]||"0",h[n.NEXT_ROUTER_STATE_TREE],h[n.NEXT_URL]].join(","));try{var f;let t=new URL(e);t.searchParams.set(n.NEXT_RSC_UNION_QUERY,p);let r=await fetch(t,{credentials:"same-origin",headers:h}),o=(0,a.urlToUrlWithoutFlightMarker)(r.url),s=r.redirected?o:void 0,c=r.headers.get("content-type")||"",y=!!r.headers.get(n.NEXT_DID_POSTPONE_HEADER),m=!!(null==(f=r.headers.get("vary"))?void 0:f.includes(n.NEXT_URL));if(c!==n.RSC_CONTENT_TYPE_HEADER||!r.ok)return e.hash&&(o.hash=e.hash),d(o.toString());let[g,v]=await l(Promise.resolve(r),{callServer:i.callServer});if(u!==g)return d(r.url);return[v,s,y,m]}catch(t){return console.error("Failed to fetch RSC payload for "+e+". Falling back to browser navigation.",t),[e.toString(),void 0,!1,!1]}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19056:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fillCacheWithNewSubTreeData",{enumerable:!0,get:function(){return function e(t,r,o,s){let l=o.length<=5,[d,u]=o,c=(0,i.createRouterCacheKey)(u),h=r.parallelRoutes.get(d);if(!h)return;let p=t.parallelRoutes.get(d);p&&p!==h||(p=new Map(h),t.parallelRoutes.set(d,p));let f=h.get(c),y=p.get(c);if(l){if(!y||!y.lazyData||y===f){let e=o[3];y={lazyData:null,rsc:e[2],prefetchRsc:null,head:null,prefetchHead:null,loading:e[3],parallelRoutes:f?new Map(f.parallelRoutes):new Map,lazyDataResolved:!1},f&&(0,n.invalidateCacheByRouterState)(y,f,o[2]),(0,a.fillLazyItemsTillLeafWithHead)(y,f,o[2],e,o[4],s),p.set(c,y)}return}y&&f&&(y===f&&(y={lazyData:y.lazyData,rsc:y.rsc,prefetchRsc:y.prefetchRsc,head:y.head,prefetchHead:y.prefetchHead,parallelRoutes:new Map(y.parallelRoutes),lazyDataResolved:!1,loading:y.loading},p.set(c,y)),e(y,f,o.slice(2),s))}}});let n=r(2498),a=r(114),i=r(39886);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},114:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fillLazyItemsTillLeafWithHead",{enumerable:!0,get:function(){return function e(t,r,i,o,s,l){if(0===Object.keys(i[1]).length){t.head=s;return}for(let d in i[1]){let u;let c=i[1][d],h=c[0],p=(0,n.createRouterCacheKey)(h),f=null!==o&&void 0!==o[1][d]?o[1][d]:null;if(r){let n=r.parallelRoutes.get(d);if(n){let r;let i=(null==l?void 0:l.kind)==="auto"&&l.status===a.PrefetchCacheEntryStatus.reusable,o=new Map(n),u=o.get(p);r=null!==f?{lazyData:null,rsc:f[2],prefetchRsc:null,head:null,prefetchHead:null,loading:f[3],parallelRoutes:new Map(null==u?void 0:u.parallelRoutes),lazyDataResolved:!1}:i&&u?{lazyData:u.lazyData,rsc:u.rsc,prefetchRsc:u.prefetchRsc,head:u.head,prefetchHead:u.prefetchHead,parallelRoutes:new Map(u.parallelRoutes),lazyDataResolved:u.lazyDataResolved,loading:u.loading}:{lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map(null==u?void 0:u.parallelRoutes),lazyDataResolved:!1,loading:null},o.set(p,r),e(r,u,c,f||null,s,l),t.parallelRoutes.set(d,o);continue}}if(null!==f){let e=f[2],t=f[3];u={lazyData:null,rsc:e,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:t}}else u={lazyData:null,rsc:null,prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:new Map,lazyDataResolved:!1,loading:null};let y=t.parallelRoutes.get(d);y?y.set(p,u):t.parallelRoutes.set(d,new Map([[p,u]])),e(u,void 0,c,f,s,l)}}}});let n=r(39886),a=r(57767);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},17252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleMutable",{enumerable:!0,get:function(){return i}});let n=r(47326);function a(e){return void 0!==e}function i(e,t){var r,i,o;let s=null==(i=t.shouldScroll)||i,l=e.nextUrl;if(a(t.patchedTree)){let r=(0,n.computeChangedPath)(e.tree,t.patchedTree);r?l=r:l||(l=e.canonicalUrl)}return{buildId:e.buildId,canonicalUrl:a(t.canonicalUrl)?t.canonicalUrl===e.canonicalUrl?e.canonicalUrl:t.canonicalUrl:e.canonicalUrl,pushRef:{pendingPush:a(t.pendingPush)?t.pendingPush:e.pushRef.pendingPush,mpaNavigation:a(t.mpaNavigation)?t.mpaNavigation:e.pushRef.mpaNavigation,preserveCustomHistoryState:a(t.preserveCustomHistoryState)?t.preserveCustomHistoryState:e.pushRef.preserveCustomHistoryState},focusAndScrollRef:{apply:!!s&&(!!a(null==t?void 0:t.scrollableSegments)||e.focusAndScrollRef.apply),onlyHashChange:!!t.hashFragment&&e.canonicalUrl.split("#",1)[0]===(null==(r=t.canonicalUrl)?void 0:r.split("#",1)[0]),hashFragment:s?t.hashFragment&&""!==t.hashFragment?decodeURIComponent(t.hashFragment.slice(1)):e.focusAndScrollRef.hashFragment:null,segmentPaths:s?null!=(o=null==t?void 0:t.scrollableSegments)?o:e.focusAndScrollRef.segmentPaths:[]},cache:t.cache?t.cache:e.cache,prefetchCache:t.prefetchCache?t.prefetchCache:e.prefetchCache,tree:a(t.patchedTree)?t.patchedTree:e.tree,nextUrl:l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},65652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleSegmentMismatch",{enumerable:!0,get:function(){return a}});let n=r(20941);function a(e,t,r){return(0,n.handleExternalUrl)(e,{},e.canonicalUrl,!0)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},43193:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"invalidateCacheBelowFlightSegmentPath",{enumerable:!0,get:function(){return function e(t,r,a){let i=a.length<=2,[o,s]=a,l=(0,n.createRouterCacheKey)(s),d=r.parallelRoutes.get(o);if(!d)return;let u=t.parallelRoutes.get(o);if(u&&u!==d||(u=new Map(d),t.parallelRoutes.set(o,u)),i){u.delete(l);return}let c=d.get(l),h=u.get(l);h&&c&&(h===c&&(h={lazyData:h.lazyData,rsc:h.rsc,prefetchRsc:h.prefetchRsc,head:h.head,prefetchHead:h.prefetchHead,parallelRoutes:new Map(h.parallelRoutes),lazyDataResolved:h.lazyDataResolved},u.set(l,h)),e(h,c,a.slice(2)))}}});let n=r(39886);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2498:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"invalidateCacheByRouterState",{enumerable:!0,get:function(){return a}});let n=r(39886);function a(e,t,r){for(let a in r[1]){let i=r[1][a][0],o=(0,n.createRouterCacheKey)(i),s=t.parallelRoutes.get(a);if(s){let t=new Map(s);t.delete(o),e.parallelRoutes.set(a,t)}}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23772:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNavigatingToNewRootLayout",{enumerable:!0,get:function(){return function e(t,r){let n=t[0],a=r[0];if(Array.isArray(n)&&Array.isArray(a)){if(n[0]!==a[0]||n[2]!==a[2])return!0}else if(n!==a)return!0;if(t[4])return!r[4];if(r[4])return!0;let i=Object.values(t[1])[0],o=Object.values(r[1])[0];return!i||!o||e(i,o)}}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},68831:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{abortTask:function(){return d},listenForDynamicRequest:function(){return s},updateCacheNodeOnNavigation:function(){return function e(t,r,s,d,u){let c=r[1],h=s[1],p=d[1],f=t.parallelRoutes,y=new Map(f),m={},g=null;for(let t in h){let r;let s=h[t],d=c[t],v=f.get(t),_=p[t],b=s[0],w=(0,i.createRouterCacheKey)(b),S=void 0!==d?d[0]:void 0,E=void 0!==v?v.get(w):void 0;if(null!==(r=b===n.PAGE_SEGMENT_KEY?o(s,void 0!==_?_:null,u):b===n.DEFAULT_SEGMENT_KEY?void 0!==d?{route:d,node:null,children:null}:o(s,void 0!==_?_:null,u):void 0!==S&&(0,a.matchSegment)(b,S)&&void 0!==E&&void 0!==d?null!=_?e(E,d,s,_,u):function(e){let t=l(e,null,null);return{route:e,node:t,children:null}}(s):o(s,void 0!==_?_:null,u))){null===g&&(g=new Map),g.set(t,r);let e=r.node;if(null!==e){let r=new Map(v);r.set(w,e),y.set(t,r)}m[t]=r.route}else m[t]=s}if(null===g)return null;let v={lazyData:null,rsc:t.rsc,prefetchRsc:t.prefetchRsc,head:t.head,prefetchHead:t.prefetchHead,loading:t.loading,parallelRoutes:y,lazyDataResolved:!1};return{route:function(e,t){let r=[e[0],t];return 2 in e&&(r[2]=e[2]),3 in e&&(r[3]=e[3]),4 in e&&(r[4]=e[4]),r}(s,m),node:v,children:g}}},updateCacheNodeOnPopstateRestoration:function(){return function e(t,r){let n=r[1],a=t.parallelRoutes,o=new Map(a);for(let t in n){let r=n[t],s=r[0],l=(0,i.createRouterCacheKey)(s),d=a.get(t);if(void 0!==d){let n=d.get(l);if(void 0!==n){let a=e(n,r),i=new Map(d);i.set(l,a),o.set(t,i)}}}let s=t.rsc,l=h(s)&&"pending"===s.status;return{lazyData:null,rsc:s,head:t.head,prefetchHead:l?t.prefetchHead:null,prefetchRsc:l?t.prefetchRsc:null,loading:l?t.loading:null,parallelRoutes:o,lazyDataResolved:!1}}}});let n=r(68071),a=r(70455),i=r(39886);function o(e,t,r){let n=l(e,t,r);return{route:e,node:n,children:null}}function s(e,t){t.then(t=>{for(let r of t[0]){let t=r.slice(0,-3),n=r[r.length-3],o=r[r.length-2],s=r[r.length-1];"string"!=typeof t&&function(e,t,r,n,o){let s=e;for(let e=0;e<t.length;e+=2){let r=t[e],n=t[e+1],i=s.children;if(null!==i){let e=i.get(r);if(void 0!==e){let t=e.route[0];if((0,a.matchSegment)(n,t)){s=e;continue}}}return}(function e(t,r,n,o){let s=t.children,l=t.node;if(null===s){null!==l&&(function e(t,r,n,o,s){let l=r[1],d=n[1],c=o[1],p=t.parallelRoutes;for(let t in l){let r=l[t],n=d[t],o=c[t],h=p.get(t),f=r[0],y=(0,i.createRouterCacheKey)(f),m=void 0!==h?h.get(y):void 0;void 0!==m&&(void 0!==n&&(0,a.matchSegment)(f,n[0])&&null!=o?e(m,r,n,o,s):u(r,m,null))}let f=t.rsc,y=o[2];null===f?t.rsc=y:h(f)&&f.resolve(y);let m=t.head;h(m)&&m.resolve(s)}(l,t.route,r,n,o),t.node=null);return}let d=r[1],c=n[1];for(let t in r){let r=d[t],n=c[t],i=s.get(t);if(void 0!==i){let t=i.route[0];if((0,a.matchSegment)(r[0],t)&&null!=n)return e(i,r,n,o)}}})(s,r,n,o)}(e,t,n,o,s)}d(e,null)},t=>{d(e,t)})}function l(e,t,r){let n=e[1],a=null!==t?t[1]:null,o=new Map;for(let e in n){let t=n[e],s=null!==a?a[e]:null,d=t[0],u=(0,i.createRouterCacheKey)(d),c=l(t,void 0===s?null:s,r),h=new Map;h.set(u,c),o.set(e,h)}let s=0===o.size,d=null!==t?t[2]:null,u=null!==t?t[3]:null;return{lazyData:null,parallelRoutes:o,prefetchRsc:void 0!==d?d:null,prefetchHead:s?r:null,loading:void 0!==u?u:null,rsc:p(),head:s?p():null,lazyDataResolved:!1}}function d(e,t){let r=e.node;if(null===r)return;let n=e.children;if(null===n)u(e.route,r,t);else for(let e of n.values())d(e,t);e.node=null}function u(e,t,r){let n=e[1],a=t.parallelRoutes;for(let e in n){let t=n[e],o=a.get(e);if(void 0===o)continue;let s=t[0],l=(0,i.createRouterCacheKey)(s),d=o.get(l);void 0!==d&&u(t,d,r)}let o=t.rsc;h(o)&&(null===r?o.resolve(null):o.reject(r));let s=t.head;h(s)&&s.resolve(null)}let c=Symbol();function h(e){return e&&e.tag===c}function p(){let e,t;let r=new Promise((r,n)=>{e=r,t=n});return r.status="pending",r.resolve=t=>{"pending"===r.status&&(r.status="fulfilled",r.value=t,e(t))},r.reject=e=>{"pending"===r.status&&(r.status="rejected",r.reason=e,t(e))},r.tag=c,r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},79373:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createPrefetchCacheEntryForInitialLoad:function(){return d},getOrCreatePrefetchCacheEntry:function(){return l},prunePrefetchCache:function(){return c}});let n=r(17584),a=r(9009),i=r(57767),o=r(61156);function s(e,t){let r=(0,n.createHrefFromUrl)(e,!1);return t?t+"%"+r:r}function l(e){let t,{url:r,nextUrl:n,tree:a,buildId:o,prefetchCache:l,kind:d}=e,c=s(r,n),h=l.get(c);if(h)t=h;else{let e=s(r),n=l.get(e);n&&(t=n)}return t?(t.status=f(t),t.kind!==i.PrefetchKind.FULL&&d===i.PrefetchKind.FULL)?u({tree:a,url:r,buildId:o,nextUrl:n,prefetchCache:l,kind:null!=d?d:i.PrefetchKind.TEMPORARY}):(d&&t.kind===i.PrefetchKind.TEMPORARY&&(t.kind=d),t):u({tree:a,url:r,buildId:o,nextUrl:n,prefetchCache:l,kind:d||i.PrefetchKind.TEMPORARY})}function d(e){let{nextUrl:t,tree:r,prefetchCache:n,url:a,kind:o,data:l}=e,[,,,d]=l,u=d?s(a,t):s(a),c={treeAtTimeOfPrefetch:r,data:Promise.resolve(l),kind:o,prefetchTime:Date.now(),lastUsedTime:Date.now(),key:u,status:i.PrefetchCacheEntryStatus.fresh};return n.set(u,c),c}function u(e){let{url:t,kind:r,tree:n,nextUrl:l,buildId:d,prefetchCache:u}=e,c=s(t),h=o.prefetchQueue.enqueue(()=>(0,a.fetchServerResponse)(t,n,l,d,r).then(e=>{let[,,,r]=e;return r&&function(e){let{url:t,nextUrl:r,prefetchCache:n}=e,a=s(t),i=n.get(a);if(!i)return;let o=s(t,r);n.set(o,i),n.delete(a)}({url:t,nextUrl:l,prefetchCache:u}),e})),p={treeAtTimeOfPrefetch:n,data:h,kind:r,prefetchTime:Date.now(),lastUsedTime:null,key:c,status:i.PrefetchCacheEntryStatus.fresh};return u.set(c,p),p}function c(e){for(let[t,r]of e)f(r)===i.PrefetchCacheEntryStatus.expired&&e.delete(t)}let h=1e3*Number("30"),p=1e3*Number("300");function f(e){let{kind:t,prefetchTime:r,lastUsedTime:n}=e;return Date.now()<(null!=n?n:r)+h?n?i.PrefetchCacheEntryStatus.reusable:i.PrefetchCacheEntryStatus.fresh:"auto"===t&&Date.now()<r+p?i.PrefetchCacheEntryStatus.stale:"full"===t&&Date.now()<r+p?i.PrefetchCacheEntryStatus.reusable:i.PrefetchCacheEntryStatus.expired}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},95703:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fastRefreshReducer",{enumerable:!0,get:function(){return n}}),r(9009),r(17584),r(95166),r(23772),r(20941),r(17252),r(9894),r(12994),r(65652),r(45262);let n=function(e,t){return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},22492:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"findHeadInCache",{enumerable:!0,get:function(){return a}});let n=r(39886);function a(e,t){return function e(t,r,a){if(0===Object.keys(r).length)return[t,a];for(let i in r){let[o,s]=r[i],l=t.parallelRoutes.get(i);if(!l)continue;let d=(0,n.createRouterCacheKey)(o),u=l.get(d);if(!u)continue;let c=e(u,s,a+"/"+d);if(c)return c}return null}(e,t,"")}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62162:(e,t)=>{function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},45262:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasInterceptionRouteInCurrentTree",{enumerable:!0,get:function(){return function e(t){let[r,a]=t;if(Array.isArray(r)&&("di"===r[2]||"ci"===r[2])||"string"==typeof r&&(0,n.isInterceptionRouteAppPath)(r))return!0;if(a){for(let t in a)if(e(a[t]))return!0}return!1}}});let n=r(87356);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},20941:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{handleExternalUrl:function(){return m},navigateReducer:function(){return v}}),r(9009);let n=r(17584),a=r(43193),i=r(95166),o=r(54614),s=r(23772),l=r(57767),d=r(17252),u=r(9894),c=r(61156),h=r(12994),p=r(68071),f=(r(68831),r(79373)),y=r(12895);function m(e,t,r,n){return t.mpaNavigation=!0,t.canonicalUrl=r,t.pendingPush=n,t.scrollableSegments=void 0,(0,d.handleMutable)(e,t)}function g(e){let t=[],[r,n]=e;if(0===Object.keys(n).length)return[[r]];for(let[e,a]of Object.entries(n))for(let n of g(a))""===r?t.push([e,...n]):t.push([r,e,...n]);return t}let v=function(e,t){let{url:r,isExternalUrl:v,navigateType:_,shouldScroll:b}=t,w={},{hash:S}=r,E=(0,n.createHrefFromUrl)(r),P="push"===_;if((0,f.prunePrefetchCache)(e.prefetchCache),w.preserveCustomHistoryState=!1,v)return m(e,w,r.toString(),P);let O=(0,f.getOrCreatePrefetchCacheEntry)({url:r,nextUrl:e.nextUrl,tree:e.tree,buildId:e.buildId,prefetchCache:e.prefetchCache}),{treeAtTimeOfPrefetch:j,data:R}=O;return c.prefetchQueue.bump(R),R.then(t=>{let[r,c]=t,f=!1;if(O.lastUsedTime||(O.lastUsedTime=Date.now(),f=!0),"string"==typeof r)return m(e,w,r,P);if(document.getElementById("__next-page-redirect"))return m(e,w,E,P);let v=e.tree,_=e.cache,R=[];for(let t of r){let r=t.slice(0,-4),n=t.slice(-3)[0],d=["",...r],c=(0,i.applyRouterStatePatchToTree)(d,v,n,E);if(null===c&&(c=(0,i.applyRouterStatePatchToTree)(d,j,n,E)),null!==c){if((0,s.isNavigatingToNewRootLayout)(v,c))return m(e,w,E,P);let i=(0,h.createEmptyCacheNode)(),b=!1;for(let e of(O.status!==l.PrefetchCacheEntryStatus.stale||f?b=(0,u.applyFlightData)(_,i,t,O):(b=function(e,t,r,n){let a=!1;for(let i of(e.rsc=t.rsc,e.prefetchRsc=t.prefetchRsc,e.loading=t.loading,e.parallelRoutes=new Map(t.parallelRoutes),g(n).map(e=>[...r,...e])))(0,y.clearCacheNodeDataForSegmentPath)(e,t,i),a=!0;return a}(i,_,r,n),O.lastUsedTime=Date.now()),(0,o.shouldHardNavigate)(d,v)?(i.rsc=_.rsc,i.prefetchRsc=_.prefetchRsc,(0,a.invalidateCacheBelowFlightSegmentPath)(i,_,r),w.cache=i):b&&(w.cache=i,_=i),v=c,g(n))){let t=[...r,...e];t[t.length-1]!==p.DEFAULT_SEGMENT_KEY&&R.push(t)}}}return w.patchedTree=v,w.canonicalUrl=c?(0,n.createHrefFromUrl)(c):E,w.pendingPush=P,w.scrollableSegments=R,w.hashFragment=S,w.shouldScroll=b,(0,d.handleMutable)(e,w)},()=>e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},61156:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{prefetchQueue:function(){return o},prefetchReducer:function(){return s}});let n=r(5138),a=r(77815),i=r(79373),o=new a.PromiseQueue(5);function s(e,t){(0,i.prunePrefetchCache)(e.prefetchCache);let{url:r}=t;return r.searchParams.delete(n.NEXT_RSC_UNION_QUERY),(0,i.getOrCreatePrefetchCacheEntry)({url:r,nextUrl:e.nextUrl,prefetchCache:e.prefetchCache,kind:t.kind,tree:e.tree,buildId:e.buildId}),e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},69809:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"refreshReducer",{enumerable:!0,get:function(){return f}});let n=r(9009),a=r(17584),i=r(95166),o=r(23772),s=r(20941),l=r(17252),d=r(114),u=r(12994),c=r(65652),h=r(45262),p=r(84158);function f(e,t){let{origin:r}=t,f={},y=e.canonicalUrl,m=e.tree;f.preserveCustomHistoryState=!1;let g=(0,u.createEmptyCacheNode)(),v=(0,h.hasInterceptionRouteInCurrentTree)(e.tree);return g.lazyData=(0,n.fetchServerResponse)(new URL(y,r),[m[0],m[1],m[2],"refetch"],v?e.nextUrl:null,e.buildId),g.lazyData.then(async r=>{let[n,u]=r;if("string"==typeof n)return(0,s.handleExternalUrl)(e,f,n,e.pushRef.pendingPush);for(let r of(g.lazyData=null,n)){if(3!==r.length)return console.log("REFRESH FAILED"),e;let[n]=r,l=(0,i.applyRouterStatePatchToTree)([""],m,n,e.canonicalUrl);if(null===l)return(0,c.handleSegmentMismatch)(e,t,n);if((0,o.isNavigatingToNewRootLayout)(m,l))return(0,s.handleExternalUrl)(e,f,y,e.pushRef.pendingPush);let h=u?(0,a.createHrefFromUrl)(u):void 0;u&&(f.canonicalUrl=h);let[_,b]=r.slice(-2);if(null!==_){let e=_[2];g.rsc=e,g.prefetchRsc=null,(0,d.fillLazyItemsTillLeafWithHead)(g,void 0,n,_,b),f.prefetchCache=new Map}await (0,p.refreshInactiveParallelSegments)({state:e,updatedTree:l,updatedCache:g,includeNextUrl:v,canonicalUrl:f.canonicalUrl||e.canonicalUrl}),f.cache=g,f.patchedTree=l,f.canonicalUrl=y,m=l}return(0,l.handleMutable)(e,f)},()=>e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},85608:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"restoreReducer",{enumerable:!0,get:function(){return i}});let n=r(17584),a=r(47326);function i(e,t){var r;let{url:i,tree:o}=t,s=(0,n.createHrefFromUrl)(i),l=o||e.tree,d=e.cache;return{buildId:e.buildId,canonicalUrl:s,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:e.focusAndScrollRef,cache:d,prefetchCache:e.prefetchCache,tree:l,nextUrl:null!=(r=(0,a.extractPathFromFlightRouterState)(l))?r:i.pathname}}r(68831),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},25240:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"serverActionReducer",{enumerable:!0,get:function(){return _}});let n=r(15424),a=r(5138),i=r(3486),o=r(17584),s=r(20941),l=r(95166),d=r(23772),u=r(17252),c=r(114),h=r(12994),p=r(45262),f=r(65652),y=r(84158),{createFromFetch:m,encodeReply:g}=r(56493);async function v(e,t,r){let o,{actionId:s,actionArgs:l}=r,d=await g(l),u=await fetch("",{method:"POST",headers:{Accept:a.RSC_CONTENT_TYPE_HEADER,[a.ACTION]:s,[a.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify(e.tree)),...t?{[a.NEXT_URL]:t}:{}},body:d}),c=u.headers.get("x-action-redirect");try{let e=JSON.parse(u.headers.get("x-action-revalidated")||"[[],0,0]");o={paths:e[0]||[],tag:!!e[1],cookie:e[2]}}catch(e){o={paths:[],tag:!1,cookie:!1}}let h=c?new URL((0,i.addBasePath)(c),new URL(e.canonicalUrl,window.location.href)):void 0;if(u.headers.get("content-type")===a.RSC_CONTENT_TYPE_HEADER){let e=await m(Promise.resolve(u),{callServer:n.callServer});if(c){let[,t]=null!=e?e:[];return{actionFlightData:t,redirectLocation:h,revalidatedParts:o}}let[t,[,r]]=null!=e?e:[];return{actionResult:t,actionFlightData:r,redirectLocation:h,revalidatedParts:o}}return{redirectLocation:h,revalidatedParts:o}}function _(e,t){let{resolve:r,reject:n}=t,a={},i=e.canonicalUrl,m=e.tree;a.preserveCustomHistoryState=!1;let g=e.nextUrl&&(0,p.hasInterceptionRouteInCurrentTree)(e.tree)?e.nextUrl:null;return a.inFlightServerAction=v(e,g,t),a.inFlightServerAction.then(async n=>{let{actionResult:p,actionFlightData:v,redirectLocation:_}=n;if(_&&(e.pushRef.pendingPush=!0,a.pendingPush=!0),!v)return(r(p),_)?(0,s.handleExternalUrl)(e,a,_.href,e.pushRef.pendingPush):e;if("string"==typeof v)return(0,s.handleExternalUrl)(e,a,v,e.pushRef.pendingPush);if(a.inFlightServerAction=null,_){let e=(0,o.createHrefFromUrl)(_,!1);a.canonicalUrl=e}for(let r of v){if(3!==r.length)return console.log("SERVER ACTION APPLY FAILED"),e;let[n]=r,u=(0,l.applyRouterStatePatchToTree)([""],m,n,_?(0,o.createHrefFromUrl)(_):e.canonicalUrl);if(null===u)return(0,f.handleSegmentMismatch)(e,t,n);if((0,d.isNavigatingToNewRootLayout)(m,u))return(0,s.handleExternalUrl)(e,a,i,e.pushRef.pendingPush);let[p,v]=r.slice(-2),b=null!==p?p[2]:null;if(null!==b){let t=(0,h.createEmptyCacheNode)();t.rsc=b,t.prefetchRsc=null,(0,c.fillLazyItemsTillLeafWithHead)(t,void 0,n,p,v),await (0,y.refreshInactiveParallelSegments)({state:e,updatedTree:u,updatedCache:t,includeNextUrl:!!g,canonicalUrl:a.canonicalUrl||e.canonicalUrl}),a.cache=t,a.prefetchCache=new Map}a.patchedTree=u,m=u}return r(p),(0,u.handleMutable)(e,a)},t=>(n(t),e))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14025:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"serverPatchReducer",{enumerable:!0,get:function(){return c}});let n=r(17584),a=r(95166),i=r(23772),o=r(20941),s=r(9894),l=r(17252),d=r(12994),u=r(65652);function c(e,t){let{serverResponse:r}=t,[c,h]=r,p={};if(p.preserveCustomHistoryState=!1,"string"==typeof c)return(0,o.handleExternalUrl)(e,p,c,e.pushRef.pendingPush);let f=e.tree,y=e.cache;for(let r of c){let l=r.slice(0,-4),[c]=r.slice(-3,-2),m=(0,a.applyRouterStatePatchToTree)(["",...l],f,c,e.canonicalUrl);if(null===m)return(0,u.handleSegmentMismatch)(e,t,c);if((0,i.isNavigatingToNewRootLayout)(f,m))return(0,o.handleExternalUrl)(e,p,e.canonicalUrl,e.pushRef.pendingPush);let g=h?(0,n.createHrefFromUrl)(h):void 0;g&&(p.canonicalUrl=g);let v=(0,d.createEmptyCacheNode)();(0,s.applyFlightData)(y,v,r),p.patchedTree=m,p.cache=v,y=v,f=m}return(0,l.handleMutable)(e,p)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},84158:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{addRefreshMarkerToActiveParallelSegments:function(){return function e(t,r){let[n,a,,o]=t;for(let s in n.includes(i.PAGE_SEGMENT_KEY)&&"refresh"!==o&&(t[2]=r,t[3]="refresh"),a)e(a[s],r)}},refreshInactiveParallelSegments:function(){return o}});let n=r(9894),a=r(9009),i=r(68071);async function o(e){let t=new Set;await s({...e,rootTree:e.updatedTree,fetchedSegments:t})}async function s(e){let{state:t,updatedTree:r,updatedCache:i,includeNextUrl:o,fetchedSegments:l,rootTree:d=r,canonicalUrl:u}=e,[,c,h,p]=r,f=[];if(h&&h!==u&&"refresh"===p&&!l.has(h)){l.add(h);let e=(0,a.fetchServerResponse)(new URL(h,location.origin),[d[0],d[1],d[2],"refetch"],o?t.nextUrl:null,t.buildId).then(e=>{let t=e[0];if("string"!=typeof t)for(let e of t)(0,n.applyFlightData)(i,i,e)});f.push(e)}for(let e in c){let r=s({state:t,updatedTree:c[e],updatedCache:i,includeNextUrl:o,fetchedSegments:l,rootTree:d,canonicalUrl:u});f.push(r)}await Promise.all(f)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},57767:(e,t)=>{var r,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION_FAST_REFRESH:function(){return d},ACTION_NAVIGATE:function(){return i},ACTION_PREFETCH:function(){return l},ACTION_REFRESH:function(){return a},ACTION_RESTORE:function(){return o},ACTION_SERVER_ACTION:function(){return u},ACTION_SERVER_PATCH:function(){return s},PrefetchCacheEntryStatus:function(){return n},PrefetchKind:function(){return r},isThenable:function(){return c}});let a="refresh",i="navigate",o="restore",s="server-patch",l="prefetch",d="fast-refresh",u="server-action";function c(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(function(e){e.AUTO="auto",e.FULL="full",e.TEMPORARY="temporary"})(r||(r={})),function(e){e.fresh="fresh",e.reusable="reusable",e.expired="expired",e.stale="stale"}(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83860:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return n}}),r(57767),r(20941),r(14025),r(85608),r(69809),r(61156),r(95703),r(25240);let n=function(e,t){return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},54614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"shouldHardNavigate",{enumerable:!0,get:function(){return function e(t,r){let[a,i]=r,[o,s]=t;return(0,n.matchSegment)(o,a)?!(t.length<=2)&&e(t.slice(2),i[s]):!!Array.isArray(o)}}});let n=r(70455);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createDynamicallyTrackedSearchParams:function(){return s},createUntrackedSearchParams:function(){return o}});let n=r(45869),a=r(52846),i=r(22255);function o(e){let t=n.staticGenerationAsyncStorage.getStore();return t&&t.forceStatic?{}:e}function s(e){let t=n.staticGenerationAsyncStorage.getStore();return t?t.forceStatic?{}:t.isStaticGeneration||t.dynamicShouldError?new Proxy({},{get:(e,r,n)=>("string"==typeof r&&(0,a.trackDynamicDataAccessed)(t,"searchParams."+r),i.ReflectAdapter.get(e,r,n)),has:(e,r)=>("string"==typeof r&&(0,a.trackDynamicDataAccessed)(t,"searchParams."+r),Reflect.has(e,r)),ownKeys:e=>((0,a.trackDynamicDataAccessed)(t,"searchParams"),Reflect.ownKeys(e))}):e:e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},86488:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{StaticGenBailoutError:function(){return n},isStaticGenBailoutError:function(){return a}});let r="NEXT_STATIC_GEN_BAILOUT";class n extends Error{constructor(...e){super(...e),this.code=r}}function a(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39519:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unresolvedThenable",{enumerable:!0,get:function(){return r}});let r={then:()=>{}};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},77326:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{useReducerWithReduxDevtools:function(){return s},useUnwrapState:function(){return o}});let n=r(58374)._(r(17577)),a=r(57767);function i(e){if(e instanceof Map){let t={};for(let[r,n]of e.entries()){if("function"==typeof n){t[r]="fn()";continue}if("object"==typeof n&&null!==n){if(n.$$typeof){t[r]=n.$$typeof.toString();continue}if(n._bundlerConfig){t[r]="FlightData";continue}}t[r]=i(n)}return t}if("object"==typeof e&&null!==e){let t={};for(let r in e){let n=e[r];if("function"==typeof n){t[r]="fn()";continue}if("object"==typeof n&&null!==n){if(n.$$typeof){t[r]=n.$$typeof.toString();continue}if(n.hasOwnProperty("_bundlerConfig")){t[r]="FlightData";continue}}t[r]=i(n)}return t}return Array.isArray(e)?e.map(i):e}function o(e){return(0,a.isThenable)(e)?(0,n.use)(e):e}r(33879);let s=function(e){return[e,()=>{},()=>{}]};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39683:(e,t,r)=>{function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(23658),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasBasePath",{enumerable:!0,get:function(){return a}});let n=r(34655);function a(e){return(0,n.pathHasPrefix)(e,"")}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},92481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return _}});let n=r(91174),a=r(58374),i=r(10326),o=a._(r(17577)),s=n._(r(60962)),l=n._(r(60815)),d=r(23078),u=r(35248),c=r(31206);r(576);let h=r(50131),p=n._(r(86820)),f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function y(e,t,r,n,a,i,o){let s=null==e?void 0:e.src;e&&e["data-loaded-src"]!==s&&(e["data-loaded-src"]=s,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,a=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function m(e){return o.use?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let g=(0,o.forwardRef)((e,t)=>{let{src:r,srcSet:n,sizes:a,height:s,width:l,decoding:d,className:u,style:c,fetchPriority:h,placeholder:p,loading:f,unoptimized:g,fill:v,onLoadRef:_,onLoadingCompleteRef:b,setBlurComplete:w,setShowAltText:S,sizesInput:E,onLoad:P,onError:O,...j}=e;return(0,i.jsx)("img",{...j,...m(h),loading:f,width:l,height:s,decoding:d,"data-nimg":v?"fill":"1",className:u,style:c,sizes:a,srcSet:n,src:r,ref:(0,o.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(O&&(e.src=e.src),e.complete&&y(e,p,_,b,w,g,E))},[r,p,_,b,w,O,g,E,t]),onLoad:e=>{y(e.currentTarget,p,_,b,w,g,E)},onError:e=>{S(!0),"empty"!==p&&w(!0),O&&O(e)}})});function v(e){let{isAppRouter:t,imgAttributes:r}=e,n={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...m(r.fetchPriority)};return t&&s.default.preload?(s.default.preload(r.src,n),null):(0,i.jsx)(l.default,{children:(0,i.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...n},"__nimg-"+r.src+r.srcSet+r.sizes)})}let _=(0,o.forwardRef)((e,t)=>{let r=(0,o.useContext)(h.RouterContext),n=(0,o.useContext)(c.ImageConfigContext),a=(0,o.useMemo)(()=>{var e;let t=f||n||u.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),a=t.deviceSizes.sort((e,t)=>e-t),i=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:a,qualities:i}},[n]),{onLoad:s,onLoadingComplete:l}=e,y=(0,o.useRef)(s);(0,o.useEffect)(()=>{y.current=s},[s]);let m=(0,o.useRef)(l);(0,o.useEffect)(()=>{m.current=l},[l]);let[_,b]=(0,o.useState)(!1),[w,S]=(0,o.useState)(!1),{props:E,meta:P}=(0,d.getImgProps)(e,{defaultLoader:p.default,imgConf:a,blurComplete:_,showAltText:w});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g,{...E,unoptimized:P.unoptimized,placeholder:P.placeholder,fill:P.fill,onLoadRef:y,onLoadingCompleteRef:m,setBlurComplete:b,setShowAltText:S,sizesInput:e.sizes,ref:t}),P.priority?(0,i.jsx)(v,{isAppRouter:!r,imgAttributes:E}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},79404:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return v}});let n=r(91174),a=r(10326),i=n._(r(17577)),o=r(25619),s=r(60944),l=r(43071),d=r(51348),u=r(53416),c=r(50131),h=r(52413),p=r(49408),f=r(39683),y=r(3486),m=r(57767);function g(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}let v=i.default.forwardRef(function(e,t){let r,n;let{href:l,as:v,children:_,prefetch:b=null,passHref:w,replace:S,shallow:E,scroll:P,locale:O,onClick:j,onMouseEnter:R,onTouchStart:T,legacyBehavior:I=!1,...k}=e;r=_,I&&("string"==typeof r||"number"==typeof r)&&(r=(0,a.jsx)("a",{children:r}));let A=i.default.useContext(c.RouterContext),C=i.default.useContext(h.AppRouterContext),x=null!=A?A:C,M=!A,D=!1!==b,z=null===b?m.PrefetchKind.AUTO:m.PrefetchKind.FULL,{href:W,as:U}=i.default.useMemo(()=>{if(!A){let e=g(l);return{href:e,as:v?g(v):e}}let[e,t]=(0,o.resolveHref)(A,l,!0);return{href:e,as:v?(0,o.resolveHref)(A,v):t||e}},[A,l,v]),N=i.default.useRef(W),J=i.default.useRef(U);I&&(n=i.default.Children.only(r));let L=I?n&&"object"==typeof n&&n.ref:t,[K,H,F]=(0,p.useIntersection)({rootMargin:"200px"}),Z=i.default.useCallback(e=>{(J.current!==U||N.current!==W)&&(F(),J.current=U,N.current=W),K(e),L&&("function"==typeof L?L(e):"object"==typeof L&&(L.current=e))},[U,L,W,F,K]);i.default.useEffect(()=>{},[U,W,H,O,D,null==A?void 0:A.locale,x,M,z]);let $={ref:Z,onClick(e){I||"function"!=typeof j||j(e),I&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),x&&!e.defaultPrevented&&function(e,t,r,n,a,o,l,d,u){let{nodeName:c}=e.currentTarget;if("A"===c.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!u&&!(0,s.isLocalURL)(r)))return;e.preventDefault();let h=()=>{let e=null==l||l;"beforePopState"in t?t[a?"replace":"push"](r,n,{shallow:o,locale:d,scroll:e}):t[a?"replace":"push"](n||r,{scroll:e})};u?i.default.startTransition(h):h()}(e,x,W,U,S,E,P,O,M)},onMouseEnter(e){I||"function"!=typeof R||R(e),I&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e)},onTouchStart:function(e){I||"function"!=typeof T||T(e),I&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e)}};if((0,d.isAbsoluteUrl)(U))$.href=U;else if(!I||w||"a"===n.type&&!("href"in n.props)){let e=void 0!==O?O:null==A?void 0:A.locale,t=(null==A?void 0:A.isLocaleDomain)&&(0,f.getDomainLocale)(U,e,null==A?void 0:A.locales,null==A?void 0:A.domainLocales);$.href=t||(0,y.addBasePath)((0,u.addLocale)(U,e,null==A?void 0:A.defaultLocale))}return I?i.default.cloneElement(n,$):(0,a.jsx)("a",{...k,...$,children:r})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23658:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return i}});let n=r(83236),a=r(93067),i=e=>{if(!e.startsWith("/"))return e;let{pathname:t,query:r,hash:i}=(0,a.parsePath)(e);return""+(0,n.removeTrailingSlash)(t)+r+i};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},74237:(e,t,r)=>{function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeBasePath",{enumerable:!0,get:function(){return n}}),r(37929),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cancelIdleCallback:function(){return n},requestIdleCallback:function(){return r}});let r="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},n="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},25619:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return c}});let n=r(72149),a=r(43071),i=r(20757),o=r(51348),s=r(23658),l=r(60944),d=r(94903),u=r(81394);function c(e,t,r){let c;let h="string"==typeof t?t:(0,a.formatWithValidation)(t),p=h.match(/^[a-zA-Z]{1,}:\/\//),f=p?h.slice(p[0].length):h;if((f.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+h+"' passed to next/router in page: '"+e.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let t=(0,o.normalizeRepeatedSlashes)(f);h=(p?p[0]:"")+t}if(!(0,l.isLocalURL)(h))return r?[h]:h;try{c=new URL(h.startsWith("#")?e.asPath:e.pathname,"http://n")}catch(e){c=new URL("/","http://n")}try{let e=new URL(h,c);e.pathname=(0,s.normalizePathTrailingSlash)(e.pathname);let t="";if((0,d.isDynamicRoute)(e.pathname)&&e.searchParams&&r){let r=(0,n.searchParamsToUrlQuery)(e.searchParams),{result:o,params:s}=(0,u.interpolateAs)(e.pathname,e.pathname,r);o&&(t=(0,a.formatWithValidation)({pathname:o,hash:e.hash,query:(0,i.omit)(r,s)}))}let o=e.origin===c.origin?e.href.slice(e.origin.length):e.href;return r?[o,t||o]:o}catch(e){return r?[h]:h}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},49408:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let n=r(17577),a=r(10956),i="function"==typeof IntersectionObserver,o=new Map,s=[];function l(e){let{rootRef:t,rootMargin:r,disabled:l}=e,d=l||!i,[u,c]=(0,n.useState)(!1),h=(0,n.useRef)(null),p=(0,n.useCallback)(e=>{h.current=e},[]);return(0,n.useEffect)(()=>{if(i){if(d||u)return;let e=h.current;if(e&&e.tagName)return function(e,t,r){let{id:n,observer:a,elements:i}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=s.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=o.get(n)))return t;let a=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=a.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:a},s.push(r),o.set(r,t),t}(r);return i.set(e,t),a.observe(e),function(){if(i.delete(e),a.unobserve(e),0===i.size){a.disconnect(),o.delete(n);let e=s.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&s.splice(e,1)}}}(e,e=>e&&c(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!u){let e=(0,a.requestIdleCallback)(()=>c(!0));return()=>(0,a.cancelIdleCallback)(e)}},[d,r,t,u,h.current]),[p,u,(0,n.useCallback)(()=>{c(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},56401:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getPathname:function(){return n},isFullStringUrl:function(){return a},parseUrl:function(){return i}});let r="http://n";function n(e){return new URL(e,r).pathname}function a(e){return/https?:\/\//.test(e)}function i(e){let t;try{t=new URL(e,r)}catch{}return t}},52846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{Postpone:function(){return c},createPostponedAbortSignal:function(){return g},createPrerenderState:function(){return l},formatDynamicAPIAccesses:function(){return y},markCurrentScopeAsDynamic:function(){return d},trackDynamicDataAccessed:function(){return u},trackDynamicFetch:function(){return h},usedDynamicAPIs:function(){return f}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(17577)),a=r(70442),i=r(86488),o=r(56401),s="function"==typeof n.default.unstable_postpone;function l(e){return{isDebugSkeleton:e,dynamicAccesses:[]}}function d(e,t){let r=(0,o.getPathname)(e.urlPathname);if(!e.isUnstableCacheCallback){if(e.dynamicShouldError)throw new i.StaticGenBailoutError(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)p(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){let n=new a.DynamicServerError(`Route ${r} couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=n.stack,n}}}function u(e,t){let r=(0,o.getPathname)(e.urlPathname);if(e.isUnstableCacheCallback)throw Error(`Route ${r} used "${t}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${t}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(e.dynamicShouldError)throw new i.StaticGenBailoutError(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)p(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){let n=new a.DynamicServerError(`Route ${r} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=n.stack,n}}function c({reason:e,prerenderState:t,pathname:r}){p(t,e,r)}function h(e,t){e.prerenderState&&p(e.prerenderState,t,e.urlPathname)}function p(e,t,r){m();let a=`Route ${r} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;e.dynamicAccesses.push({stack:e.isDebugSkeleton?Error().stack:void 0,expression:t}),n.default.unstable_postpone(a)}function f(e){return e.dynamicAccesses.length>0}function y(e){return e.dynamicAccesses.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function m(){if(!s)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}function g(e){m();let t=new AbortController;try{n.default.unstable_postpone(e)}catch(e){t.abort(e)}return t.signal}},92357:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentParam",{enumerable:!0,get:function(){return a}});let n=r(87356);function a(e){let t=n.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t));return(t&&(e=e.slice(t.length)),e.startsWith("[[...")&&e.endsWith("]]"))?{type:"optional-catchall",param:e.slice(5,-2)}:e.startsWith("[...")&&e.endsWith("]")?{type:t?"catchall-intercepted":"catchall",param:e.slice(4,-1)}:e.startsWith("[")&&e.endsWith("]")?{type:t?"dynamic-intercepted":"dynamic",param:e.slice(1,-1)}:null}},87356:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return a},extractInterceptionRouteInformation:function(){return o},isInterceptionRouteAppPath:function(){return i}});let n=r(72862),a=["(..)(..)","(.)","(..)","(...)"];function i(e){return void 0!==e.split("/").find(e=>a.find(t=>e.startsWith(t)))}function o(e){let t,r,i;for(let n of e.split("/"))if(r=a.find(e=>n.startsWith(e))){[t,i]=e.split(r,2);break}if(!t||!r||!i)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":i="/"===t?`/${i}`:t+"/"+i;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);i=t.split("/").slice(0,-1).concat(i).join("/");break;case"(...)":i="/"+i;break;case"(..)(..)":let o=t.split("/");if(o.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);i=o.slice(0,-2).concat(i).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:i}}},81616:(e,t,r)=>{e.exports=r(20399)},23484:(e,t,r)=>{e.exports=r(81616).vendored.contexts.AmpContext},52413:(e,t,r)=>{e.exports=r(81616).vendored.contexts.AppRouterContext},81157:(e,t,r)=>{e.exports=r(81616).vendored.contexts.HeadManagerContext},97008:(e,t,r)=>{e.exports=r(81616).vendored.contexts.HooksClientContext},31206:(e,t,r)=>{e.exports=r(81616).vendored.contexts.ImageConfigContext},50131:(e,t,r)=>{e.exports=r(81616).vendored.contexts.RouterContext},93347:(e,t,r)=>{e.exports=r(81616).vendored.contexts.ServerInsertedHtml},60962:(e,t,r)=>{e.exports=r(81616).vendored["react-ssr"].ReactDOM},10326:(e,t,r)=>{e.exports=r(81616).vendored["react-ssr"].ReactJsxRuntime},56493:(e,t,r)=>{e.exports=r(81616).vendored["react-ssr"].ReactServerDOMWebpackClientEdge},17577:(e,t,r)=>{e.exports=r(81616).vendored["react-ssr"].React},22255:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},98710:(e,t)=>{function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||r&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},2451:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return a}});let r=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function a(e){return r.test(e)?e.replace(n,"\\$&"):e}},23078:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return s}}),r(576);let n=r(20380),a=r(35248);function i(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function s(e,t){var r,s;let l,d,u,{src:c,sizes:h,unoptimized:p=!1,priority:f=!1,loading:y,className:m,quality:g,width:v,height:_,fill:b=!1,style:w,overrideSrc:S,onLoad:E,onLoadingComplete:P,placeholder:O="empty",blurDataURL:j,fetchPriority:R,decoding:T="async",layout:I,objectFit:k,objectPosition:A,lazyBoundary:C,lazyRoot:x,...M}=e,{imgConf:D,showAltText:z,blurComplete:W,defaultLoader:U}=t,N=D||a.imageConfigDefault;if("allSizes"in N)l=N;else{let e=[...N.deviceSizes,...N.imageSizes].sort((e,t)=>e-t),t=N.deviceSizes.sort((e,t)=>e-t),n=null==(r=N.qualities)?void 0:r.sort((e,t)=>e-t);l={...N,allSizes:e,deviceSizes:t,qualities:n}}if(void 0===U)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let J=M.loader||U;delete M.loader,delete M.srcSet;let L="__next_img_default"in J;if(L){if("custom"===l.loader)throw Error('Image with src "'+c+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=J;J=t=>{let{config:r,...n}=t;return e(n)}}if(I){"fill"===I&&(b=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[I];e&&(w={...w,...e});let t={responsive:"100vw",fill:"100vw"}[I];t&&!h&&(h=t)}let K="",H=o(v),F=o(_);if("object"==typeof(s=c)&&(i(s)||void 0!==s.src)){let e=i(c)?c.default:c;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(d=e.blurWidth,u=e.blurHeight,j=j||e.blurDataURL,K=e.src,!b){if(H||F){if(H&&!F){let t=H/e.width;F=Math.round(e.height*t)}else if(!H&&F){let t=F/e.height;H=Math.round(e.width*t)}}else H=e.width,F=e.height}}let Z=!f&&("lazy"===y||void 0===y);(!(c="string"==typeof c?c:K)||c.startsWith("data:")||c.startsWith("blob:"))&&(p=!0,Z=!1),l.unoptimized&&(p=!0),L&&c.endsWith(".svg")&&!l.dangerouslyAllowSVG&&(p=!0),f&&(R="high");let $=o(g),V=Object.assign(b?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:k,objectPosition:A}:{},z?{}:{color:"transparent"},w),B=W||"empty"===O?null:"blur"===O?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:H,heightInt:F,blurWidth:d,blurHeight:u,blurDataURL:j||"",objectFit:V.objectFit})+'")':'url("'+O+'")',G=B?{backgroundSize:V.objectFit||"cover",backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:B}:{},q=function(e){let{config:t,src:r,unoptimized:n,width:a,quality:i,sizes:o,loader:s}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:d}=function(e,t,r){let{deviceSizes:n,allSizes:a}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:a.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:a,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>a.find(t=>t>=e)||a[a.length-1]))],kind:"x"}}(t,a,o),u=l.length-1;return{sizes:o||"w"!==d?o:"100vw",srcSet:l.map((e,n)=>s({config:t,src:r,quality:i,width:e})+" "+("w"===d?e:n+1)+d).join(", "),src:s({config:t,src:r,quality:i,width:l[u]})}}({config:l,src:c,unoptimized:p,width:H,quality:$,sizes:h,loader:J});return{props:{...M,loading:Z?"lazy":y,fetchPriority:R,width:H,height:F,decoding:T,className:m,style:{...V,...G},sizes:q.sizes,srcSet:q.srcSet,src:S||q.src},meta:{unoptimized:p,priority:f,placeholder:O,fill:b}}}},92165:(e,t)=>{function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)&4294967295;return t>>>0}function n(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return n}})},60815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return y},defaultHead:function(){return c}});let n=r(91174),a=r(58374),i=r(10326),o=a._(r(17577)),s=n._(r(78003)),l=r(23484),d=r(81157),u=r(98710);function c(e){void 0===e&&(e=!1);let t=[(0,i.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(576);let p=["name","httpEquiv","charSet","itemProp"];function f(e,t){let{inAmpMode:r}=t;return e.reduce(h,[]).reverse().concat(c(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,n={};return a=>{let i=!0,o=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){o=!0;let t=a.key.slice(a.key.indexOf("$")+1);e.has(t)?i=!1:e.add(t)}switch(a.type){case"title":case"base":t.has(a.type)?i=!1:t.add(a.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(a.props.hasOwnProperty(t)){if("charSet"===t)r.has(t)?i=!1:r.add(t);else{let e=a.props[t],r=n[t]||new Set;("name"!==t||!o)&&r.has(e)?i=!1:(r.add(e),n[t]=r)}}}}return i}}()).reverse().map((e,t)=>{let n=e.key||t;if(!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,o.default.cloneElement(e,t)}return o.default.cloneElement(e,{key:n})})}let y=function(e){let{children:t}=e,r=(0,o.useContext)(l.AmpStateContext),n=(0,o.useContext)(d.HeadManagerContext);return(0,i.jsx)(s.default,{reduceComponentsToState:f,headManager:n,inAmpMode:(0,u.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},20380:(e,t)=>{function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:a,blurDataURL:i,objectFit:o}=e,s=n?40*n:t,l=a?40*a:r,d=s&&l?"viewBox='0 0 "+s+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+d+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(d?"none":"contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+i+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},35248:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return n}});let r=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},69029:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return s}});let n=r(91174),a=r(23078),i=r(92481),o=n._(r(86820));function s(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=i.Image},86820:(e,t)=>{function r(e){var t;let{config:r,src:n,width:a,quality:i}=e,o=i||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(n)+"&w="+a+"&q="+o}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},94129:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return a}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},36058:(e,t)=>{function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},33879:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ActionQueueContext:function(){return s},createMutableActionQueue:function(){return u}});let n=r(58374),a=r(57767),i=r(83860),o=n._(r(17577)),s=o.default.createContext(null);function l(e,t){null!==e.pending&&(e.pending=e.pending.next,null!==e.pending?d({actionQueue:e,action:e.pending,setState:t}):e.needsRefresh&&(e.needsRefresh=!1,e.dispatch({type:a.ACTION_REFRESH,origin:window.location.origin},t)))}async function d(e){let{actionQueue:t,action:r,setState:n}=e,i=t.state;if(!i)throw Error("Invariant: Router state not initialized");t.pending=r;let o=r.payload,s=t.action(i,o);function d(e){r.discarded||(t.state=e,t.devToolsInstance&&t.devToolsInstance.send(o,e),l(t,n),r.resolve(e))}(0,a.isThenable)(s)?s.then(d,e=>{l(t,n),r.reject(e)}):d(s)}function u(){let e={state:null,dispatch:(t,r)=>(function(e,t,r){let n={resolve:r,reject:()=>{}};if(t.type!==a.ACTION_RESTORE){let e=new Promise((e,t)=>{n={resolve:e,reject:t}});(0,o.startTransition)(()=>{r(e)})}let i={payload:t,next:null,resolve:n.resolve,reject:n.reject};null===e.pending?(e.last=i,d({actionQueue:e,action:i,setState:r})):t.type===a.ACTION_NAVIGATE||t.type===a.ACTION_RESTORE?(e.pending.discarded=!0,e.last=i,e.pending.payload.type===a.ACTION_SERVER_ACTION&&(e.needsRefresh=!0),d({actionQueue:e,action:i,setState:r})):(null!==e.last&&(e.last.next=i),e.last=i)})(e,t,r),action:async(e,t)=>{if(null===e)throw Error("Invariant: Router state not initialized");return(0,i.reducer)(e,t)},pending:null,last:null};return e}},8974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return a}});let n=r(93067);function a(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:a,hash:i}=(0,n.parsePath)(e);return""+t+r+a+i}},72862:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return o}});let n=r(36058),a=r(68071);function i(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,a.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function o(e){return e.replace(/\.rsc($|\?)/,"$1")}},43071:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{formatUrl:function(){return i},formatWithValidation:function(){return s},urlObjectKeys:function(){return o}});let n=r(58374)._(r(72149)),a=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,i=e.protocol||"",o=e.pathname||"",s=e.hash||"",l=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?"["+r+"]":r),e.port&&(d+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let u=e.search||l&&"?"+l||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||a.test(i))&&!1!==d?(d="//"+(d||""),o&&"/"!==o[0]&&(o="/"+o)):d||(d=""),s&&"#"!==s[0]&&(s="#"+s),u&&"?"!==u[0]&&(u="?"+u),""+i+d+(o=o.replace(/[?#]/g,encodeURIComponent))+(u=u.replace("#","%23"))+s}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function s(e){return i(e)}},79976:(e,t)=>{function r(e,t){if(void 0===t&&(t={}),t.onlyHashChange){e();return}let r=document.documentElement,n=r.style.scrollBehavior;r.style.scrollBehavior="auto",t.dontForceLayout||r.getClientRects(),e(),r.style.scrollBehavior=n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleSmoothScroll",{enumerable:!0,get:function(){return r}})},94903:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return a.isDynamicRoute}});let n=r(44712),a=r(45541)},81394:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"interpolateAs",{enumerable:!0,get:function(){return i}});let n=r(9966),a=r(37249);function i(e,t,r){let i="",o=(0,a.getRouteRegex)(e),s=o.groups,l=(t!==e?(0,n.getRouteMatcher)(o)(t):"")||r;i=e;let d=Object.keys(s);return d.every(e=>{let t=l[e]||"",{repeat:r,optional:n}=s[e],a="["+(r?"...":"")+e+"]";return n&&(a=(t?"":"/")+"["+a+"]"),r&&!Array.isArray(t)&&(t=[t]),(n||e in l)&&(i=i.replace(a,r?t.map(e=>encodeURIComponent(e)).join("/"):encodeURIComponent(t))||"/")})||(i=""),{params:d,result:i}}},32148:(e,t)=>{function r(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isBot",{enumerable:!0,get:function(){return r}})},45541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return i}});let n=r(87356),a=/\/\[[^/]+?\](?=\/|$)/;function i(e){return(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),a.test(e)}},60944:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return i}});let n=r(51348),a=r(37929);function i(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},20757:(e,t)=>{function r(e,t){let r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return r}})},93067:(e,t)=>{function r(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r}})},34655:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return a}});let n=r(93067);function a(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},72149:(e,t)=>{function r(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function n(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function a(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,a]=e;Array.isArray(a)?a.forEach(e=>t.append(r,n(e))):t.set(r,n(a))}),t}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,r)=>e.append(r,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return i},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return a}})},83236:(e,t)=>{function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},9966:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return a}});let n=r(51348);function a(e){let{re:t,groups:r}=e;return e=>{let a=t.exec(e);if(!a)return!1;let i=e=>{try{return decodeURIComponent(e)}catch(e){throw new n.DecodeError("failed to decode param")}},o={};return Object.keys(r).forEach(e=>{let t=r[e],n=a[t.pos];void 0!==n&&(o[e]=~n.indexOf("/")?n.split("/").map(e=>i(e)):t.repeat?[i(n)]:i(n))}),o}}},37249:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return h},getNamedRouteRegex:function(){return c},getRouteRegex:function(){return l},parseParameter:function(){return o}});let n=r(87356),a=r(2451),i=r(83236);function o(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function s(e){let t=(0,i.removeTrailingSlash)(e).slice(1).split("/"),r={},s=1;return{parameterizedRoute:t.map(e=>{let t=n.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),i=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&i){let{key:e,optional:n,repeat:l}=o(i[1]);return r[e]={pos:s++,repeat:l,optional:n},"/"+(0,a.escapeStringRegexp)(t)+"([^/]+?)"}if(!i)return"/"+(0,a.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:n}=o(i[1]);return r[e]={pos:s++,repeat:t,optional:n},t?n?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}function l(e){let{parameterizedRoute:t,groups:r}=s(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function d(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:n,routeKeys:i,keyPrefix:s}=e,{key:l,optional:d,repeat:u}=o(n),c=l.replace(/\W/g,"");s&&(c=""+s+c);let h=!1;(0===c.length||c.length>30)&&(h=!0),isNaN(parseInt(c.slice(0,1)))||(h=!0),h&&(c=r()),s?i[c]=""+s+l:i[c]=l;let p=t?(0,a.escapeStringRegexp)(t):"";return u?d?"(?:/"+p+"(?<"+c+">.+?))?":"/"+p+"(?<"+c+">.+?)":"/"+p+"(?<"+c+">[^/]+?)"}function u(e,t){let r;let o=(0,i.removeTrailingSlash)(e).slice(1).split("/"),s=(r=0,()=>{let e="",t=++r;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),l={};return{namedParameterizedRoute:o.map(e=>{let r=n.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),i=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&i){let[r]=e.split(i[0]);return d({getSafeRouteKey:s,interceptionMarker:r,segment:i[1],routeKeys:l,keyPrefix:t?"nxtI":void 0})}return i?d({getSafeRouteKey:s,segment:i[1],routeKeys:l,keyPrefix:t?"nxtP":void 0}):"/"+(0,a.escapeStringRegexp)(e)}).join(""),routeKeys:l}}function c(e,t){let r=u(e,t);return{...l(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}function h(e,t){let{parameterizedRoute:r}=s(e),{catchAll:n=!0}=t;if("/"===r)return{namedRegex:"^/"+(n?".*":"")+"$"};let{namedParameterizedRoute:a}=u(e,!1);return{namedRegex:"^"+a+(n?"(?:(/.*)?)":"")+"$"}}},44712:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSortedRoutes",{enumerable:!0,get:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Error("Catch-all must be the last part of the URL.");let a=e[0];if(a.startsWith("[")&&a.endsWith("]")){let r=a.slice(1,-1),o=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),o=!0),r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function i(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===a.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(n){if(o){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');i(this.optionalRestSlugName,r),this.optionalRestSlugName=r,a="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');i(this.restSlugName,r),this.restSlugName=r,a="[...]"}}else{if(o)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');i(this.slugName,r),this.slugName=r,a="[]"}}this.children.has(a)||this.children.set(a,new r),this.children.get(a)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}},68071:(e,t)=>{function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return a},PAGE_SEGMENT_KEY:function(){return n},isGroupSegment:function(){return r}});let n="__PAGE__",a="__DEFAULT__"},78003:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let n=r(17577),a=()=>{},i=()=>{};function o(e){var t;let{headManager:r,reduceComponentsToState:o}=e;function s(){if(r&&r.mountedInstances){let t=n.Children.toArray(Array.from(r.mountedInstances).filter(Boolean));r.updateHead(o(t,e))}}return null==r||null==(t=r.mountedInstances)||t.add(e.children),s(),a(()=>{var t;return null==r||null==(t=r.mountedInstances)||t.add(e.children),()=>{var t;null==r||null==(t=r.mountedInstances)||t.delete(e.children)}}),a(()=>(r&&(r._pendingUpdate=s),()=>{r&&(r._pendingUpdate=s)})),i(()=>(r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null),()=>{r&&r._pendingUpdate&&(r._pendingUpdate(),r._pendingUpdate=null)})),null}},51348:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return f},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return g},NormalizeError:function(){return y},PageNotFoundError:function(){return m},SP:function(){return h},ST:function(){return p},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return l},getLocationOrigin:function(){return o},getURL:function(){return s},isAbsoluteUrl:function(){return i},isResSent:function(){return d},loadGetInitialProps:function(){return c},normalizeRepeatedSlashes:function(){return u},stringifyError:function(){return _}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r||(r=!0,t=e(...a)),t}}let a=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>a.test(e);function o(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function s(){let{href:e}=window.location,t=o();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function u(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function c(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await c(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&d(r))return n;if(!n)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.');return n}let h="undefined"!=typeof performance,p=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class f extends Error{}class y extends Error{}class m extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class g extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function _(e){return JSON.stringify({message:e.message,stack:e.stack})}},576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},69657:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;let n=r(61701);t.ZodIssueCode=n.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){let r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof a))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=a,a.create=e=>new a(e)},56414:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMap=t.setErrorMap=t.defaultErrorMap=void 0;let a=n(r(7611));t.defaultErrorMap=a.default;let i=a.default;t.setErrorMap=function(e){i=e},t.getErrorMap=function(){return i}},8674:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(56414),t),a(r(82813),t),a(r(15072),t),a(r(61701),t),a(r(22478),t),a(r(69657),t)},68902:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(r||(t.errorUtil=r={}))},82813:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.addIssueToContext=t.EMPTY_PATH=t.makeIssue=void 0;let a=r(56414),i=n(r(7611));t.makeIssue=e=>{let{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let s="";for(let e of n.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},t.EMPTY_PATH=[],t.addIssueToContext=function(e,r){let n=(0,a.getErrorMap)(),o=(0,t.makeIssue)({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===i.default?void 0:i.default].filter(e=>!!e)});e.common.issues.push(o)};class o{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let a of r){if("aborted"===a.status)return t.INVALID;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return o.mergeObjectSync(e,r)}static mergeObjectSync(e,r){let n={};for(let a of r){let{key:r,value:i}=a;if("aborted"===r.status||"aborted"===i.status)return t.INVALID;"dirty"===r.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==r.value&&(void 0!==i.value||a.alwaysSet)&&(n[r.value]=i.value)}return{status:e.value,value:n}}}t.ParseStatus=o,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},15072:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},61701:(e,t)=>{var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r||(t.util=r={})),(n||(t.objectUtil=n={})).mergeShapes=(e,t)=>({...e,...t}),t.ZodParsedType=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":if(Array.isArray(e))return t.ZodParsedType.array;if(null===e)return t.ZodParsedType.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return t.ZodParsedType.promise;if("undefined"!=typeof Map&&e instanceof Map)return t.ZodParsedType.map;if("undefined"!=typeof Set&&e instanceof Set)return t.ZodParsedType.set;if("undefined"!=typeof Date&&e instanceof Date)return t.ZodParsedType.date;return t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},96625:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;let s=i(r(8674));t.z=s,o(r(8674),t),t.default=s},7611:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(61701),a=r(69657);t.default=(e,t)=>{let r;switch(e.code){case a.ZodIssueCode.invalid_type:r=e.received===n.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case a.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.util.jsonStringifyReplacer)}`;break;case a.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.util.joinValues(e.keys,", ")}`;break;case a.ZodIssueCode.invalid_union:r="Invalid input";break;case a.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.util.joinValues(e.options)}`;break;case a.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${n.util.joinValues(e.options)}, received '${e.received}'`;break;case a.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case a.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case a.ZodIssueCode.invalid_date:r="Invalid date";break;case a.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case a.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case a.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case a.ZodIssueCode.custom:r="Invalid input";break;case a.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case a.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case a.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.util.assertNever(e)}return{message:r}}},22478:function(e,t,r){let n;var a,i,o,s,l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},d=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.custom=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.datetimeRegex=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=t.discriminatedUnion=t.date=void 0;let u=r(56414),c=r(68902),h=r(82813),p=r(61701),f=r(69657);class y{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let m=(e,t)=>{if((0,h.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new f.ZodError(e.common.issues);return this._error=t,this._error}}};function g(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var i,o;let{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:a.defaultError}:void 0===a.data?{message:null!==(i=null!=s?s:n)&&void 0!==i?i:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(o=null!=s?s:r)&&void 0!==o?o:a.defaultError}},description:a}}class v{get description(){return this._def.description}_getType(e){return(0,p.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,p.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new h.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,p.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,h.isAsync)(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,p.getParsedType)(e)},a=this._parseSync({data:e,path:n.path,parent:n});return m(n,a)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,p.getParsedType)(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:n});return(0,h.isValid)(t)?{value:t.value}:{issues:n.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(e=>(0,h.isValid)(e)?{value:e.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,p.getParsedType)(e)},n=this._parse({data:e,path:r.path,parent:r});return m(r,await ((0,h.isAsync)(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let a=e(t),i=()=>n.addIssue({code:f.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eh({schema:this,typeName:s.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ep.create(this,this._def)}nullable(){return ef.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return G.create(this)}promise(){return ec.create(this,this._def)}or(e){return X.create([this,e],this._def)}and(e){return ee.create(this,e,this._def)}transform(e){return new eh({...g(this._def),schema:this,typeName:s.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ey({...g(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:s.ZodDefault})}brand(){return new ev({typeName:s.ZodBranded,type:this,...g(this._def)})}catch(e){return new em({...g(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:s.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return e_.create(this,e)}readonly(){return eb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=v,t.Schema=v,t.ZodSchema=v;let _=/^c[^\s-]{8,}$/i,b=/^[0-9a-z]+$/,w=/^[0-9A-HJKMNP-TV-Z]{26}$/i,S=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,E=/^[a-z0-9_-]{21}$/i,P=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,O=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,j=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,R=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,T=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,I=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,k=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,A=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,C=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,x="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",M=RegExp(`^${x}$`);function D(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function z(e){let t=`${x}T${D(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}t.datetimeRegex=z;class W extends v{_parse(e){var t,r,a,i;let o;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.ZodParsedType.string){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.string,received:t.parsedType}),h.INVALID}let s=new h.ParseStatus;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if("max"===l.kind)e.data.length>l.value&&(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(o=this._getOrReturnCtx(e,o),t?(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if("email"===l.kind)j.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"email",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("emoji"===l.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"emoji",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("uuid"===l.kind)S.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"uuid",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("nanoid"===l.kind)E.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"nanoid",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("cuid"===l.kind)_.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"cuid",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("cuid2"===l.kind)b.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"cuid2",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("ulid"===l.kind)w.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"ulid",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(t){o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"url",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"regex",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):"datetime"===l.kind?z(l).test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.invalid_string,validation:"datetime",message:l.message}),s.dirty()):"date"===l.kind?M.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.invalid_string,validation:"date",message:l.message}),s.dirty()):"time"===l.kind?RegExp(`^${D(l)}$`).test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{code:f.ZodIssueCode.invalid_string,validation:"time",message:l.message}),s.dirty()):"duration"===l.kind?O.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"duration",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):"ip"===l.kind?(t=e.data,("v4"===(r=l.version)||!r)&&R.test(t)||("v6"===r||!r)&&I.test(t)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"ip",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty())):"jwt"===l.kind?!function(e,t){if(!P.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));if("object"!=typeof a||null===a||!a.typ||!a.alg||t&&a.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,l.alg)&&(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"jwt",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):"cidr"===l.kind?(a=e.data,("v4"===(i=l.version)||!i)&&T.test(a)||("v6"===i||!i)&&k.test(a)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"cidr",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty())):"base64"===l.kind?A.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"base64",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):"base64url"===l.kind?C.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,h.addIssueToContext)(o,{validation:"base64url",code:f.ZodIssueCode.invalid_string,message:l.message}),s.dirty()):p.util.assertNever(l);return{status:s.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:f.ZodIssueCode.invalid_string,...c.errorUtil.errToObj(r)})}_addCheck(e){return new W({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...c.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...c.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...c.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...c.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...c.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...c.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...c.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...c.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...c.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...c.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...c.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...c.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...c.errorUtil.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...c.errorUtil.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...c.errorUtil.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...c.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...c.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...c.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...c.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...c.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...c.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...c.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...c.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,c.errorUtil.errToObj(e))}trim(){return new W({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new W({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new W({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodString=W,W.create=e=>{var t;return new W({checks:[],typeName:s.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...g(e)})};class U extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.ZodParsedType.number){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.number,received:t.parsedType}),h.INVALID}let r=new h.ParseStatus;for(let n of this._def.checks)"int"===n.kind?p.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.not_finite,message:n.message}),r.dirty()):p.util.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,c.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,c.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,c.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,c.errorUtil.toString(t))}setLimit(e,t,r,n){return new U({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:c.errorUtil.toString(n)}]})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:c.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:c.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:c.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:c.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:c.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:c.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:c.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:c.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:c.errorUtil.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&p.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=U,U.create=e=>new U({checks:[],typeName:s.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...g(e)});class N extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==p.ZodParsedType.bigint)return this._getInvalidInput(e);let r=new h.ParseStatus;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):p.util.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.bigint,received:t.parsedType}),h.INVALID}gte(e,t){return this.setLimit("min",e,!0,c.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,c.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,c.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,c.errorUtil.toString(t))}setLimit(e,t,r,n){return new N({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:c.errorUtil.toString(n)}]})}_addCheck(e){return new N({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:c.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:c.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:c.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:c.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:c.errorUtil.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=N,N.create=e=>{var t;return new N({checks:[],typeName:s.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...g(e)})};class J extends v{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.ZodParsedType.boolean){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.boolean,received:t.parsedType}),h.INVALID}return(0,h.OK)(e.data)}}t.ZodBoolean=J,J.create=e=>new J({typeName:s.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...g(e)});class L extends v{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.ZodParsedType.date){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.date,received:t.parsedType}),h.INVALID}if(isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_date}),h.INVALID}let r=new h.ParseStatus;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(t=this._getOrReturnCtx(e,t),(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):p.util.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:c.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:c.errorUtil.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=L,L.create=e=>new L({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:s.ZodDate,...g(e)});class K extends v{_parse(e){if(this._getType(e)!==p.ZodParsedType.symbol){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.symbol,received:t.parsedType}),h.INVALID}return(0,h.OK)(e.data)}}t.ZodSymbol=K,K.create=e=>new K({typeName:s.ZodSymbol,...g(e)});class H extends v{_parse(e){if(this._getType(e)!==p.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.undefined,received:t.parsedType}),h.INVALID}return(0,h.OK)(e.data)}}t.ZodUndefined=H,H.create=e=>new H({typeName:s.ZodUndefined,...g(e)});class F extends v{_parse(e){if(this._getType(e)!==p.ZodParsedType.null){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.null,received:t.parsedType}),h.INVALID}return(0,h.OK)(e.data)}}t.ZodNull=F,F.create=e=>new F({typeName:s.ZodNull,...g(e)});class Z extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,h.OK)(e.data)}}t.ZodAny=Z,Z.create=e=>new Z({typeName:s.ZodAny,...g(e)});class $ extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,h.OK)(e.data)}}t.ZodUnknown=$,$.create=e=>new $({typeName:s.ZodUnknown,...g(e)});class V extends v{_parse(e){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.never,received:t.parsedType}),h.INVALID}}t.ZodNever=V,V.create=e=>new V({typeName:s.ZodNever,...g(e)});class B extends v{_parse(e){if(this._getType(e)!==p.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.void,received:t.parsedType}),h.INVALID}return(0,h.OK)(e.data)}}t.ZodVoid=B,B.create=e=>new B({typeName:s.ZodVoid,...g(e)});class G extends v{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==p.ZodParsedType.array)return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.array,received:t.parsedType}),h.INVALID;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&((0,h.addIssueToContext)(t,{code:e?f.ZodIssueCode.too_big:f.ZodIssueCode.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&((0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&((0,h.addIssueToContext)(t,{code:f.ZodIssueCode.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new y(t,e,t.path,r)))).then(e=>h.ParseStatus.mergeArray(r,e));let a=[...t.data].map((e,r)=>n.type._parseSync(new y(t,e,t.path,r)));return h.ParseStatus.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new G({...this._def,minLength:{value:e,message:c.errorUtil.toString(t)}})}max(e,t){return new G({...this._def,maxLength:{value:e,message:c.errorUtil.toString(t)}})}length(e,t){return new G({...this._def,exactLength:{value:e,message:c.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}t.ZodArray=G,G.create=(e,t)=>new G({type:e,minLength:null,maxLength:null,exactLength:null,typeName:s.ZodArray,...g(t)});class q extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=p.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==p.ZodParsedType.object){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.object,received:t.parsedType}),h.INVALID}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof V&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||i.push(e);let o=[];for(let e of a){let t=n[e],a=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new y(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof V){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&((0,h.addIssueToContext)(r,{code:f.ZodIssueCode.unrecognized_keys,keys:i}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new y(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>h.ParseStatus.mergeObjectSync(t,e)):h.ParseStatus.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return c.errorUtil.errToObj,new q({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,a,i,o;let s=null!==(i=null===(a=(n=this._def).errorMap)||void 0===a?void 0:a.call(n,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=c.errorUtil.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}})}strip(){return new q({...this._def,unknownKeys:"strip"})}passthrough(){return new q({...this._def,unknownKeys:"passthrough"})}extend(e){return new q({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new q({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:s.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new q({...this._def,catchall:e})}pick(e){let t={};return p.util.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new q({...this._def,shape:()=>t})}omit(e){let t={};return p.util.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new q({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof q){let r={};for(let n in t.shape){let a=t.shape[n];r[n]=ep.create(e(a))}return new q({...t._def,shape:()=>r})}return t instanceof G?new G({...t._def,type:e(t.element)}):t instanceof ep?ep.create(e(t.unwrap())):t instanceof ef?ef.create(e(t.unwrap())):t instanceof et?et.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return p.util.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new q({...this._def,shape:()=>t})}required(e){let t={};return p.util.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ep;)e=e._def.innerType;t[r]=e}}),new q({...this._def,shape:()=>t})}keyof(){return el(p.util.objectKeys(this.shape))}}t.ZodObject=q,q.create=(e,t)=>new q({shape:()=>e,unknownKeys:"strip",catchall:V.create(),typeName:s.ZodObject,...g(t)}),q.strictCreate=(e,t)=>new q({shape:()=>e,unknownKeys:"strict",catchall:V.create(),typeName:s.ZodObject,...g(t)}),q.lazycreate=(e,t)=>new q({shape:e,unknownKeys:"strip",catchall:V.create(),typeName:s.ZodObject,...g(t)});class X extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new f.ZodError(e.ctx.common.issues));return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_union,unionErrors:r}),h.INVALID});{let e;let n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=n.map(e=>new f.ZodError(e));return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_union,unionErrors:a}),h.INVALID}}get options(){return this._def.options}}t.ZodUnion=X,X.create=(e,t)=>new X({options:e,typeName:s.ZodUnion,...g(t)});let Y=e=>{if(e instanceof eo)return Y(e.schema);if(e instanceof eh)return Y(e.innerType());if(e instanceof es)return[e.value];if(e instanceof ed)return e.options;if(e instanceof eu)return p.util.objectValues(e.enum);if(e instanceof ey)return Y(e._def.innerType);if(e instanceof H)return[void 0];else if(e instanceof F)return[null];else if(e instanceof ep)return[void 0,...Y(e.unwrap())];else if(e instanceof ef)return[null,...Y(e.unwrap())];else if(e instanceof ev)return Y(e.unwrap());else if(e instanceof eb)return Y(e.unwrap());else if(e instanceof em)return Y(e._def.innerType);else return[]};class Q extends v{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.ZodParsedType.object)return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.object,received:t.parsedType}),h.INVALID;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):((0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),h.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=Y(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(n.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new Q({typeName:s.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...g(r)})}}t.ZodDiscriminatedUnion=Q;class ee extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if((0,h.isAborted)(e)||(0,h.isAborted)(n))return h.INVALID;let a=function e(t,r){let n=(0,p.getParsedType)(t),a=(0,p.getParsedType)(r);if(t===r)return{valid:!0,data:t};if(n===p.ZodParsedType.object&&a===p.ZodParsedType.object){let n=p.util.objectKeys(r),a=p.util.objectKeys(t).filter(e=>-1!==n.indexOf(e)),i={...t,...r};for(let n of a){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};i[n]=a.data}return{valid:!0,data:i}}if(n===p.ZodParsedType.array&&a===p.ZodParsedType.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let a=0;a<t.length;a++){let i=e(t[a],r[a]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===p.ZodParsedType.date&&a===p.ZodParsedType.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,n.value);return a.valid?(((0,h.isDirty)(e)||(0,h.isDirty)(n))&&t.dirty(),{status:t.value,value:a.data}):((0,h.addIssueToContext)(r,{code:f.ZodIssueCode.invalid_intersection_types}),h.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}t.ZodIntersection=ee,ee.create=(e,t,r)=>new ee({left:e,right:t,typeName:s.ZodIntersection,...g(r)});class et extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.ZodParsedType.array)return(0,h.addIssueToContext)(r,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.array,received:r.parsedType}),h.INVALID;if(r.data.length<this._def.items.length)return(0,h.addIssueToContext)(r,{code:f.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),h.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,h.addIssueToContext)(r,{code:f.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new y(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>h.ParseStatus.mergeArray(t,e)):h.ParseStatus.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new et({...this._def,rest:e})}}t.ZodTuple=et,et.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new et({items:e,typeName:s.ZodTuple,rest:null,...g(t)})};class er extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.ZodParsedType.object)return(0,h.addIssueToContext)(r,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.object,received:r.parsedType}),h.INVALID;let n=[],a=this._def.keyType,i=this._def.valueType;for(let e in r.data)n.push({key:a._parse(new y(r,e,r.path,e)),value:i._parse(new y(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?h.ParseStatus.mergeObjectAsync(t,n):h.ParseStatus.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new er(t instanceof v?{keyType:e,valueType:t,typeName:s.ZodRecord,...g(r)}:{keyType:W.create(),valueType:e,typeName:s.ZodRecord,...g(t)})}}t.ZodRecord=er;class en extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.ZodParsedType.map)return(0,h.addIssueToContext)(r,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.map,received:r.parsedType}),h.INVALID;let n=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new y(r,e,r.path,[i,"key"])),value:a._parse(new y(r,t,r.path,[i,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of i){let n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return h.INVALID;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of i){let n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return h.INVALID;("dirty"===n.status||"dirty"===a.status)&&t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}t.ZodMap=en,en.create=(e,t,r)=>new en({valueType:t,keyType:e,typeName:s.ZodMap,...g(r)});class ea extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==p.ZodParsedType.set)return(0,h.addIssueToContext)(r,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.set,received:r.parsedType}),h.INVALID;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&((0,h.addIssueToContext)(r,{code:f.ZodIssueCode.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&((0,h.addIssueToContext)(r,{code:f.ZodIssueCode.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function i(e){let r=new Set;for(let n of e){if("aborted"===n.status)return h.INVALID;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let o=[...r.data.values()].map((e,t)=>a._parse(new y(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>i(e)):i(o)}min(e,t){return new ea({...this._def,minSize:{value:e,message:c.errorUtil.toString(t)}})}max(e,t){return new ea({...this._def,maxSize:{value:e,message:c.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=ea,ea.create=(e,t)=>new ea({valueType:e,minSize:null,maxSize:null,typeName:s.ZodSet,...g(t)});class ei extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.ZodParsedType.function)return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.function,received:t.parsedType}),h.INVALID;function r(e,r){return(0,h.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,u.getErrorMap)(),u.defaultErrorMap].filter(e=>!!e),issueData:{code:f.ZodIssueCode.invalid_arguments,argumentsError:r}})}function n(e,r){return(0,h.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,u.getErrorMap)(),u.defaultErrorMap].filter(e=>!!e),issueData:{code:f.ZodIssueCode.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof ec){let e=this;return(0,h.OK)(async function(...t){let o=new f.ZodError([]),s=await e._def.args.parseAsync(t,a).catch(e=>{throw o.addIssue(r(t,e)),o}),l=await Reflect.apply(i,this,s);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw o.addIssue(n(l,e)),o})})}{let e=this;return(0,h.OK)(function(...t){let o=e._def.args.safeParse(t,a);if(!o.success)throw new f.ZodError([r(t,o.error)]);let s=Reflect.apply(i,this,o.data),l=e._def.returns.safeParse(s,a);if(!l.success)throw new f.ZodError([n(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ei({...this._def,args:et.create(e).rest($.create())})}returns(e){return new ei({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ei({args:e||et.create([]).rest($.create()),returns:t||$.create(),typeName:s.ZodFunction,...g(r)})}}t.ZodFunction=ei;class eo extends v{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=eo,eo.create=(e,t)=>new eo({getter:e,typeName:s.ZodLazy,...g(t)});class es extends v{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{received:t.data,code:f.ZodIssueCode.invalid_literal,expected:this._def.value}),h.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function el(e,t){return new ed({values:e,typeName:s.ZodEnum,...g(t)})}t.ZodLiteral=es,es.create=(e,t)=>new es({value:e,typeName:s.ZodLiteral,...g(t)});class ed extends v{constructor(){super(...arguments),i.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,h.addIssueToContext)(t,{expected:p.util.joinValues(r),received:t.parsedType,code:f.ZodIssueCode.invalid_type}),h.INVALID}if(l(this,i,"f")||d(this,i,new Set(this._def.values),"f"),!l(this,i,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,h.addIssueToContext)(t,{received:t.data,code:f.ZodIssueCode.invalid_enum_value,options:r}),h.INVALID}return(0,h.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ed.create(e,{...this._def,...t})}exclude(e,t=this._def){return ed.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}t.ZodEnum=ed,i=new WeakMap,ed.create=el;class eu extends v{constructor(){super(...arguments),o.set(this,void 0)}_parse(e){let t=p.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==p.ZodParsedType.string&&r.parsedType!==p.ZodParsedType.number){let e=p.util.objectValues(t);return(0,h.addIssueToContext)(r,{expected:p.util.joinValues(e),received:r.parsedType,code:f.ZodIssueCode.invalid_type}),h.INVALID}if(l(this,o,"f")||d(this,o,new Set(p.util.getValidEnumValues(this._def.values)),"f"),!l(this,o,"f").has(e.data)){let e=p.util.objectValues(t);return(0,h.addIssueToContext)(r,{received:r.data,code:f.ZodIssueCode.invalid_enum_value,options:e}),h.INVALID}return(0,h.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=eu,o=new WeakMap,eu.create=(e,t)=>new eu({values:e,typeName:s.ZodNativeEnum,...g(t)});class ec extends v{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.ZodParsedType.promise&&!1===t.common.async)return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.promise,received:t.parsedType}),h.INVALID;let r=t.parsedType===p.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,h.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}t.ZodPromise=ec,ec.create=(e,t)=>new ec({type:e,typeName:s.ZodPromise,...g(t)});class eh extends v{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===s.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{(0,h.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){let e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return h.INVALID;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?h.INVALID:"dirty"===n.status||"dirty"===t.value?(0,h.DIRTY)(n.value):n});{if("aborted"===t.value)return h.INVALID;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?h.INVALID:"dirty"===n.status||"dirty"===t.value?(0,h.DIRTY)(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?h.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?h.INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,h.isValid)(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,h.isValid)(e))return e;let i=n.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}}p.util.assertNever(n)}}t.ZodEffects=eh,t.ZodTransformer=eh,eh.create=(e,t,r)=>new eh({schema:e,typeName:s.ZodEffects,effect:t,...g(r)}),eh.createWithPreprocess=(e,t,r)=>new eh({schema:t,effect:{type:"preprocess",transform:e},typeName:s.ZodEffects,...g(r)});class ep extends v{_parse(e){return this._getType(e)===p.ZodParsedType.undefined?(0,h.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=ep,ep.create=(e,t)=>new ep({innerType:e,typeName:s.ZodOptional,...g(t)});class ef extends v{_parse(e){return this._getType(e)===p.ZodParsedType.null?(0,h.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=ef,ef.create=(e,t)=>new ef({innerType:e,typeName:s.ZodNullable,...g(t)});class ey extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===p.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=ey,ey.create=(e,t)=>new ey({innerType:e,typeName:s.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...g(t)});class em extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,h.isAsync)(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new f.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new f.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=em,em.create=(e,t)=>new em({innerType:e,typeName:s.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...g(t)});class eg extends v{_parse(e){if(this._getType(e)!==p.ZodParsedType.nan){let t=this._getOrReturnCtx(e);return(0,h.addIssueToContext)(t,{code:f.ZodIssueCode.invalid_type,expected:p.ZodParsedType.nan,received:t.parsedType}),h.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=eg,eg.create=e=>new eg({typeName:s.ZodNaN,...g(e)}),t.BRAND=Symbol("zod_brand");class ev extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=ev;class e_ extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?h.INVALID:"dirty"===e.status?(t.dirty(),(0,h.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?h.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new e_({in:e,out:t,typeName:s.ZodPipeline})}}t.ZodPipeline=e_;class eb extends v{_parse(e){let t=this._def.innerType._parse(e),r=e=>((0,h.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,h.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function ew(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eS(e,t={},r){return e?Z.create().superRefine((n,a)=>{var i,o;let s=e(n);if(s instanceof Promise)return s.then(e=>{var i,o;if(!e){let e=ew(t,n),s=null===(o=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===o||o;a.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=ew(t,n),s=null===(o=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===o||o;a.addIssue({code:"custom",...e,fatal:s})}}):Z.create()}t.ZodReadonly=eb,eb.create=(e,t)=>new eb({innerType:e,typeName:s.ZodReadonly,...g(t)}),t.custom=eS,t.late={object:q.lazycreate},(a=s||(t.ZodFirstPartyTypeKind=s={})).ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly",t.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>eS(t=>t instanceof e,t);let eE=W.create;t.string=eE;let eP=U.create;t.number=eP;let eO=eg.create;t.nan=eO;let ej=N.create;t.bigint=ej;let eR=J.create;t.boolean=eR;let eT=L.create;t.date=eT;let eI=K.create;t.symbol=eI;let ek=H.create;t.undefined=ek;let eA=F.create;t.null=eA;let eC=Z.create;t.any=eC;let ex=$.create;t.unknown=ex;let eM=V.create;t.never=eM;let eD=B.create;t.void=eD;let ez=G.create;t.array=ez;let eW=q.create;t.object=eW;let eU=q.strictCreate;t.strictObject=eU;let eN=X.create;t.union=eN;let eJ=Q.create;t.discriminatedUnion=eJ;let eL=ee.create;t.intersection=eL;let eK=et.create;t.tuple=eK;let eH=er.create;t.record=eH;let eF=en.create;t.map=eF;let eZ=ea.create;t.set=eZ;let e$=ei.create;t.function=e$;let eV=eo.create;t.lazy=eV;let eB=es.create;t.literal=eB;let eG=ed.create;t.enum=eG;let eq=eu.create;t.nativeEnum=eq;let eX=ec.create;t.promise=eX;let eY=eh.create;t.effect=eY,t.transformer=eY;let eQ=ep.create;t.optional=eQ;let e0=ef.create;t.nullable=e0;let e1=eh.createWithPreprocess;t.preprocess=e1;let e2=e_.create;t.pipeline=e2,t.ostring=()=>eE().optional(),t.onumber=()=>eP().optional(),t.oboolean=()=>eR().optional(),t.coerce={string:e=>W.create({...e,coerce:!0}),number:e=>U.create({...e,coerce:!0}),boolean:e=>J.create({...e,coerce:!0}),bigint:e=>N.create({...e,coerce:!0}),date:e=>L.create({...e,coerce:!0})},t.NEVER=h.INVALID},68570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createProxy",{enumerable:!0,get:function(){return n}});let n=r(51749).createClientModuleProxy},59943:(e,t,r)=>{let{createProxy:n}=r(68570);e.exports=n("/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/next/dist/client/components/app-router.js")},53144:(e,t,r)=>{let{createProxy:n}=r(68570);e.exports=n("/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/next/dist/client/components/client-page.js")},37922:(e,t,r)=>{let{createProxy:n}=r(68570);e.exports=n("/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/next/dist/client/components/error-boundary.js")},95106:(e,t,r)=>{let{createProxy:n}=r(68570);e.exports=n("/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/next/dist/client/components/layout-router.js")},60525:(e,t,r)=>{let{createProxy:n}=r(68570);e.exports=n("/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/next/dist/client/components/not-found-boundary.js")},35866:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}}),r(53370);let n=r(19510);r(71159);let a={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{display:"inline-block"},h1:{display:"inline-block",margin:"0 20px 0 0",padding:"0 23px 0 0",fontSize:24,fontWeight:500,verticalAlign:"top",lineHeight:"49px"},h2:{fontSize:14,fontWeight:400,lineHeight:"49px",margin:0}};function i(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("title",{children:"404: This page could not be found."}),(0,n.jsx)("div",{style:a.error,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}),(0,n.jsx)("h1",{className:"next-error-h1",style:a.h1,children:"404"}),(0,n.jsx)("div",{style:a.desc,children:(0,n.jsx)("h2",{style:a.h2,children:"This page could not be found."})})]})})]})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},84892:(e,t,r)=>{let{createProxy:n}=r(68570);e.exports=n("/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/next/dist/client/components/render-from-template-context.js")},79181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{createDynamicallyTrackedSearchParams:function(){return s},createUntrackedSearchParams:function(){return o}});let n=r(45869),a=r(6278),i=r(38238);function o(e){let t=n.staticGenerationAsyncStorage.getStore();return t&&t.forceStatic?{}:e}function s(e){let t=n.staticGenerationAsyncStorage.getStore();return t?t.forceStatic?{}:t.isStaticGeneration||t.dynamicShouldError?new Proxy({},{get:(e,r,n)=>("string"==typeof r&&(0,a.trackDynamicDataAccessed)(t,"searchParams."+r),i.ReflectAdapter.get(e,r,n)),has:(e,r)=>("string"==typeof r&&(0,a.trackDynamicDataAccessed)(t,"searchParams."+r),Reflect.has(e,r)),ownKeys:e=>((0,a.trackDynamicDataAccessed)(t,"searchParams"),Reflect.ownKeys(e))}):e:e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},95231:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{AppRouter:function(){return a.default},ClientPageRoot:function(){return u.ClientPageRoot},LayoutRouter:function(){return i.default},NotFoundBoundary:function(){return p.NotFoundBoundary},Postpone:function(){return m.Postpone},RenderFromTemplateContext:function(){return o.default},actionAsyncStorage:function(){return d.actionAsyncStorage},createDynamicallyTrackedSearchParams:function(){return c.createDynamicallyTrackedSearchParams},createUntrackedSearchParams:function(){return c.createUntrackedSearchParams},decodeAction:function(){return n.decodeAction},decodeFormState:function(){return n.decodeFormState},decodeReply:function(){return n.decodeReply},patchFetch:function(){return b},preconnect:function(){return y.preconnect},preloadFont:function(){return y.preloadFont},preloadStyle:function(){return y.preloadStyle},renderToReadableStream:function(){return n.renderToReadableStream},requestAsyncStorage:function(){return l.requestAsyncStorage},serverHooks:function(){return h},staticGenerationAsyncStorage:function(){return s.staticGenerationAsyncStorage},taintObjectReference:function(){return g.taintObjectReference}});let n=r(51749),a=v(r(59943)),i=v(r(95106)),o=v(r(84892)),s=r(45869),l=r(54580),d=r(72934),u=r(53144),c=r(79181),h=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(44789)),p=r(60525),f=r(60670);r(37922);let y=r(20135),m=r(49257),g=r(526);function v(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function b(){return(0,f.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:s.staticGenerationAsyncStorage})}},49257:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Postpone",{enumerable:!0,get:function(){return n.Postpone}});let n=r(6278)},20135:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{preconnect:function(){return o},preloadFont:function(){return i},preloadStyle:function(){return a}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(97049));function a(e,t){let r={as:"style"};"string"==typeof t&&(r.crossOrigin=t),n.default.preload(e,r)}function i(e,t,r){let a={as:"font",type:t};"string"==typeof r&&(a.crossOrigin=r),n.default.preload(e,a)}function o(e,t){n.default.preconnect(e,"string"==typeof t?{crossOrigin:t}:void 0)}},526:(e,t,r)=>{function n(){throw Error("Taint can only be used with the taint flag.")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{taintObjectReference:function(){return a},taintUniqueValue:function(){return i}}),r(71159);let a=n,i=n},97049:(e,t,r)=>{e.exports=r(23191).vendored["react-rsc"].ReactDOM},19510:(e,t,r)=>{e.exports=r(23191).vendored["react-rsc"].ReactJsxRuntime},51749:(e,t,r)=>{e.exports=r(23191).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},22079:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidCacheMemory=void 0;let n=r(79993);class a extends n.SimpleStoreMemory{constructor(e){super(e?.max==null?{ttl:36e5,maxSize:52428800,...e}:{ttl:36e5,...e})}}t.DidCacheMemory=a},13534:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidResolverCached=void 0;let n=r(2032),a=r(22079);class i{constructor(e,t=new a.DidCacheMemory){Object.defineProperty(this,"getter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.getter=new n.CachedGetter((t,r)=>e.resolve(t,r),t)}async resolve(e,t){return this.getter.get(e,t)}}t.DidResolverCached=i},61654:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},11549:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidResolverBase=void 0;let n=r(96625),a=r(77964),i=r(31285);class o{constructor(e){Object.defineProperty(this,"methods",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.methods=new Map(Object.entries(e))}async resolve(e,t){t?.signal?.throwIfAborted();let r=(0,a.extractDidMethod)(e),o=this.methods.get(r);if(!o)throw new a.DidError(e,"Unsupported DID method","did-method-invalid",400);try{let r=await o.resolve(e,t);if(r.id!==e)throw new a.DidError(e,`DID document id (${r.id}) does not match DID`,"did-document-id-mismatch",400);return r}catch(t){if(t instanceof i.FetchResponseError){let r=t.response.status>=500?502:t.response.status;throw new a.DidError(e,t.message,"did-fetch-error",r,t)}if(t instanceof i.FetchError)throw new a.DidError(e,t.message,"did-fetch-error",400,t);if(t instanceof n.ZodError)throw new a.DidError(e,t.message,"did-document-format-error",503,t);throw a.DidError.from(t,e)}}}t.DidResolverBase=o},34523:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidResolverCommon=void 0;let n=r(11549),a=r(71682),i=r(25609);class o extends n.DidResolverBase{constructor(e){super({plc:new a.DidPlcMethod(e),web:new i.DidWebMethod(e)})}}t.DidResolverCommon=o},27864:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},21482:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(77964),t),a(r(22079),t),a(r(13534),t),a(r(61654),t),a(r(34523),t),a(r(27864),t),a(r(27675),t),a(r(51744),t)},27675:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(71682),t),a(r(25609),t)},71682:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidPlcMethod=void 0;let n=r(77964),a=r(31285),i=(0,r(53749).pipe)((0,a.fetchOkProcessor)(),(0,a.fetchJsonProcessor)(/^application\/(did\+ld\+)?json$/),(0,a.fetchJsonZodProcessor)(n.didDocumentValidator));class o{constructor(e){Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plcDirectoryUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plcDirectoryUrl=new URL(e?.plcDirectoryUrl||"https://plc.directory/"),this.fetch=(0,a.bindFetch)(e?.fetch)}async resolve(e,t){(0,n.assertDidPlc)(e);let r=new URL(`/${encodeURIComponent(e)}`,this.plcDirectoryUrl);return this.fetch(r,{redirect:"error",headers:{accept:"application/did+ld+json,application/json"},signal:t?.signal}).then(i)}}t.DidPlcMethod=o},25609:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidWebMethod=void 0,t.buildDidWebDocumentUrl=s;let n=r(77964),a=r(31285),i=(0,r(53749).pipe)((0,a.fetchOkProcessor)(),(0,a.fetchJsonProcessor)(/^application\/(did\+ld\+)?json$/),(0,a.fetchJsonZodProcessor)(n.didDocumentValidator));class o{constructor({fetch:e=globalThis.fetch,allowHttp:t=!0}={}){Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowHttp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fetch=(0,a.bindFetch)(e),this.allowHttp=t}async resolve(e,t){let r=s(e);if(!this.allowHttp&&"http:"===r.protocol)throw new n.DidError(e,'Resolution of "http" did:web is not allowed',"did-web-http-not-allowed");return this.fetch(r,{redirect:"error",headers:{accept:"application/did+ld+json,application/json"},signal:t?.signal}).then(i)}}function s(e){let t=(0,n.didWebToUrl)(e);return"/"===t.pathname?new URL("/.well-known/did.json",t):new URL(`${t.pathname}/did.json`,t)}t.DidWebMethod=o},51744:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},42460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FetchError=void 0;class r extends Error{constructor(e,t,r){super(t,r),Object.defineProperty(this,"statusCode",{enumerable:!0,configurable:!0,writable:!0,value:e})}get expose(){return!0}}t.FetchError=r},77635:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FORBIDDEN_DOMAIN_NAMES=t.FetchRequestError=void 0,t.protocolCheckRequestTransform=function(e){return(t,r)=>{let{protocol:n,port:s}=(0,i.extractUrl)(t),l=(0,a.asRequest)(t,r),d=Object.hasOwn(e,n)?e[n]:void 0;if(d){if(!0===d);else if(!d.allowCustomPort&&""!==s)throw new o(l,400,`Custom ${n} ports not allowed`)}else throw new o(l,400,`Forbidden protocol "${n}"`);return l}},t.explicitRedirectCheckRequestTransform=function(){return(e,t)=>{let r=(0,a.asRequest)(e,t);if(t?.redirect!=null)return r;if("follow"===r.redirect)throw new o(r,500,'Request redirect must be "error" or "manual"');return r}},t.requireHostHeaderTransform=function(){return(e,t)=>{let{protocol:r,hostname:n}=(0,i.extractUrl)(e),s=(0,a.asRequest)(e,t);if("http:"!==r&&"https:"!==r)throw new o(s,400,`"${r}" requests are not allowed`);if(!n||(0,i.isIp)(n))throw new o(s,400,"Invalid hostname");return s}},t.forbiddenDomainNameRequestTransform=function(e=t.DEFAULT_FORBIDDEN_DOMAIN_NAMES){let r=new Set(e);return 0===r.size?a.asRequest:async(e,t)=>{let{hostname:n}=(0,i.extractUrl)(e),s=(0,a.asRequest)(e,t);if(r.has(n))throw new o(s,403,"Forbidden hostname");let l=n.indexOf(".");for(;-1!==l;){let e=n.slice(l+1);if(r.has(`*.${e}`))throw new o(s,403,"Forbidden hostname");l=n.indexOf(".",l+1)}return s}};let n=r(42460),a=r(95672),i=r(43469);class o extends n.FetchError{constructor(e,t,r,n){if(null==t||!r){let e=function(e){if("string"==typeof e&&e.length>0)return[500,e];if(!(e instanceof Error))return[500,"Failed to fetch"];switch(e.message){case"failed to fetch the data URL":return[400,e.message];case"unexpected redirect":case"cors failure":case"blocked":case"proxy authentication required":return[502,e.message]}let t=e.code;if("string"==typeof t)switch(!0){case"ENOTFOUND"===t:return[400,"Invalid hostname"];case"ECONNREFUSED"===t:return[502,"Connection refused"];case"DEPTH_ZERO_SELF_SIGNED_CERT"===t:return[502,"Self-signed certificate"];case t.startsWith("ERR_TLS"):return[502,"TLS error"];case t.startsWith("ECONN"):return[502,"Connection error"];default:return[500,`${t} error`]}return[500,e.message]}(function(e){return e instanceof TypeError&&"fetch failed"===e.message&&void 0!==e.cause?e.cause:e}(n?.cause));t??(t=e[0]),r||(r=e[1])}super(t,r,n),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:e})}get expose(){return 500!==this.statusCode}static from(e,t){return t instanceof o?t:new o(e,void 0,void 0,{cause:t})}}t.FetchRequestError=o,t.DEFAULT_FORBIDDEN_DOMAIN_NAMES=["example.com","*.example.com","example.org","*.example.org","example.net","*.example.net","googleusercontent.com","*.googleusercontent.com"]},81783:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchJsonZodProcessor=t.FetchResponseError=void 0,t.peekJson=u,t.checkLength=c,t.extractLength=h,t.extractMime=p,t.cancelBodyOnError=f,t.fetchOkProcessor=function(e){return f(t=>y(t,e))},t.fetchOkTransformer=y,t.fetchMaxSizeProcessor=function(e){if(e===1/0)return e=>e;if(!Number.isFinite(e)||e<0)throw TypeError("maxBytes must be a 0, Infinity or a positive number");return f(t=>m(t,e))},t.fetchResponseMaxSizeChecker=m,t.fetchTypeProcessor=g,t.fetchResponseTypeChecker=v,t.fetchResponseJsonTransformer=_,t.fetchJsonProcessor=function(e=s,t=!0){return(0,n.pipe)(g(e,t),f(_))},t.fetchJsonValidatorProcessor=b;let n=r(53749),a=r(42460),i=r(71607),o=r(43469),s=/^application\/(?:[^()<>@,;:/[\]\\?={} \t]+\+)?json$/i;class l extends a.FetchError{constructor(e,t=e.status,r=e.statusText,n){super(t,r,n),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:e})}static async from(e,t=d,r=e.status,n){let a="string"==typeof t?t:"function"==typeof t?await t(e):void 0;return new l(e,r,a,n)}}t.FetchResponseError=l;let d=async e=>{let t=p(e);if(t)try{if("text/plain"===t)return await e.text();if(s.test(t)){let t=await e.json();if("string"==typeof t)return t;if("object"==typeof t&&null!=t){let e=(0,o.ifString)(t.error_description);if(e)return e;let r=(0,o.ifString)(t.error);if(r)return r;let n=(0,o.ifString)(t.message);if(n)return n}}}catch{}};async function u(e,t=1/0){if("application/json"!==p(e))return;c(e,t);let r=e.clone();return(e.body&&t<1/0?new i.TransformedResponse(r,new o.MaxBytesTransformStream(t)):r).json()}function c(e,t){if(!(t>=0))throw TypeError("maxBytes must be a non-negative number");let r=h(e);if(null!=r&&r>t)throw new l(e,502,"Response too large");return r}function h(e){let t=e.headers.get("Content-Length");if(null==t)return;if(!/^\d+$/.test(t))throw new l(e,502,"Invalid Content-Length");let r=Number(t);if(!Number.isSafeInteger(r))throw new l(e,502,"Content-Length too large");return r}function p(e){let t=e.headers.get("Content-Type");if(null!=t)return t.split(";",1)[0].trim()}function f(e,t=o.logCancellationError){return async r=>{try{return await e(r)}catch(e){throw await (0,o.cancelBody)(r,t??void 0),e}}}async function y(e,t){if(e.ok)return e;throw await l.from(e,t)}function m(e,t){if(t===1/0||(c(e,t),!e.body))return e;let r=new o.MaxBytesTransformStream(t);return new i.TransformedResponse(e,r)}function g(e,t=!0){let r="string"==typeof e?t=>t===e:e instanceof RegExp?t=>e.test(t):e;return f(e=>v(e,r,t))}async function v(e,t,r=!0){let n=p(e);if(n){if(!t(n.toLowerCase()))throw await l.from(e,`Unexpected response Content-Type (${n})`,502)}else if(r)throw await l.from(e,"Missing response Content-Type header",502);return e}async function _(e){try{let t=await e.json();return{response:e,json:t}}catch(t){throw new l(e,502,"Unable to parse response as JSON",{cause:t})}}function b(e,t){if("parseAsync"in e&&"function"==typeof e.parseAsync)return async r=>e.parseAsync(r.json,t);if("parse"in e&&"function"==typeof e.parse)return async r=>e.parse(r.json,t);throw TypeError("Invalid schema")}t.fetchJsonZodProcessor=b},72869:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.timedFetch=void 0,t.loggedFetch=function({fetch:e=globalThis.fetch,logRequest:t=!0,logResponse:r=!0,logError:n=!0}){let i=!0===t?async e=>{let t=await (0,o.stringifyMessage)(e);console.info(`> ${e.method} ${e.url}
${(0,o.padLines)(t,"  ")}`)}:t||void 0,s=!0===r?async e=>{let t=await (0,o.stringifyMessage)(e.clone());console.info(`< HTTP/1.1 ${e.status} ${e.statusText}
${(0,o.padLines)(t,"  ")}`)}:r||void 0,l=!0===n?async e=>{console.error("< Error:",e)}:n||void 0;return i||s||l?(0,a.toRequestTransformer)(async function(t){i&&await i(t);try{let r=await e.call(this,t);return s&&await s(r,t),r}catch(e){throw l&&await l(e,t),e}}):e},t.bindFetch=function(e=globalThis.fetch,t=globalThis){return(0,a.toRequestTransformer)(async r=>{try{return await e.call(t,r)}catch(e){throw n.FetchRequestError.from(r,e)}})};let n=r(77635),a=r(95672),i=r(71607),o=r(43469);t.timedFetch=(e=6e4,t=globalThis.fetch)=>{if(e===1/0)return t;if(!Number.isFinite(e)||e<=0)throw TypeError("Timeout must be positive");return(0,a.toRequestTransformer)(async function(r){let n=new AbortController,a=n.signal,o=()=>{n.abort()},s=()=>{clearTimeout(l),r.signal?.removeEventListener("abort",o)},l=setTimeout(o,e);"object"==typeof l&&l.unref?.(),r.signal?.addEventListener("abort",o),a.addEventListener("abort",s);let d=await t.call(this,r,{signal:a});if(!d.body)return s(),d;{let e=new TransformStream({flush:s});return new i.TransformedResponse(d,e)}})}},95672:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRequestTransformer=function(e){return function(t,n){return e.call(this,r(t,n))}},t.asRequest=r;function r(e,t){return!t&&e instanceof Request?e:new Request(e,t)}},31285:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(42460),t),a(r(77635),t),a(r(81783),t),a(r(72869),t),a(r(95672),t),a(r(43469),t)},71607:function(e,t){var r,n=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.TransformedResponse=void 0;class i extends Response{constructor(e,t){if(!e.body)throw TypeError("Response body is not available");if(e.bodyUsed)throw TypeError("Response body is already used");super(e.body.pipeThrough(t),{status:e.status,statusText:e.statusText,headers:e.headers}),r.set(this,void 0),n(this,r,e,"f")}get url(){return a(this,r,"f").url}get redirected(){return a(this,r,"f").redirected}get type(){return a(this,r,"f").type}get statusText(){return a(this,r,"f").statusText}}t.TransformedResponse=i,r=new WeakMap},43469:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extractUrl=t.MaxBytesTransformStream=t.ifString=void 0,t.isIp=function(e){return!!(e.match(/^\d+\.\d+\.\d+\.\d+$/)||e.startsWith("[")&&e.endsWith("]"))},t.padLines=function(e,t){return e?t+e.replace(n,`$&${t}`):e},t.cancelBody=a,t.logCancellationError=i,t.stringifyMessage=o,t.ifString=e=>"string"==typeof e?e:void 0;class r extends TransformStream{constructor(e){if(!(e>=0))throw TypeError("maxBytes must be a non-negative number");let t=0;super({transform:(r,n)=>{(t+=r.length)<=e?n.enqueue(r):n.error(Error("Response too large"))}})}}t.MaxBytesTransformStream=r;let n=/\r?\n/g;async function a(e,t){!e.body||e.bodyUsed||e.body.locked||"function"!=typeof e.body.cancel||("function"==typeof t?e.body.cancel().catch(t):"log"===t?e.body.cancel().catch(i):await e.body.cancel())}function i(e){console.warn("Failed to cancel response body",e)}async function o(e){try{var t;let r=(t=e.headers,Array.from(t).map(([e,t])=>`${e}: ${t}`).join("\n")),n=await s(e);return r&&n?`${r}
${n}`:r||n}finally{a(e,"log")}}async function s(e){try{let t=await e.blob();if(t.type?.startsWith("text/")){let e=await t.text();return JSON.stringify(e)}if(/application\/(?:\w+\+)?json/.test(t.type)){let e=await t.text();return e.includes("\n")?JSON.stringify(JSON.parse(e)):e}return`[Body size: ${t.size}, type: ${JSON.stringify(t.type)} ]`}catch{return"[Body could not be read]"}}t.extractUrl=e=>"string"==typeof e?new URL(e):e instanceof URL?e:new URL(e.url)},15620:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppViewHandleResolver=t.xrpcErrorSchema=void 0;let n=r(96625),a=r(94351);t.xrpcErrorSchema=n.z.object({error:n.z.string(),message:n.z.string().optional()});class i{static from(e,t){return"string"==typeof e||e instanceof URL?new i(e,t):e}constructor(e,t){Object.defineProperty(this,"serviceUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serviceUrl=new URL(e),this.fetch=t?.fetch??globalThis.fetch}async resolve(e,r){let n=new URL("/xrpc/com.atproto.identity.resolveHandle",this.serviceUrl);n.searchParams.set("handle",e);let i=await this.fetch.call(null,n,{cache:r?.noCache?"no-cache":void 0,signal:r?.signal,redirect:"error"}),o=await i.json();if(400===i.status){let e=t.xrpcErrorSchema.parse(o);if("InvalidRequest"===e.error&&"Unable to resolve handle"===e.message)return null}if(!i.ok)throw TypeError("Invalid response from resolveHandle method");let s=o?.did;if(!(0,a.isResolvedHandle)(s))throw TypeError("Invalid DID returned from resolveHandle method");return s}}t.AppViewHandleResolver=i},73516:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AtprotoDohHandleResolver=void 0;let n=r(92923);class a extends n.AtprotoHandleResolver{constructor(e){super({...e,resolveTxt:function({dohEndpoint:e,fetch:t=globalThis.fetch}){return async r=>{let n=new URL(e);n.searchParams.set("type","TXT"),n.searchParams.set("name",r);let a=await t(n,{method:"GET",headers:{accept:"application/dns-json"},redirect:"follow"});try{let e=a.headers.get("content-type")?.trim();if(a.ok){if(e?.match(/application\/(dns-)?json/i)==null)throw TypeError("Unexpected response from DoH server")}else{let t=e?.startsWith("text/plain")?await a.text():`Failed to resolve ${r}`;throw TypeError(t)}let t=function(e){var t;if("object"==typeof e&&null!==e&&"Status"in e&&"number"==typeof e.Status&&(!("Answer"in e)||(t=e.Answer,Array.isArray(t)&&t.every(o))))return e;throw TypeError("Invalid DoH response")}(await a.json());return t.Answer?.filter(s).map(l)??null}finally{!1===a.bodyUsed&&a.body?.cancel().catch(i)}}}(e),resolveTxtFallback:void 0})}}function i(e){e instanceof DOMException&&"AbortError"===e.name||console.error("An error occurred while cancelling the response body:",e)}function o(e){return"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"type"in e&&"number"==typeof e.type&&"data"in e&&"string"==typeof e.data&&"TTL"in e&&"number"==typeof e.TTL}function s(e){return 16===e.type}function l(e){return e.data.replace(/^"|"$/g,"").replace(/\\"/g,'"')}t.AtprotoDohHandleResolver=a},92923:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AtprotoHandleResolver=void 0;let n=r(93285),a=r(52841),i=()=>{};class o{constructor(e){Object.defineProperty(this,"httpResolver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dnsResolver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dnsResolverFallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.httpResolver=new a.WellKnownHandleResolver(e),this.dnsResolver=new n.DnsHandleResolver(e.resolveTxt),this.dnsResolverFallback=e.resolveTxtFallback?new n.DnsHandleResolver(e.resolveTxtFallback):void 0}async resolve(e,t){t?.signal?.throwIfAborted();let r=new AbortController,{signal:n}=r;t?.signal?.addEventListener("abort",()=>r.abort(),{signal:n});let a={...t,signal:n};try{let t=this.dnsResolver.resolve(e,a),r=this.httpResolver.resolve(e,a);r.catch(i);let o=await t;if(o)return o;n.throwIfAborted();let s=await r;if(s)return s;return n.throwIfAborted(),this.dnsResolverFallback?.resolve(e,a)??null}finally{r.abort()}}}t.AtprotoHandleResolver=o},56821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CachedHandleResolver=void 0;let n=r(2032),a=r(79993);class i{constructor(e,t=new a.SimpleStoreMemory({max:1e3,ttl:6e5})){Object.defineProperty(this,"getter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.getter=new n.CachedGetter((t,r)=>e.resolve(t,r),t)}async resolve(e,t){return this.getter.get(e,t)}}t.CachedHandleResolver=i},95563:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(94351),t),a(r(15620),t),a(r(73516),t),a(r(92923),t),a(r(56821),t)},93285:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DnsHandleResolver=void 0;let n=r(94351),a="did=";class i{constructor(e){Object.defineProperty(this,"resolveTxt",{enumerable:!0,configurable:!0,writable:!0,value:e})}async resolve(e){let t=await this.resolveTxt.call(null,`_atproto.${e}`);if(!t)return null;for(let e=0;e<t.length;e++){if(!t[e].startsWith(a))continue;for(let r=e+1;r<t.length;r++)if(t[r].startsWith(a))return null;let r=t[e].slice(a.length);return(0,n.isResolvedHandle)(r)?r:null}return null}}t.DnsHandleResolver=i},52841:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WellKnownHandleResolver=void 0;let n=r(94351);class a{constructor(e){Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fetch=e?.fetch??globalThis.fetch}async resolve(e,t){let r=new URL("/.well-known/atproto-did",`https://${e}`);try{let e=await this.fetch.call(null,r,{cache:t?.noCache?"no-cache":void 0,signal:t?.signal,redirect:"error"}),a=(await e.text()).split("\n")[0].trim();if((0,n.isResolvedHandle)(a))return a;return null}catch(e){return t?.signal?.throwIfAborted(),null}}}t.WellKnownHandleResolver=a},94351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isResolvedHandle=function(e){return null===e||(0,n.isAtprotoDid)(e)};let n=r(77964)},91032:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityResolver=void 0;let n=r(68227),a=r(95563);class i{constructor(e,t){Object.defineProperty(this,"didResolver",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handleResolver",{enumerable:!0,configurable:!0,writable:!0,value:t})}async resolve(e,t){let r=(0,a.isResolvedHandle)(e)?await this.getDocumentFromDid(e,t):await this.getDocumentFromHandle(e,t),n=r.service?.find(o,r);if(!n)throw TypeError(`No valid "AtprotoPersonalDataServer" service found in "${r.id}" DID document`);return{did:r.id,pds:new URL(n.serviceEndpoint)}}async getDocumentFromDid(e,t){return this.didResolver.resolve(e,t)}async getDocumentFromHandle(e,t){let r=(0,n.normalizeAndEnsureValidHandle)(e),a=await this.handleResolver.resolve(r,t);if(!a)throw TypeError(`Handle "${r}" does not resolve to a DID`);t?.signal?.throwIfAborted();let i=await this.didResolver.resolve(a,t);if(!i.alsoKnownAs?.includes(`at://${r}`))throw TypeError(`Did document for "${a}" does not include the handle "${r}"`);return i}}function o(e){return"string"==typeof e.serviceEndpoint&&"AtprotoPersonalDataServer"===e.type&&(e.id.startsWith("#")?"#atproto_pds"===e.id:e.id===`${this.id}#atproto_pds`)}t.IdentityResolver=i},63297:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(91032),t)},53749:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pipeTwo=t.pipe=void 0;var n=r(81001);Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return n.pipe}}),Object.defineProperty(t,"pipeTwo",{enumerable:!0,get:function(){return n.pipeTwo}})},81001:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pipe=function(...e){return e.reduce(r)},t.pipeTwo=r;function r(e,t){return async(...r)=>t(await e(...r))}},79993:function(e,t,r){var n,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleStoreMemory=void 0;let o=r(27168),s=r(74669),l=Symbol("nullItem"),d=e=>null===e?l:e,u=e=>e===l?null:e;class c{constructor({sizeCalculation:e,...t}){n.set(this,void 0),a(this,n,new o.LRUCache({...t,allowStale:!1,updateAgeOnGet:!1,updateAgeOnHas:!1,sizeCalculation:e?(t,r)=>e(u(t),r):null!=t.maxEntrySize||null!=t.maxSize?s.roughSizeOfObject:void 0}),"f")}get(e){let t=i(this,n,"f").get(e);if(void 0!==t)return u(t)}set(e,t){i(this,n,"f").set(e,d(t))}del(e){i(this,n,"f").delete(e)}clear(){i(this,n,"f").clear()}}t.SimpleStoreMemory=c,n=new WeakMap},74669:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.roughSizeOfObject=function(e){let t=new Set,n=[e],a=0;for(;n.length;){let e=n.pop();switch(typeof e){case"string":a+=12+4*Math.ceil(e.length/4);break;case"number":a+=12;break;case"boolean":a+=4;break;case"object":if(a+=4,null===e)break;if(r.has(e)){a+=r.get(e);break}if(t.has(e))continue;if(t.add(e),Array.isArray(e))a+=4,n.push(...e);else{a+=8;let t=Object.getOwnPropertyNames(e);for(let r=0;r<t.length;r++){a+=4;let i=t[r],o=e[i];void 0!==o&&n.push(o),n.push(i)}}break;case"function":case"symbol":a+=8;break;case"bigint":a+=16}}return"object"==typeof e&&null!==e&&r.set(e,a),a};let r=new WeakMap},89283:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CachedGetter=void 0;let r=()=>!0,n=()=>!1;class a{constructor(e,t,r){Object.defineProperty(this,"getter",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"pending",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}async get(e,t={}){let a;t.signal?.throwIfAborted();let i=this.options?.isStale,o=t.noCache?n:t.allowStale||null==i?r:async t=>!await i(e,t);for(;a=this.pending.get(e);){try{let{isFresh:e,value:t}=await a;if(e||await o(t))return t}catch{}t.signal?.throwIfAborted()}let s=Promise.resolve().then(async()=>{let r=await this.getStored(e,t);return void 0!==r&&await o(r)?{isFresh:!1,value:r}:Promise.resolve().then(async()=>(0,this.getter)(e,t,r)).catch(async t=>{if(void 0!==r)try{let n=this.options?.deleteOnError;await n?.(t,e,r)&&await this.delStored(e,t)}catch(e){throw AggregateError([t,e],"Error while deleting stored value")}throw t}).then(async t=>(await this.setStored(e,t),{isFresh:!0,value:t}))}).finally(()=>{this.pending.delete(e)});if(this.pending.has(e))throw Error("Concurrent request for the same key");this.pending.set(e,s);let{value:l}=await s;return l}async getStored(e,t){try{return await this.store.get(e,t)}catch(e){return}}async setStored(e,t){try{await this.store.set(e,t)}catch(n){let r=this.options?.onStoreError;await r?.(n,e,t)}}async delStored(e,t){await this.store.del(e)}}t.CachedGetter=a},2032:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(89283),t),a(r(874),t)},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},37098:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.atprotoDidSchema=void 0,t.isAtprotoDid=o,t.asAtprotoDid=function(e){return s(e),e},t.assertAtprotoDid=s,t.assertAtprotoDidWeb=l,t.isAtprotoDidWeb=d;let n=r(96625),a=r(67130),i=r(97097);function o(e){return"string"==typeof e&&(e.startsWith(i.DID_PLC_PREFIX)?(0,i.isDidPlc)(e):!!e.startsWith(i.DID_WEB_PREFIX)&&d(e))}function s(e){if("string"!=typeof e)throw new a.InvalidDidError(typeof e,"DID must be a string");if(e.startsWith(i.DID_PLC_PREFIX))(0,i.assertDidPlc)(e);else if(e.startsWith(i.DID_WEB_PREFIX))l(e);else throw new a.InvalidDidError(e,'Atproto only allows "plc" and "web" DID methods')}function l(e){if((0,i.assertDidWeb)(e),e.includes(":",i.DID_WEB_PREFIX.length))throw new a.InvalidDidError(e,"Atproto does not allow path components in Web DIDs");if(e.includes("%3A",i.DID_WEB_PREFIX.length)&&!e.startsWith("did:web:localhost%3A"))throw new a.InvalidDidError(e,"Atproto does not allow port numbers in Web DIDs, except for localhost")}function d(e){try{return l(e),!0}catch{return!1}}t.atprotoDidSchema=n.z.string().refine(o,'Atproto only allows "plc" and "web" DID methods')},76386:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.didDocumentValidator=t.didDocumentSchema=void 0;let n=r(96625),a=r(54582),i=n.z.string().refine(e=>{try{return new URL(e),!0}catch{return!1}},"RFC3968 compliant URI"),o=n.z.union([a.didSchema,n.z.array(a.didSchema)]),s=n.z.union([i,n.z.string().regex(/^#[^#]+$/)]),l=n.z.object({id:s,type:n.z.string().min(1),controller:o,publicKeyJwk:n.z.record(n.z.string(),n.z.unknown()).optional(),publicKeyMultibase:n.z.string().optional()}),d=n.z.union([n.z.string(),n.z.array(n.z.string())]),u=n.z.union([i,n.z.record(n.z.string(),i),n.z.array(n.z.union([i,n.z.record(n.z.string(),i)])).nonempty()]),c=n.z.object({id:s,type:d,serviceEndpoint:u}),h=n.z.union([s,l]);t.didDocumentSchema=n.z.object({"@context":n.z.union([n.z.literal("https://www.w3.org/ns/did/v1"),n.z.array(n.z.string().url()).nonempty().refine(e=>"https://www.w3.org/ns/did/v1"===e[0],{message:"First @context must be https://www.w3.org/ns/did/v1"})]),id:a.didSchema,controller:o.optional(),alsoKnownAs:n.z.array(i).optional(),service:n.z.array(c).optional(),authentication:n.z.array(h).optional(),verificationMethod:n.z.array(n.z.union([l,s])).optional()}),t.didDocumentValidator=t.didDocumentSchema.superRefine(({id:e,service:t},r)=>{if(t){let a=new Set;for(let i=0;i<t.length;i++){let o=t[i],s=o.id.startsWith("#")?`${e}${o.id}`:o.id;a.has(s)?r.addIssue({code:n.z.ZodIssueCode.custom,message:`Duplicate service id (${o.id}) found in the document`,path:["service",i,"id"]}):a.add(s)}}})},67130:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidDidError=t.DidError=void 0;class r extends Error{constructor(e,t,r,n=400,a){super(t,{cause:a}),Object.defineProperty(this,"did",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:n})}get statusCode(){return this.status}toString(){return`${this.constructor.name} ${this.code} (${this.did}): ${this.message}`}static from(e,t){return e instanceof r?e:new r(t,e instanceof Error?e.message:"string"==typeof e?e:"An unknown error occurred","did-unknown-error",("number"==typeof e?.statusCode?e.statusCode:void 0)??("number"==typeof e?.status?e.status:void 0),e)}}t.DidError=r;class n extends r{constructor(e,t,r){super(e,t,"did-invalid",400,r)}}t.InvalidDidError=n},54582:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.didSchema=t.DID_PREFIX=void 0,t.assertDidMethod=s,t.extractDidMethod=function(e){let t=e.indexOf(":",o);return e.slice(o,t)},t.assertDidMsid=l,t.assertDid=d,t.isDid=function(e){try{return d(e),!0}catch(e){if(e instanceof a.DidError)return!1;throw e}},t.asDid=function(e){return d(e),e};let n=r(96625),a=r(67130),i="did:";t.DID_PREFIX=i;let o=i.length;function s(e,t=0,r=e.length){let n;if(!Number.isFinite(r)||!Number.isFinite(t)||r<t||r>e.length)throw TypeError("Invalid start or end position");if(r===t)throw new a.InvalidDidError(e,"Empty method name");for(let i=t;i<r;i++)if(((n=e.charCodeAt(i))<97||n>122)&&(n<48||n>57))throw new a.InvalidDidError(e,`Invalid character at position ${i} in DID method name`)}function l(e,t=0,r=e.length){let n;if(!Number.isFinite(r)||!Number.isFinite(t)||r<t||r>e.length)throw TypeError("Invalid start or end position");if(r===t)throw new a.InvalidDidError(e,"DID method-specific id must not be empty");for(let i=t;i<r;i++)if(((n=e.charCodeAt(i))<97||n>122)&&(n<65||n>90)&&(n<48||n>57)&&46!==n&&45!==n&&95!==n){if(58===n){if(i===r-1)throw new a.InvalidDidError(e,'DID cannot end with ":"');continue}if(37===n){if(((n=e.charCodeAt(++i))<48||n>57)&&(n<65||n>70)||((n=e.charCodeAt(++i))<48||n>57)&&(n<65||n>70))throw new a.InvalidDidError(e,`Invalid pct-encoded character at position ${i}`);if(i>=r)throw new a.InvalidDidError(e,`Incomplete pct-encoded character at position ${i-2}`);continue}throw new a.InvalidDidError(e,`Disallowed character in DID at position ${i}`)}}function d(e){if("string"!=typeof e)throw new a.InvalidDidError(typeof e,"DID must be a string");let{length:t}=e;if(t>2048)throw new a.InvalidDidError(e,"DID is too long (2048 chars max)");if(!e.startsWith(i))throw new a.InvalidDidError(e,`DID requires "${i}" prefix`);let r=e.indexOf(":",o);if(-1===r)throw new a.InvalidDidError(e,"Missing colon after method name");s(e,o,r),l(e,r+1,t)}t.didSchema=n.z.string().superRefine((e,t)=>{try{return d(e),!0}catch(e){return t.addIssue({code:n.z.ZodIssueCode.custom,message:e instanceof Error?e.message:"Unexpected error"}),!1}})},77964:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(37098),t),a(r(76386),t),a(r(67130),t),a(r(54582),t),a(r(97097),t)},97097:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(29979),t),a(r(79322),t)},29979:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DID_PLC_PREFIX=void 0,t.isDidPlc=function(e){if("string"!=typeof e||32!==e.length||!e.startsWith(a))return!1;for(let t=i;t<32;t++)if(!s(e.charCodeAt(t)))return!1;return!0},t.asDidPlc=function(e){return o(e),e},t.assertDidPlc=o;let n=r(67130),a="did:plc:";t.DID_PLC_PREFIX=a;let i=a.length;function o(e){if("string"!=typeof e)throw new n.InvalidDidError(typeof e,"DID must be a string");if(!e.startsWith(a))throw new n.InvalidDidError(e,"Invalid did:plc prefix");if(32!==e.length)throw new n.InvalidDidError(e,"did:plc must be 32 characters long");for(let t=i;t<32;t++)if(!s(e.charCodeAt(t)))throw new n.InvalidDidError(e,`Invalid character at position ${t}`)}let s=e=>e>=97&&e<=122||e>=50&&e<=55},79322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DID_WEB_PREFIX=void 0,t.isDidWeb=function(e){if("string"!=typeof e||!e.startsWith(t.DID_WEB_PREFIX)||":"===e.charAt(t.DID_WEB_PREFIX.length))return!1;try{return o(e),!0}catch{return!1}},t.asDidWeb=function(e){return i(e),e},t.assertDidWeb=i,t.didWebToUrl=o,t.urlToDidWeb=function(e){let t=e.port?`%3A${e.port}`:"",r="/"===e.pathname?"":e.pathname.replaceAll("/",":");return`did:web:${e.hostname}${t}${r}`};let n=r(67130),a=r(54582);function i(e){if("string"!=typeof e)throw new n.InvalidDidError(typeof e,"DID must be a string");if(!e.startsWith(t.DID_WEB_PREFIX))throw new n.InvalidDidError(e,"Invalid did:web prefix");if(":"===e.charAt(t.DID_WEB_PREFIX.length))throw new n.InvalidDidError(e,"did:web MSID must not start with a colon");o(e)}function o(e){(0,a.assertDidMsid)(e,t.DID_WEB_PREFIX.length);let r=t.DID_WEB_PREFIX.length,i=e.indexOf(":",r),o=-1===i?e.slice(r):e.slice(r,i),s=-1===i?"":e.slice(i);try{let e=new URL(`https://${o.replaceAll("%3A",":")}${s.replaceAll(":","/")}`);return"localhost"===e.hostname&&(e.protocol="http:"),e}catch(t){throw new n.InvalidDidError(e,"Invalid Web DID",t)}}t.DID_WEB_PREFIX="did:web:"},67001:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(16681),t)},16681:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JoseKey=void 0;let n=r(55547),a=r(16516),i=r(78403),{JOSEError:o}=n.errors;class s extends a.Key{async getKeyObj(e){if(!this.algorithms.includes(e))throw new a.JwkError(`Key cannot be used with algorithm "${e}"`);try{return await (0,n.importJWK)(this.jwk,e)}catch(e){throw new a.JwkError("Failed to import JWK",void 0,{cause:e})}}async createJwt(e,t){try{let{kid:r}=e;if(r&&r!==this.kid)throw new a.JwtCreateError(`Invalid "kid" (${r}) used to sign with key "${this.kid}"`);let{alg:i}=e;if(!i)throw new a.JwtCreateError('Missing "alg" in JWT header');let o=await this.getKeyObj(i),s=new n.SignJWT(t).setProtectedHeader({...e,alg:i,kid:this.kid});return await s.sign(o)}catch(e){if(e instanceof o)throw new a.JwtCreateError(e.message,e.code,{cause:e});throw a.JwtCreateError.from(e)}}async verifyJwt(e,t){try{let r=await (0,n.jwtVerify)(e,async({alg:e})=>this.getKeyObj(e),{...t,algorithms:this.algorithms}),i=a.jwtHeaderSchema.safeParse(r.protectedHeader);if(!i.success)throw new a.JwtVerifyError("Invalid JWT header",void 0,{cause:i.error});let o=a.jwtPayloadSchema.safeParse(r.payload);if(!o.success)throw new a.JwtVerifyError("Invalid JWT payload",void 0,{cause:o.error});return{protectedHeader:i.data,payload:o.data}}catch(e){if(e instanceof o)throw new a.JwtVerifyError(e.message,e.code,{cause:e});throw a.JwtVerifyError.from(e)}}static async generateKeyPair(e=["ES256"],t){if(!e.length)throw new a.JwkError("No algorithms provided for key generation");let r=[];for(let a of e)try{return await (0,n.generateKeyPair)(a,t)}catch(e){r.push(e)}throw new a.JwkError("Failed to generate key pair",void 0,{cause:AggregateError(r,"None of the algorithms worked")})}static async generate(e=["ES256"],t,r){let n=await this.generateKeyPair(e,{...r,extractable:!0});return this.fromImportable(n.privateKey,t)}static async fromImportable(e,t){if("string"==typeof e){if(e.startsWith("-----"))return this.fromPKCS8(e,"",t);if(e.startsWith("{"))return this.fromJWK(e,t);throw new a.JwkError("Invalid input")}if("object"==typeof e)return"kty"in e||"alg"in e?this.fromJWK(e,t):this.fromKeyLike(e,t);throw new a.JwkError("Invalid input")}static async fromKeyLike(e,t,r){let i=await (0,n.exportJWK)(e);if(r){if(i.alg){if(i.alg!==r)throw new a.JwkError('Invalid "alg" in JWK')}else i.alg=r}return this.fromJWK(i,t)}static async fromPKCS8(e,t,r){let a=await (0,n.importPKCS8)(e,t,{extractable:!0});return this.fromKeyLike(a,r)}static async fromJWK(e,t){let r="string"==typeof e?JSON.parse(e):e;if(!r||"object"!=typeof r)throw new a.JwkError("Invalid JWK");let n=(0,i.either)(r.kid,t),o=r.use||"sig";return new s(a.jwkValidator.parse({...r,kid:n,use:o}))}}t.JoseKey=s},78403:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.either=function(e,t){if(null!=e&&null!=t&&e!==t)throw TypeError(`Expected "${t}", got "${e}"`);return e??t??void 0}},39446:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(45999),t)},88617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toSubtleAlgorithm=function(e,t,r){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,modulusLength:r?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,modulusLength:r?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};default:throw TypeError(`Unsupported alg "${e}"`)}},t.fromSubtleAlgorithm=function(e){switch(e.name){case"RSA-PSS":case"RSASSA-PKCS1-v1_5":{let t=e.hash.name;switch(t){case"SHA-256":case"SHA-384":case"SHA-512":{let r="RSA-PSS"===e.name?"PS":"RS";return`${r}${t.slice(-3)}`}default:throw TypeError("unsupported RsaHashedKeyAlgorithm hash")}}case"ECDSA":{let t=e.namedCurve;switch(t){case"P-256":case"P-384":case"P-512":return`ES${t.slice(-3)}`;case"P-521":return"ES512";default:throw TypeError("unsupported EcKeyAlgorithm namedCurve")}}case"Ed448":case"Ed25519":return"EdDSA";default:throw TypeError(`Unexpected algorithm "${e.name}"`)}},t.isCryptoKeyPair=function(e,t){return"object"==typeof e&&null!==e&&"privateKey"in e&&e.privateKey instanceof CryptoKey&&"private"===e.privateKey.type&&(null==t||e.privateKey.extractable===t)&&e.privateKey.usages.includes("sign")&&"publicKey"in e&&e.publicKey instanceof CryptoKey&&"public"===e.publicKey.type&&!0===e.publicKey.extractable&&e.publicKey.usages.includes("verify")}},45999:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebcryptoKey=t.jwkWithAlgSchema=void 0;let n=r(96625),a=r(16516),i=r(67001),o=r(88617);t.jwkWithAlgSchema=n.z.intersection(a.jwkSchema,n.z.object({alg:n.z.string()}));class s extends i.JoseKey{static async generate(e=["ES256"],t=crypto.randomUUID(),r){let n=await this.generateKeyPair(e,r);if(!(0,o.isCryptoKeyPair)(n))throw TypeError("Invalid CryptoKeyPair");return this.fromKeypair(n,t)}static async fromKeypair(e,r){let{key_ops:n,use:a,alg:i=(0,o.fromSubtleAlgorithm)(e.privateKey.algorithm),...l}=await crypto.subtle.exportKey("jwk",e.privateKey.extractable?e.privateKey:e.publicKey);if(a&&"sig"!==a)throw TypeError(`Unsupported JWK use "${a}"`);if(n&&!n.some(e=>"sign"===e||"verify"===e))throw TypeError(`Invalid key_ops "${n}" for "sig" use`);return new s(t.jwkWithAlgSchema.parse({...l,kid:r,alg:i,use:"sig"}),e)}constructor(e,t){super(e),Object.defineProperty(this,"cryptoKeyPair",{enumerable:!0,configurable:!0,writable:!0,value:t})}get isPrivate(){return!0}get privateJwk(){if(super.isPrivate)return this.jwk;throw Error("Private Webcrypto Key not exportable")}async getKeyObj(e){if(this.jwk.alg!==e)throw new a.JwkError(`Key cannot be used with algorithm "${e}"`);return this.cryptoKeyPair.privateKey}}t.WebcryptoKey=s},59226:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwkAlgorithms=function*(e){if(e.alg){yield e.alg;return}switch(e.kty){case"EC":if(("enc"===e.use||void 0===e.use)&&(yield"ECDH-ES",yield"ECDH-ES+A128KW",yield"ECDH-ES+A192KW",yield"ECDH-ES+A256KW"),"sig"===e.use||void 0===e.use){let t="crv"in e?e.crv:void 0;switch(t){case"P-256":case"P-384":yield`ES${t.slice(-3)}`;break;case"P-521":yield"ES512";break;case"secp256k1":i&&(yield"ES256K");break;default:throw new n.JwkError(`Unsupported crv "${t}"`)}}return;case"OKP":if(!e.use)throw new n.JwkError('Missing "use" Parameter value');yield"ECDH-ES",yield"ECDH-ES+A128KW",yield"ECDH-ES+A192KW",yield"ECDH-ES+A256KW";return;case"RSA":("enc"===e.use||void 0===e.use)&&(yield"RSA-OAEP",yield"RSA-OAEP-256",yield"RSA-OAEP-384",yield"RSA-OAEP-512",i&&(yield"RSA1_5")),("sig"===e.use||void 0===e.use)&&(yield"PS256",yield"PS384",yield"PS512",yield"RS256",yield"RS384",yield"RS512");return;case"oct":("enc"===e.use||void 0===e.use)&&(yield"A128GCMKW",yield"A192GCMKW",yield"A256GCMKW",yield"A128KW",yield"A192KW",yield"A256KW"),("sig"===e.use||void 0===e.use)&&(yield"HS256",yield"HS384",yield"HS512");return;default:throw new n.JwkError(`Unsupported kty "${e.kty}"`)}};let n=r(58724),{process:a}=globalThis,i=void 0!==a&&"string"==typeof a?.versions?.node},58724:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JwtVerifyError=t.JwtCreateError=t.JwkError=t.ERR_JWT_VERIFY=t.ERR_JWT_CREATE=t.ERR_JWT_INVALID=t.ERR_JWK_NOT_FOUND=t.ERR_JWK_INVALID=t.ERR_JWKS_NO_MATCHING_KEY=void 0,t.ERR_JWKS_NO_MATCHING_KEY="ERR_JWKS_NO_MATCHING_KEY",t.ERR_JWK_INVALID="ERR_JWK_INVALID",t.ERR_JWK_NOT_FOUND="ERR_JWK_NOT_FOUND",t.ERR_JWT_INVALID="ERR_JWT_INVALID",t.ERR_JWT_CREATE="ERR_JWT_CREATE",t.ERR_JWT_VERIFY="ERR_JWT_VERIFY";class r extends TypeError{constructor(e="JWK error",r=t.ERR_JWK_INVALID,n){super(e,n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:r})}}t.JwkError=r;class n extends Error{constructor(e="Unable to create JWT",r=t.ERR_JWT_CREATE,n){super(e,n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:r})}static from(e,t,a){return e instanceof n?e:e instanceof r?new n(a,e.code,{cause:e}):new n(a,t,{cause:e})}}t.JwtCreateError=n;class a extends Error{constructor(e="Invalid JWT",r=t.ERR_JWT_VERIFY,n){super(e,n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:r})}static from(e,t,n){return e instanceof a?e:e instanceof r?new a(n,e.code,{cause:e}):new a(n,t,{cause:e})}}t.JwtVerifyError=a},16516:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationError=void 0;var i=r(96625);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return i.ZodError}}),a(r(59226),t),a(r(58724),t),a(r(21091),t),a(r(83885),t),a(r(77344),t),a(r(43036),t),a(r(30925),t),a(r(59560),t),a(r(95182),t),a(r(6708),t)},21091:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwkPubSchema=t.jwkValidator=t.jwkSchema=t.jwkUnknownKeySchema=t.jwkSymKeySchema=t.jwkOkpKeySchema=t.jwkEcSecp256k1KeySchema=t.jwkEcKeySchema=t.jwkRsaKeySchema=t.jwkBaseSchema=t.keyUsageSchema=void 0;let n=r(96625);t.keyUsageSchema=n.z.enum(["sign","verify","encrypt","decrypt","wrapKey","unwrapKey","deriveKey","deriveBits"]),t.jwkBaseSchema=n.z.object({kty:n.z.string().min(1),alg:n.z.string().min(1).optional(),kid:n.z.string().min(1).optional(),ext:n.z.boolean().optional(),use:n.z.enum(["sig","enc"]).optional(),key_ops:n.z.array(t.keyUsageSchema).optional(),x5c:n.z.array(n.z.string()).optional(),x5t:n.z.string().min(1).optional(),"x5t#S256":n.z.string().min(1).optional(),x5u:n.z.string().url().optional()}),t.jwkRsaKeySchema=t.jwkBaseSchema.extend({kty:n.z.literal("RSA"),alg:n.z.enum(["RS256","RS384","RS512","PS256","PS384","PS512"]).optional(),n:n.z.string().min(1),e:n.z.string().min(1),d:n.z.string().min(1).optional(),p:n.z.string().min(1).optional(),q:n.z.string().min(1).optional(),dp:n.z.string().min(1).optional(),dq:n.z.string().min(1).optional(),qi:n.z.string().min(1).optional(),oth:n.z.array(n.z.object({r:n.z.string().optional(),d:n.z.string().optional(),t:n.z.string().optional()})).nonempty().optional()}),t.jwkEcKeySchema=t.jwkBaseSchema.extend({kty:n.z.literal("EC"),alg:n.z.enum(["ES256","ES384","ES512"]).optional(),crv:n.z.enum(["P-256","P-384","P-521"]),x:n.z.string().min(1),y:n.z.string().min(1),d:n.z.string().min(1).optional()}),t.jwkEcSecp256k1KeySchema=t.jwkBaseSchema.extend({kty:n.z.literal("EC"),alg:n.z.enum(["ES256K"]).optional(),crv:n.z.enum(["secp256k1"]),x:n.z.string().min(1),y:n.z.string().min(1),d:n.z.string().min(1).optional()}),t.jwkOkpKeySchema=t.jwkBaseSchema.extend({kty:n.z.literal("OKP"),alg:n.z.enum(["EdDSA"]).optional(),crv:n.z.enum(["Ed25519","Ed448"]),x:n.z.string().min(1),d:n.z.string().min(1).optional()}),t.jwkSymKeySchema=t.jwkBaseSchema.extend({kty:n.z.literal("oct"),alg:n.z.enum(["HS256","HS384","HS512"]).optional(),k:n.z.string()}),t.jwkUnknownKeySchema=t.jwkBaseSchema.extend({kty:n.z.string().refine(e=>"RSA"!==e&&"EC"!==e&&"OKP"!==e&&"oct"!==e)}),t.jwkSchema=n.z.union([t.jwkUnknownKeySchema,t.jwkRsaKeySchema,t.jwkEcKeySchema,t.jwkEcSecp256k1KeySchema,t.jwkOkpKeySchema,t.jwkSymKeySchema]),t.jwkValidator=t.jwkSchema.refine(e=>null!=e.use||null!=e.key_ops,"use or key_ops required").refine(e=>!e.use||!e.key_ops||e.key_ops.every(t=>"sig"===e.use?"sign"===t||"verify"===t:"encrypt"===t||"decrypt"===t),"use and key_ops must be consistent"),t.jwkPubSchema=t.jwkValidator.refine(e=>null!=e.kid,"kid is required").refine(e=>!("k"in e)&&!("d"in e),"private key not allowed")},83885:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwksPubSchema=t.jwksSchema=void 0;let n=r(96625),a=r(21091);t.jwksSchema=n.z.object({keys:n.z.array(a.jwkSchema)}),t.jwksPubSchema=n.z.object({keys:n.z.array(a.jwkPubSchema)})},77344:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeDecodeJwt=function(e){let{0:t,1:r,length:o}=e.split(".");if(o>3||o<2)throw new n.JwtVerifyError(void 0,n.ERR_JWT_INVALID);let s=a.jwtHeaderSchema.parse((0,i.parseB64uJson)(t));if(2===o&&s?.alg!=="none")throw new n.JwtVerifyError(void 0,n.ERR_JWT_INVALID);return{header:s,payload:a.jwtPayloadSchema.parse((0,i.parseB64uJson)(r))}};let n=r(58724),a=r(30925),i=r(6708)},43036:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},30925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwtPayloadSchema=t.jwtHeaderSchema=t.isUnsignedJwt=t.unsignedJwtSchema=t.isSignedJwt=t.signedJwtSchema=void 0;let n=r(96625),a=r(21091),i=r(6708);t.signedJwtSchema=n.z.string().superRefine(i.jwtCharsRefinement).superRefine((0,i.segmentedStringRefinementFactory)(3)),t.isSignedJwt=e=>t.signedJwtSchema.safeParse(e).success,t.unsignedJwtSchema=n.z.string().superRefine(i.jwtCharsRefinement).superRefine((0,i.segmentedStringRefinementFactory)(2)),t.isUnsignedJwt=e=>t.unsignedJwtSchema.safeParse(e).success,t.jwtHeaderSchema=n.z.object({alg:n.z.string(),jku:n.z.string().url().optional(),jwk:n.z.object({kty:n.z.string(),crv:n.z.string().optional(),x:n.z.string().optional(),y:n.z.string().optional(),e:n.z.string().optional(),n:n.z.string().optional()}).optional(),kid:n.z.string().optional(),x5u:n.z.string().optional(),x5c:n.z.array(n.z.string()).optional(),x5t:n.z.string().optional(),"x5t#S256":n.z.string().optional(),typ:n.z.string().optional(),cty:n.z.string().optional(),crit:n.z.array(n.z.string()).optional()}).passthrough(),t.jwtPayloadSchema=n.z.object({iss:n.z.string().optional(),aud:n.z.union([n.z.string(),n.z.array(n.z.string()).nonempty()]).optional(),sub:n.z.string().optional(),exp:n.z.number().int().optional(),nbf:n.z.number().int().optional(),iat:n.z.number().int().optional(),jti:n.z.string().optional(),htm:n.z.string().optional(),htu:n.z.string().optional(),ath:n.z.string().optional(),acr:n.z.string().optional(),azp:n.z.string().optional(),amr:n.z.array(n.z.string()).optional(),cnf:n.z.object({kid:n.z.string().optional(),jwk:a.jwkPubSchema.optional(),jwe:n.z.string().optional(),jku:n.z.string().url().optional(),jkt:n.z.string().optional(),"x5t#S256":n.z.string().optional(),osc:n.z.string().optional()}).optional(),client_id:n.z.string().optional(),scope:n.z.string().optional(),nonce:n.z.string().optional(),at_hash:n.z.string().optional(),c_hash:n.z.string().optional(),s_hash:n.z.string().optional(),auth_time:n.z.number().int().optional(),name:n.z.string().optional(),family_name:n.z.string().optional(),given_name:n.z.string().optional(),middle_name:n.z.string().optional(),nickname:n.z.string().optional(),preferred_username:n.z.string().optional(),gender:n.z.string().optional(),picture:n.z.string().url().optional(),profile:n.z.string().url().optional(),website:n.z.string().url().optional(),birthdate:n.z.string().regex(/\d{4}-\d{2}-\d{2}/).optional(),zoneinfo:n.z.string().regex(/^[A-Za-z0-9_/]+$/).optional(),locale:n.z.string().regex(/^[a-z]{2,3}(-[A-Z]{2})?$/).optional(),updated_at:n.z.number().int().optional(),email:n.z.string().optional(),email_verified:n.z.boolean().optional(),phone_number:n.z.string().optional(),phone_number_verified:n.z.boolean().optional(),address:n.z.object({formatted:n.z.string().optional(),street_address:n.z.string().optional(),locality:n.z.string().optional(),region:n.z.string().optional(),postal_code:n.z.string().optional(),country:n.z.string().optional()}).optional(),authorization_details:n.z.array(n.z.object({type:n.z.string(),locations:n.z.array(n.z.string()).optional(),actions:n.z.array(n.z.string()).optional(),datatypes:n.z.array(n.z.string()).optional(),identifier:n.z.string().optional(),privileges:n.z.array(n.z.string()).optional()}).passthrough()).optional()}).passthrough()},59560:function(e,t,r){let n,a,i,o;var s,l=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0},d=this&&this.__esDecorate||function(e,t,r,n,a,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=n.kind,d="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,c=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var y in n)f[y]="access"===y?{}:n[y];for(var y in n.access)f.access[y]=n.access[y];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var m=(0,r[p])("accessor"===l?{get:c.get,set:c.set}:c[d],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw TypeError("Object expected");(s=o(m.get))&&(c.get=s),(s=o(m.set))&&(c.set=s),(s=o(m.init))&&a.unshift(s)}else(s=o(m))&&("field"===l?a.unshift(s):c[d]=s)}u&&Object.defineProperty(u,n.name,c),h=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.Key=void 0;let u=r(59226),c=r(58724),h=r(21091),p=r(6708),f=h.jwkSchema.readonly(),y=(o=[],s=class{constructor(e){if(Object.defineProperty(this,"jwk",{enumerable:!0,configurable:!0,writable:!0,value:(l(this,o),e)}),!e.use)throw new c.JwkError('Missing "use" Parameter value')}get isPrivate(){let{jwk:e}=this;return"d"in e&&void 0!==e.d||"k"in e&&void 0!==e.k}get isSymetric(){let{jwk:e}=this;return"k"in e&&void 0!==e.k}get privateJwk(){return this.isPrivate?this.jwk:void 0}get publicJwk(){if(!this.isSymetric)return f.parse({...this.jwk,d:void 0,k:void 0})}get bareJwk(){if(this.isSymetric)return;let{kty:e,crv:t,e:r,n,x:a,y:i}=this.jwk;return f.parse({crv:t,e:r,kty:e,n,x:a,y:i})}get use(){return this.jwk.use}get alg(){return this.jwk.alg}get kid(){return this.jwk.kid}get crv(){return this.jwk.crv}get algorithms(){return Object.freeze(Array.from((0,u.jwkAlgorithms)(this.jwk)))}},(()=>{let e="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;n=[p.cachedGetter],a=[p.cachedGetter],i=[p.cachedGetter],d(s,null,n,{kind:"getter",name:"publicJwk",static:!1,private:!1,access:{has:e=>"publicJwk"in e,get:e=>e.publicJwk},metadata:e},null,o),d(s,null,a,{kind:"getter",name:"bareJwk",static:!1,private:!1,access:{has:e=>"bareJwk"in e,get:e=>e.bareJwk},metadata:e},null,o),d(s,null,i,{kind:"getter",name:"algorithms",static:!1,private:!1,access:{has:e=>"algorithms"in e,get:e=>e.algorithms},metadata:e},null,o),e&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})})(),s);t.Key=y},95182:function(e,t,r){let n,a,i,o;var s,l=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0},d=this&&this.__esDecorate||function(e,t,r,n,a,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=n.kind,d="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,c=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var y in n)f[y]="access"===y?{}:n[y];for(var y in n.access)f.access[y]=n.access[y];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var m=(0,r[p])("accessor"===l?{get:c.get,set:c.set}:c[d],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw TypeError("Object expected");(s=o(m.get))&&(c.get=s),(s=o(m.set))&&(c.set=s),(s=o(m.init))&&a.unshift(s)}else(s=o(m))&&("field"===l?a.unshift(s):c[d]=s)}u&&Object.defineProperty(u,n.name,c),h=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.Keyset=void 0;let u=r(58724),c=r(77344),h=r(6708),p=e=>e.privateJwk,f=e=>e.publicJwk,y=(o=[],s=class{constructor(e,t=e instanceof s?[...e.preferredSigningAlgorithms]:["EdDSA","ES256K","ES256","PS256","PS384","PS512","HS256","HS384","HS512"]){Object.defineProperty(this,"preferredSigningAlgorithms",{enumerable:!0,configurable:!0,writable:!0,value:(l(this,o),t)}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=[],n=new Set;for(let t of e)if(t&&(r.push(t),t.kid)){if(n.has(t.kid))throw new u.JwkError(`Duplicate key: ${t.kid}`);n.add(t.kid)}this.keys=Object.freeze(r)}get size(){return this.keys.length}get signAlgorithms(){let e=new Set;for(let t of this)if("sig"===t.use)for(let r of t.algorithms)e.add(r);return Object.freeze([...e].sort((0,h.preferredOrderCmp)(this.preferredSigningAlgorithms)))}get publicJwks(){return{keys:Array.from(this,f).filter(h.isDefined)}}get privateJwks(){return{keys:Array.from(this,p).filter(h.isDefined)}}has(e){return this.keys.some(t=>t.kid===e)}get(e){for(let t of this.list(e))return t;throw new u.JwkError(`Key not found ${e.kid||e.alg||"<unknown>"}`,u.ERR_JWK_NOT_FOUND)}*list(e){if(e.kid?.length!==0&&e.alg?.length!==0){for(let t of this)if(!e.use||t.use===e.use){if(Array.isArray(e.kid)){if(!t.kid||!e.kid.includes(t.kid))continue}else if(e.kid&&t.kid!==e.kid)continue;if(Array.isArray(e.alg)){if(!e.alg.some(e=>t.algorithms.includes(e)))continue}else if("string"==typeof e.alg&&!t.algorithms.includes(e.alg))continue;yield t}}}findKey({kid:e,alg:t,use:r}){let n=[];for(let a of this.list({kid:e,alg:t,use:r}))if(a.isPrivate){if("string"==typeof t)return[a,t];n.push(a)}let a=(0,h.matchesAny)(t),i=n.map(e=>[e,e.algorithms.filter(a)]);for(let e of this.preferredSigningAlgorithms)for(let[t,r]of i)if(r.includes(e))return[t,e];for(let[e,t]of i)for(let r of t)return[e,r];throw new u.JwkError(`No signing key found for ${e||t||r||"<unknown>"}`,u.ERR_JWK_NOT_FOUND)}[(n=[h.cachedGetter],a=[h.cachedGetter],i=[h.cachedGetter],Symbol.iterator)](){return this.keys.values()}async createJwt({alg:e,kid:t,...r},n){try{let[a,i]=this.findKey({alg:e,kid:t,use:"sig"}),o={...r,alg:i,kid:a.kid};return"function"==typeof n&&(n=await n(o,a)),await a.createJwt(o,n)}catch(e){throw u.JwtCreateError.from(e)}}async verifyJwt(e,t){let{header:r}=(0,c.unsafeDecodeJwt)(e),{kid:n,alg:a}=r,i=[];for(let r of this.list({kid:n,alg:a}))try{return{...await r.verifyJwt(e,t),key:r}}catch(e){i.push(e)}switch(i.length){case 0:throw new u.JwtVerifyError("No key matched",u.ERR_JWKS_NO_MATCHING_KEY);case 1:throw u.JwtVerifyError.from(i[0],u.ERR_JWT_INVALID);default:throw u.JwtVerifyError.from(i,u.ERR_JWT_INVALID)}}toJSON(){return structuredClone(this.publicJwks)}},(()=>{let e="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;d(s,null,n,{kind:"getter",name:"signAlgorithms",static:!1,private:!1,access:{has:e=>"signAlgorithms"in e,get:e=>e.signAlgorithms},metadata:e},null,o),d(s,null,a,{kind:"getter",name:"publicJwks",static:!1,private:!1,access:{has:e=>"publicJwks"in e,get:e=>e.publicJwks},metadata:e},null,o),d(s,null,i,{kind:"getter",name:"privateJwks",static:!1,private:!1,access:{has:e=>"privateJwks"in e,get:e=>e.privateJwks},metadata:e},null,o),e&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})})(),s);t.Keyset=y},6708:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.segmentedStringRefinementFactory=t.jwtCharsRefinement=t.cachedGetter=t.preferredOrderCmp=t.isDefined=void 0,t.matchesAny=function(e){return null==e?e=>!0:Array.isArray(e)?t=>e.includes(t):t=>t===e},t.parseB64uJson=function(e){let t=n.base64url.baseDecode(e);return JSON.parse(i.decode(t))};let n=r(59716),a=r(96625);t.isDefined=e=>void 0!==e,t.preferredOrderCmp=e=>(t,r)=>{let n=e.indexOf(t),a=e.indexOf(r);return n===a?0:-1===n?1:-1===a?-1:n-a},t.cachedGetter=(e,t)=>function(){let t=e.call(this);return Object.defineProperty(this,e.name,{get:()=>t,enumerable:!0,configurable:!0}),t};let i=new TextDecoder;t.jwtCharsRefinement=(e,t)=>{let r;for(let n=0;n<e.length;n++)if(65<=(r=e.charCodeAt(n))&&r<=90||97<=r&&r<=122||48<=r&&r<=57||45===r||95===r||46===r);else{let r=String.fromCodePoint(e.codePointAt(n));return t.addIssue({code:a.ZodIssueCode.custom,message:`Invalid character "${r}" in JWT at position ${n}`})}},t.segmentedStringRefinementFactory=(e,t=2)=>{if(!Number.isFinite(e)||e<1||(0|e)!==e)throw TypeError(`Count must be a natural number (got ${e})`);let r=e*t+(e-1),n="Invalid JWT format";return(i,o)=>{if(i.length<r)return o.addIssue({code:a.ZodIssueCode.custom,message:`${n}: too short`}),!1;let s=0;for(let r=0;r<e-1;r++){let l=i.indexOf(".",s);if(-1===l)return o.addIssue({code:a.ZodIssueCode.custom,message:`${n}: expected ${e} segments, got ${r+1}`}),!1;if(l-s<t)return o.addIssue({code:a.ZodIssueCode.custom,message:`${n}: segment ${r+1} is too short`}),!1;s=l+1}return -1!==i.indexOf(".",s)?(o.addIssue({code:a.ZodIssueCode.custom,message:`${n}: too many segments`}),!1):!(i.length-s<t)||(o.addIssue({code:a.ZodIssueCode.custom,message:`${n}: last segment is too short`}),!1)}}},84641:(e,t,r)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOAuthClient=void 0;let a=r(79798),i=r(72094),o=r(57477),s=r(87008),l=r(22861),d=r(25559),u="@@atproto/oauth-client-browser",c=`${u}(popup-channel)`,h=`${u}(popup-state):`,p=new BroadcastChannel(`${u}(synchronization-channel)`);class f extends a.OAuthClient{static async load({clientId:e,...t}){if(e.startsWith("http:"))return new f({clientMetadata:(0,i.atprotoLoopbackClientMetadata)(e),...t});if(e.startsWith("https:"))return(0,i.assertOAuthDiscoverableClientId)(e),new f({clientMetadata:await a.OAuthClient.fetchMetadata({clientId:e,...t}),...t});throw TypeError(`Invalid client id: ${e}`)}constructor({clientMetadata:e=(0,i.atprotoLoopbackClientMetadata)((0,d.buildLoopbackClientId)(window.location)),responseMode:t="fragment",...r}){if(!globalThis.crypto?.subtle)throw Error("WebCrypto API is required");if(!["query","fragment"].includes(t))throw TypeError(`Invalid response mode: ${t}`);let a=new o.BrowserOAuthDatabase;super({...r,clientMetadata:e,responseMode:t,keyset:void 0,runtimeImplementation:new s.BrowserRuntimeImplementation,sessionStore:a.getSessionStore(),stateStore:a.getStateStore(),didCache:a.getDidCache(),handleCache:a.getHandleCache(),dpopNonceCache:a.getDpopNonceCache(),authorizationServerMetadataCache:a.getAuthorizationServerMetadataCache(),protectedResourceMetadataCache:a.getProtectedResourceMetadataCache()}),Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:void 0});let l=new AbortController,{signal:c}=l;for(let e of(this[Symbol.dispose]=()=>l.abort(),c.addEventListener("abort",()=>a[Symbol.asyncDispose](),{once:!0}),this.addEventListener("deleted",({detail:{sub:e}})=>{localStorage.getItem(`${u}(sub)`)===e&&localStorage.removeItem(`${u}(sub)`)}),["deleted","updated"]))this.sessionGetter.addEventListener(e,({detail:t})=>{p.postMessage([e,t])});p.addEventListener("message",e=>{if(e.source!==window){let[t,r]=e.data;this.dispatchCustomEvent(t,r)}},{signal:c})}async init(e){await function(e){if(!(0,i.isOAuthClientIdLoopback)(e.client_id)||"localhost"!==window.location.hostname)return;let t=new URL(window.location.href);for(let r of e.redirect_uris){let e=new URL(r);if(("127.0.0.1"===e.hostname||"[::1]"===e.hostname)&&(!e.port||e.port===t.port)&&e.protocol===t.protocol&&e.pathname===t.pathname)throw e.port=t.port,window.location.href=e.href,Error("Redirecting to loopback IP...")}throw Error(`Please use the loopback IP address instead of ${t}`)}(this.clientMetadata);let t=await this.signInCallback();if(t)return localStorage.setItem(`${u}(sub)`,t.session.sub),t;let r=localStorage.getItem(`${u}(sub)`);if(r)try{return{session:await this.restore(r,e)}}catch(e){throw localStorage.removeItem(`${u}(sub)`),e}}async restore(e,t){let r=await super.restore(e,t);return localStorage.setItem(`${u}(sub)`,r.sub),r}async revoke(e){return localStorage.removeItem(`${u}(sub)`),super.revoke(e)}async signIn(e,t){return t?.display==="popup"?this.signInPopup(e,t):this.signInRedirect(e,t)}async signInRedirect(e,t){let r=await this.authorize(e,t);return window.location.href=r.href,new Promise((e,t)=>{setTimeout(e=>{this.abortRequest(r).then(()=>t(e),r=>t(AggregateError([e,r])))},5e3,Error("User navigated back"))})}async signInPopup(e,t){let r="width=600,height=600,menubar=no,toolbar=no",n=window.open("about:blank","_blank",r),i=`${Math.random().toString(36).slice(2)}`,o=await this.authorize(e,{...t,state:`${h}${i}`,display:t?.display??"popup"});return t?.signal?.throwIfAborted(),n?n.window.location.href=o.href:n=window.open(o.href,"_blank",r),n?.focus(),new Promise((e,r)=>{let o=new BroadcastChannel(c),s=()=>{clearTimeout(d),o.removeEventListener("message",u),o.close(),t?.signal?.removeEventListener("abort",l),n?.close()},l=()=>{r(Error(t?.signal?.aborted?"Aborted":"Timeout")),s()};t?.signal?.addEventListener("abort",l);let d=setTimeout(l,3e5),u=async({data:n})=>{if(n.key!==i||!("result"in n))return;o.postMessage({key:i,ack:!0}),s();let{result:l}=n;if("fulfilled"===l.status){let n=l.value;try{t?.signal?.throwIfAborted(),e(await this.restore(n,!1))}catch(e){r(e),this.revoke(n)}}else{let{message:e,params:t}=l.reason;r(new a.OAuthCallbackError(new URLSearchParams(t),e))}};o.addEventListener("message",u)})}readCallbackParams(){let e=new URLSearchParams("fragment"===this.responseMode?location.hash.slice(1):location.search);return e.has("state")&&(e.has("code")||e.has("error"))&&this.clientMetadata.redirect_uris.map(e=>new URL(e)).some(e=>location.origin===e.origin&&location.pathname===e.pathname)?e:null}async signInCallback(){let e=this.readCallbackParams();if(!e)return null;"fragment"===this.responseMode?history.replaceState(null,"",location.pathname+location.search):"query"===this.responseMode&&history.replaceState(null,"",location.pathname);let t=e=>{let t=new BroadcastChannel(c);return new Promise(r=>{let n=e=>{clearTimeout(i),t.removeEventListener("message",a),t.close(),r(e)},a=({data:t})=>{"ack"in t&&e.key===t.key&&n(!0)};t.addEventListener("message",a),t.postMessage(e);let i=setTimeout(n,500,!1)})};return this.callback(e).then(async e=>{if(e.state?.startsWith(h))throw await t({key:e.state.slice(h.length),result:{status:"fulfilled",value:e.session.sub}})||await e.session.signOut(),new l.LoginContinuedInParentWindowError;return e}).catch(async e=>{if(e instanceof a.OAuthCallbackError&&e.state?.startsWith(h))throw await t({key:e.state.slice(h.length),result:{status:"rejected",reason:{message:e.message,params:Array.from(e.params.entries())}}}),new l.LoginContinuedInParentWindowError;throw e}).catch(e=>{throw e instanceof l.LoginContinuedInParentWindowError&&window.close(),e})}dispose(){this[Symbol.dispose]()}}t.BrowserOAuthClient=f,n=Symbol.dispose},57477:function(e,t,r){var n,a,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOAuthDatabase=void 0;let s=r(39446),l=r(33528);function d(e){if(!(e instanceof s.WebcryptoKey)||!e.kid)throw Error("Invalid key object");return{keyId:e.kid,keyPair:e.cryptoKeyPair}}async function u(e){return s.WebcryptoKey.fromKeypair(e.keyPair,e.keyId)}let c=["state","session","didCache","dpopNonceCache","handleCache","authorizationServerMetadataCache","protectedResourceMetadataCache"];class h{constructor(e){n.set(this,void 0),a.set(this,void 0),i(this,n,l.DB.open(e?.name??"@atproto-oauth-client",[e=>{for(let t of c)e.createObjectStore(t,{autoIncrement:!0}).createIndex("expiresAt","expiresAt",{unique:!1})}],{durability:e?.durability??"strict"}),"f"),i(this,a,setInterval(()=>{this.cleanup()},e?.cleanupInterval??3e4),"f")}async run(e,t,r){let a=await o(this,n,"f");return await a.transaction([e],t,t=>r(t.objectStore(e)))}createStore(e,{encode:t,decode:r,expiresAt:n}){return{get:async t=>{let n=await this.run(e,"readonly",e=>e.get(t));if(void 0!==n){if(null!=n.expiresAt&&new Date(n.expiresAt)<new Date){await this.run(e,"readwrite",e=>e.delete(t));return}return r(n.value)}},set:async(r,a)=>{let i={value:await t(a),expiresAt:n(a)?.toISOString()};await this.run(e,"readwrite",e=>e.put(i,r))},del:async t=>{await this.run(e,"readwrite",e=>e.delete(t))}}}getSessionStore(){return this.createStore("session",{expiresAt:({tokenSet:e})=>e.refresh_token||null==e.expires_at?null:new Date(e.expires_at),encode:({dpopKey:e,...t})=>({...t,dpopKey:d(e)}),decode:async({dpopKey:e,...t})=>({...t,dpopKey:await u(e)})})}getStateStore(){return this.createStore("state",{expiresAt:e=>new Date(Date.now()+6e5),encode:({dpopKey:e,...t})=>({...t,dpopKey:d(e)}),decode:async({dpopKey:e,...t})=>({...t,dpopKey:await u(e)})})}getDpopNonceCache(){return this.createStore("dpopNonceCache",{expiresAt:e=>new Date(Date.now()+6e5),encode:e=>e,decode:e=>e})}getDidCache(){return this.createStore("didCache",{expiresAt:e=>new Date(Date.now()+6e4),encode:e=>e,decode:e=>e})}getHandleCache(){return this.createStore("handleCache",{expiresAt:e=>new Date(Date.now()+6e4),encode:e=>e,decode:e=>e})}getAuthorizationServerMetadataCache(){return this.createStore("authorizationServerMetadataCache",{expiresAt:e=>new Date(Date.now()+6e4),encode:e=>e,decode:e=>e})}getProtectedResourceMetadataCache(){return this.createStore("protectedResourceMetadataCache",{expiresAt:e=>new Date(Date.now()+6e4),encode:e=>e,decode:e=>e})}async cleanup(){let e=await o(this,n,"f");for(let t of c)await e.transaction([t],"readwrite",e=>e.objectStore(t).index("expiresAt").deleteAll(IDBKeyRange.upperBound(Date.now())))}async [(n=new WeakMap,a=new WeakMap,Symbol.asyncDispose)](){clearInterval(o(this,a,"f")),i(this,a,void 0,"f");let e=o(this,n,"f");i(this,n,Promise.reject(Error("Database has been disposed")),"f"),o(this,n,"f").catch(()=>null);let t=await e.catch(()=>null);t&&await (t[Symbol.asyncDispose]||t[Symbol.dispose]).call(t)}}t.BrowserOAuthDatabase=h},87008:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRuntimeImplementation=void 0;let n=r(39446),a=navigator.locks?.request?(e,t)=>navigator.locks.request(e,{mode:"exclusive"},async()=>t()):void 0;class i{constructor(){if(Object.defineProperty(this,"requestLock",{enumerable:!0,configurable:!0,writable:!0,value:a}),"object"!=typeof crypto||!crypto?.subtle)throw Error("Crypto with CryptoSubtle is required. If running in a browser, make sure the current page is loaded over HTTPS.");this.requestLock||console.warn("Locks API not available. You should consider using a more recent browser.")}async createKey(e){return n.WebcryptoKey.generate(e)}getRandomValues(e){return crypto.getRandomValues(new Uint8Array(e))}async digest(e,{name:t}){switch(t){case"sha256":case"sha384":case"sha512":return new Uint8Array(await crypto.subtle.digest(`SHA-${t.slice(3)}`,e));default:throw Error(`Unsupported digest algorithm: ${t}`)}}}t.BrowserRuntimeImplementation=i},32856:()=>{Symbol.dispose??(Symbol.dispose=Symbol("@@dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("@@asyncDispose"))},22861:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginContinuedInParentWindowError=void 0;class r extends Error{constructor(){super("Login complete, please close the popup window."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:"LOGIN_CONTINUED_IN_PARENT_WINDOW"})}}t.LoginContinuedInParentWindowError=r},12930:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.buildLoopbackClientId=void 0,r(32856),a(r(39446),t),a(r(79798),t),a(r(84641),t),a(r(22861),t);var i=r(25559);Object.defineProperty(t,"buildLoopbackClientId",{enumerable:!0,get:function(){return i.buildLoopbackClientId}})},1218:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBIndex=void 0;let n=r(79767);class a{constructor(e){Object.defineProperty(this,"idbIndex",{enumerable:!0,configurable:!0,writable:!0,value:e})}count(e){return(0,n.promisify)(this.idbIndex.count(e))}get(e){return(0,n.promisify)(this.idbIndex.get(e))}getKey(e){return(0,n.promisify)(this.idbIndex.getKey(e))}getAll(e,t){return(0,n.promisify)(this.idbIndex.getAll(e,t))}getAllKeys(e,t){return(0,n.promisify)(this.idbIndex.getAllKeys(e,t))}deleteAll(e){return new Promise((t,r)=>{let n=this.idbIndex.openCursor(e);n.onsuccess=function(e){let r=e.target.result;r?(r.delete(),r.continue()):t()},n.onerror=function(e){r(e.target?.error||Error("Unexpected error"))}})}}t.DBIndex=a},43541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBObjectStore=void 0;let n=r(1218),a=r(79767);class i{constructor(e){Object.defineProperty(this,"idbObjStore",{enumerable:!0,configurable:!0,writable:!0,value:e})}get name(){return this.idbObjStore.name}index(e){return new n.DBIndex(this.idbObjStore.index(e))}get(e){return(0,a.promisify)(this.idbObjStore.get(e))}getKey(e){return(0,a.promisify)(this.idbObjStore.getKey(e))}getAll(e,t){return(0,a.promisify)(this.idbObjStore.getAll(e,t))}getAllKeys(e,t){return(0,a.promisify)(this.idbObjStore.getAllKeys(e,t))}add(e,t){return(0,a.promisify)(this.idbObjStore.add(e,t))}put(e,t){return(0,a.promisify)(this.idbObjStore.put(e,t))}delete(e){return(0,a.promisify)(this.idbObjStore.delete(e))}clear(){return(0,a.promisify)(this.idbObjStore.clear())}}t.DBObjectStore=i},76199:function(e,t,r){var n,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DBTransaction=void 0;let o=r(43541);class s{constructor(e){n.set(this,void 0),a(this,n,e,"f");let t=()=>{i()},r=()=>{i()},i=()=>{a(this,n,null,"f"),e.removeEventListener("abort",t),e.removeEventListener("complete",r)};e.addEventListener("abort",t),e.addEventListener("complete",r)}get tx(){if(!i(this,n,"f"))throw Error("Transaction already ended");return i(this,n,"f")}async abort(){let{tx:e}=this;a(this,n,null,"f"),e.abort()}async commit(){let{tx:e}=this;a(this,n,null,"f"),e.commit?.()}objectStore(e){let t=this.tx.objectStore(e);return new o.DBObjectStore(t)}[(n=new WeakMap,Symbol.dispose)](){i(this,n,"f")&&this.commit()}}t.DBTransaction=s},16430:function(e,t,r){var n,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DB=void 0;let o=r(76199);class s{static async open(e,t,r){return new s(await new Promise((r,n)=>{let a=indexedDB.open(e,t.length);a.onerror=()=>n(a.error),a.onsuccess=()=>r(a.result),a.onupgradeneeded=({oldVersion:e,newVersion:r})=>{let i=a.result;try{for(let n=e;n<(r??t.length);++n){let e=t[n];if(e)e(i);else throw Error(`Missing migration for version ${n}`)}}catch(e){i.close(),n(e)}}}),r)}constructor(e,t){Object.defineProperty(this,"txOptions",{enumerable:!0,configurable:!0,writable:!0,value:t}),n.set(this,void 0),a(this,n,e,"f");let r=()=>{a(this,n,null,"f"),e.removeEventListener("versionchange",r),e.removeEventListener("close",r),e.close()};e.addEventListener("versionchange",r),e.addEventListener("close",r)}get db(){if(!i(this,n,"f"))throw Error("Database closed");return i(this,n,"f")}get name(){return this.db.name}get objectStoreNames(){return this.db.objectStoreNames}get version(){return this.db.version}async transaction(e,t,r){return new Promise(async(n,a)=>{try{let i=this.db.transaction(e,t,this.txOptions),s={done:!1};i.oncomplete=()=>{s.done?n(s.value):a(Error("Transaction completed without result"))},i.onerror=()=>a(i.error),i.onabort=()=>a(i.error||Error("Transaction aborted"));try{let e=await r(new o.DBTransaction(i));s={done:!0,value:e},i.commit()}catch(e){throw i.abort(),e}}catch(e){a(e)}})}close(){let{db:e}=this;a(this,n,null,"f"),e.close()}[(n=new WeakMap,Symbol.dispose)](){if(i(this,n,"f"))return this.close()}}t.DB=s},33528:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(32856),a(r(16430),t),a(r(1218),t),a(r(43541),t),a(r(76199),t)},79767:(e,t)=>{function r(e,t,r){let n=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{t(e.result),n()},i=()=>{r(e.error||Error("Unknown error")),n()};e.addEventListener("success",a),e.addEventListener("error",i)}Object.defineProperty(t,"__esModule",{value:!0}),t.handleRequest=r,t.promisify=function(e){return new Promise((t,n)=>{r(e,t,n)})}},25559:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildLoopbackClientId=function(e,t="127.0.0.1"){if(!(0,n.isLoopbackHost)(e.hostname))throw TypeError(`Expected a loopback host, got ${e.hostname}`);let r=`http://${"localhost"===e.hostname?t:e.hostname}${e.port&&!e.port.startsWith(":")?`:${e.port}`:e.port}${e.pathname}`;return`http://localhost${"/"===e.pathname?"":e.pathname}?redirect_uri=${encodeURIComponent(r)}`};let n=r(72094)},5028:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.atprotoTokenResponseSchema=t.atprotoScopeSchema=t.isAtprotoScope=void 0;let n=r(96625),a=r(77964),i=r(72094),o=r(44322);t.isAtprotoScope=e=>(0,o.includesSpaceSeparatedValue)(e,"atproto"),t.atprotoScopeSchema=n.z.string().refine(t.isAtprotoScope,'The "atproto" scope is required'),t.atprotoTokenResponseSchema=i.oauthTokenResponseSchema.extend({token_type:n.z.literal("DPoP"),sub:a.atprotoDidSchema,scope:t.atprotoScopeSchema,id_token:n.z.never().optional()})},80580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FALLBACK_ALG=void 0,t.FALLBACK_ALG="ES256"},2508:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenInvalidError=void 0;class r extends Error{constructor(e,t=`The session for "${e}" is invalid`,r){super(t,r),Object.defineProperty(this,"sub",{enumerable:!0,configurable:!0,writable:!0,value:e})}}t.TokenInvalidError=r},47471:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRefreshError=void 0;class r extends Error{constructor(e,t,r){super(t,r),Object.defineProperty(this,"sub",{enumerable:!0,configurable:!0,writable:!0,value:e})}}t.TokenRefreshError=r},41190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevokedError=void 0;class r extends Error{constructor(e,t=`The session for "${e}" was successfully revoked`,r){super(t,r),Object.defineProperty(this,"sub",{enumerable:!0,configurable:!0,writable:!0,value:e})}}t.TokenRevokedError=r},71817:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dpopFetchWrapper=function({key:e,iss:t,supportedAlgs:r,nonces:n,sha256:u=void 0!==i?d:void 0,isAuthServer:c,fetch:h=globalThis.fetch}){if(!u)throw TypeError("crypto.subtle is not available in this environment. Please provide a sha256 function.");let p=function(e,t){if(t){let r=t.find(t=>e.algorithms.includes(t));if(r)return r}else{let[t]=e.algorithms;if(t)return t}throw Error("Key does not match any alg supported by the server")}(e,r);return async function(r,i){let d;if(!e.algorithms.includes(p))throw TypeError(`Key does not support the algorithm ${p}`);let f=null==i&&r instanceof Request?r:new Request(r,i),y=f.headers.get("Authorization"),m=y?.startsWith("DPoP ")?await u(y.slice(5)):void 0,{method:g,url:v}=f,{origin:_}=new URL(v);try{d=await n.get(_)}catch{}let b=await s(e,p,t,g,v,d,m);f.headers.set("DPoP",b);let w=await h.call(this,f),S=w.headers.get("DPoP-Nonce");if(!S||S===d)return w;try{await n.set(_,S)}catch{}if(!await l(w,c)||r===f||o&&i?.body instanceof o)return w;await (0,a.cancelBody)(w,"log");let E=await s(e,p,t,g,v,S,m),P=new Request(r,i);return P.headers.set("DPoP",E),h.call(this,P)}};let n=r(59716),a=r(31285),i=globalThis.crypto?.subtle,o=globalThis.ReadableStream;async function s(e,t,r,n,a,i,o){if(!e.bareJwk)throw Error("Only asymmetric keys can be used as DPoP proofs");let s=Math.floor(Date.now()/1e3);return e.createJwt({alg:t,typ:"dpop+jwt",jwk:e.bareJwk},{iss:r,iat:s,jti:Math.random().toString(36).slice(2),htm:n,htu:a,nonce:i,ath:o})}async function l(e,t){if((void 0===t||!1===t)&&401===e.status){let t=e.headers.get("WWW-Authenticate");if(t?.startsWith("DPoP"))return t.includes('error="use_dpop_nonce"')}if((void 0===t||!0===t)&&400===e.status)try{let t=await (0,a.peekJson)(e,10240);return"object"==typeof t&&t?.error==="use_dpop_nonce"}catch{}return!1}async function d(e){if(null==i)throw Error("crypto.subtle is not available in this environment. Please provide a sha256 function.");let t=new TextEncoder().encode(e),r=new Uint8Array(await i.digest("SHA-256",t));return n.base64url.baseEncode(r)}},79798:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchResponseError=t.FetchRequestError=t.FetchError=void 0,a(r(21482),t);var i=r(31285);Object.defineProperty(t,"FetchError",{enumerable:!0,get:function(){return i.FetchError}}),Object.defineProperty(t,"FetchRequestError",{enumerable:!0,get:function(){return i.FetchRequestError}}),Object.defineProperty(t,"FetchResponseError",{enumerable:!0,get:function(){return i.FetchResponseError}}),a(r(95563),t),a(r(77964),t),a(r(72094),t),a(r(72702),t),a(r(11471),t),a(r(28406),t),a(r(68200),t),a(r(74915),t),a(r(19951),t),a(r(84630),t),a(r(14209),t),a(r(89307),t),a(r(24778),t),a(r(52198),t),a(r(88882),t),a(r(41043),t),a(r(2508),t),a(r(47471),t),a(r(41190),t)},73642:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestLocalLock=void 0;let r=new Map;t.requestLocalLock=(e,t)=>(function(e){return new Promise(t=>{let n=(r.get(e)??Promise.resolve()).then(()=>new Promise(a=>{t(()=>{r.get(e)===n&&r.delete(e),a()})}));r.set(e,n)})})(e).then(async e=>{try{return await t()}finally{e()}})},72702:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthAuthorizationServerMetadataResolver=void 0;let n=r(72094),a=r(31285),i=r(2032),o=r(44322);class s extends i.CachedGetter{constructor(e,t,r){super(async(e,t)=>this.fetchMetadata(e,t),e),Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowHttpIssuer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fetch=(0,a.bindFetch)(t),this.allowHttpIssuer=r?.allowHttpIssuer===!0}async get(e,t){let r=n.oauthIssuerIdentifierSchema.parse(e);if(!this.allowHttpIssuer&&r.startsWith("http:"))throw TypeError("Unsecure issuer URL protocol only allowed in development and test environments");return super.get(r,t)}async fetchMetadata(e,t){let r=new URL("/.well-known/oauth-authorization-server",e),i=new Request(r,{headers:{accept:"application/json"},cache:t?.noCache?"no-cache":void 0,signal:t?.signal,redirect:"manual"}),s=await this.fetch(i);if(200!==s.status)throw await (0,a.cancelBody)(s,"log"),await a.FetchResponseError.from(s,`Unexpected status code ${s.status} for "${r}"`,void 0,{cause:i});if("application/json"!==(0,o.contentMime)(s.headers))throw await (0,a.cancelBody)(s,"log"),await a.FetchResponseError.from(s,`Unexpected content type for "${r}"`,void 0,{cause:i});let l=n.oauthAuthorizationServerMetadataValidator.parse(await s.json());if(l.issuer!==e)throw TypeError(`Invalid issuer ${l.issuer}`);if(!0!==l.client_id_metadata_document_supported)throw TypeError(`Authorization server "${e}" does not support client_id_metadata_document`);return l}}t.OAuthAuthorizationServerMetadataResolver=s},11471:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthCallbackError=void 0;class r extends Error{static from(e,t,n){return e instanceof r?e:new r(t,e instanceof Error?e.message:void 0,n,e)}constructor(e,t=e.get("error_description")||"OAuth callback error",r,n){super(t,{cause:n}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:r})}}t.OAuthCallbackError=r},28406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthClient=void 0;let n=r(16516),a=r(72094),i=r(21482),o=r(95563),s=r(63297),l=r(79993),d=r(80580),u=r(41190),c=r(72702),h=r(11471),p=r(68200),f=r(78223),y=r(14209),m=r(89307),g=r(57275),v=r(52198),_=r(44322),b=r(92763);class w extends _.CustomEventTarget{static async fetchMetadata({clientId:e,fetch:t=globalThis.fetch,signal:r}){r?.throwIfAborted();let n=new Request(e,{redirect:"error",signal:r}),i=await t(n);if(200!==i.status)throw i.body?.cancel?.(),TypeError(`Failed to fetch client metadata: ${i.status}`);let o=i.headers.get("content-type")?.split(";")[0].trim();if("application/json"!==o)throw i.body?.cancel?.(),TypeError(`Invalid client metadata content type: ${o}`);let s=await i.json();return r?.throwIfAborted(),a.oauthClientMetadataSchema.parse(s)}constructor({fetch:e=globalThis.fetch,allowHttp:t=!1,stateStore:r,sessionStore:a,didCache:d,dpopNonceCache:u=new l.SimpleStoreMemory({ttl:6e4,max:100}),handleCache:h,authorizationServerMetadataCache:m=new l.SimpleStoreMemory({ttl:6e4,max:100}),protectedResourceMetadataCache:_=new l.SimpleStoreMemory({ttl:6e4,max:100}),responseMode:w,clientMetadata:S,handleResolver:E,plcDirectoryUrl:P,runtimeImplementation:O,keyset:j}){for(let l of(super(),Object.defineProperty(this,"clientMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"responseMode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyset",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oauthResolver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serverFactory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sessionGetter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stateStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyset=j?j instanceof n.Keyset?j:new n.Keyset(j):void 0,this.clientMetadata=(0,b.validateClientMetadata)(S,this.keyset),this.responseMode=w,this.runtime=new g.Runtime(O),this.fetch=e,this.oauthResolver=new f.OAuthResolver(new s.IdentityResolver(new i.DidResolverCached(new i.DidResolverCommon({fetch:e,plcDirectoryUrl:P,allowHttp:t}),d),new o.CachedHandleResolver(o.AppViewHandleResolver.from(E,{fetch:e}),h)),new p.OAuthProtectedResourceMetadataResolver(_,e,{allowHttpResource:t}),new c.OAuthAuthorizationServerMetadataResolver(m,e,{allowHttpIssuer:t})),this.serverFactory=new y.OAuthServerFactory(this.clientMetadata,this.runtime,this.oauthResolver,this.fetch,this.keyset,u),this.sessionGetter=new v.SessionGetter(a,this.serverFactory,this.runtime),this.stateStore=r,["deleted","updated"]))this.sessionGetter.addEventListener(l,e=>{this.dispatchCustomEvent(l,e.detail)||e.preventDefault()})}get identityResolver(){return this.oauthResolver.identityResolver}get didResolver(){return this.identityResolver.didResolver}get handleResolver(){return this.identityResolver.handleResolver}get jwks(){return this.keyset?.publicJwks??{keys:[]}}async authorize(e,{signal:t,...r}={}){let n=r?.redirect_uri??this.clientMetadata.redirect_uris[0];if(!this.clientMetadata.redirect_uris.includes(n))throw TypeError("Invalid redirect_uri");let{identity:a,metadata:i}=await this.oauthResolver.resolve(e,{signal:t}),o=await this.runtime.generatePKCE(),s=await this.runtime.generateKey(i.dpop_signing_alg_values_supported||[d.FALLBACK_ALG]),l=await this.runtime.generateNonce();await this.stateStore.set(l,{iss:i.issuer,dpopKey:s,verifier:o.verifier,appState:r?.state});let u={...r,client_id:this.clientMetadata.client_id,redirect_uri:n,code_challenge:o.challenge,code_challenge_method:o.method,state:l,login_hint:a?e:void 0,response_mode:this.responseMode,response_type:"code",scope:r?.scope??this.clientMetadata.scope},c=new URL(i.authorization_endpoint);if("https:"!==c.protocol&&"http:"!==c.protocol)throw TypeError(`Invalid authorization endpoint protocol: ${c.protocol}`);if(i.pushed_authorization_request_endpoint){let e=await this.serverFactory.fromMetadata(i,s),t=await e.request("pushed_authorization_request",u);return c.searchParams.set("client_id",this.clientMetadata.client_id),c.searchParams.set("request_uri",t.request_uri),c}if(i.require_pushed_authorization_requests)throw Error("Server requires pushed authorization requests (PAR) but no PAR endpoint is available");for(let[e,t]of Object.entries(u))t&&c.searchParams.set(e,String(t));if(c.pathname.length+c.search.length<2048)return c;if(!i.pushed_authorization_request_endpoint)throw Error("Login URL too long");throw Error("Server does not support pushed authorization requests (PAR)")}async abortRequest(e){if(!e.searchParams.get("request_uri"))return}async callback(e){if(null!=e.get("response"))throw new h.OAuthCallbackError(e,"JARM not supported");let t=e.get("iss"),r=e.get("state"),n=e.get("error"),a=e.get("code");if(!r)throw new h.OAuthCallbackError(e,'Missing "state" parameter');let i=await this.stateStore.get(r);if(i)await this.stateStore.del(r);else throw new h.OAuthCallbackError(e,`Unknown authorization session "${r}"`);try{if(null!=n)throw new h.OAuthCallbackError(e,void 0,i.appState);if(!a)throw new h.OAuthCallbackError(e,'Missing "code" query param',i.appState);let r=await this.serverFactory.fromIssuer(i.iss,i.dpopKey);if(null!=t){if(!r.issuer)throw new h.OAuthCallbackError(e,"Issuer not found in metadata",i.appState);if(r.issuer!==t)throw new h.OAuthCallbackError(e,"Issuer mismatch",i.appState)}else if(r.serverMetadata.authorization_response_iss_parameter_supported)throw new h.OAuthCallbackError(e,"iss missing from the response",i.appState);let o=await r.exchangeCode(a,i.verifier);try{return await this.sessionGetter.setStored(o.sub,{dpopKey:i.dpopKey,tokenSet:o}),{session:this.createSession(r,o.sub),state:i.appState??null}}catch(e){throw await r.revoke(o.refresh_token||o.access_token),e}}catch(t){throw h.OAuthCallbackError.from(t,e,i.appState)}}async restore(e,t="auto"){(0,i.assertAtprotoDid)(e);let{dpopKey:r,tokenSet:n}=await this.sessionGetter.get(e,{noCache:!0===t,allowStale:!1===t}),a=await this.serverFactory.fromIssuer(n.iss,r,{noCache:!0===t,allowStale:!1===t});return this.createSession(a,e)}async revoke(e){(0,i.assertAtprotoDid)(e);let{dpopKey:t,tokenSet:r}=await this.sessionGetter.get(e,{allowStale:!0});try{let e=await this.serverFactory.fromIssuer(r.iss,t);await e.revoke(r.access_token)}finally{await this.sessionGetter.delStored(e,new u.TokenRevokedError(e))}}createSession(e,t){return new m.OAuthSession(e,t,this.sessionGetter,this.fetch)}}t.OAuthClient=w},68200:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthProtectedResourceMetadataResolver=void 0;let n=r(72094),a=r(31285),i=r(2032),o=r(44322);class s extends i.CachedGetter{constructor(e,t=globalThis.fetch,r){super(async(e,t)=>this.fetchMetadata(e,t),e),Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allowHttpResource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fetch=(0,a.bindFetch)(t),this.allowHttpResource=r?.allowHttpResource===!0}async get(e,t){let{protocol:r,origin:n}=new URL(e);if("https:"!==r&&"http:"!==r)throw TypeError(`Invalid protected resource metadata URL protocol: ${r}`);if("http:"===r&&!this.allowHttpResource)throw TypeError(`Unsecure resource metadata URL (${r}) only allowed in development and test environments`);return super.get(n,t)}async fetchMetadata(e,t){let r=new URL("/.well-known/oauth-protected-resource",e),i=new Request(r,{signal:t?.signal,headers:{accept:"application/json"},cache:t?.noCache?"no-cache":void 0,redirect:"manual"}),s=await this.fetch(i);if(200!==s.status)throw await (0,a.cancelBody)(s,"log"),await a.FetchResponseError.from(s,`Unexpected status code ${s.status} for "${r}"`,void 0,{cause:i});if("application/json"!==(0,o.contentMime)(s.headers))throw await (0,a.cancelBody)(s,"log"),await a.FetchResponseError.from(s,`Unexpected content type for "${r}"`,void 0,{cause:i});let l=n.oauthProtectedResourceMetadataSchema.parse(await s.json());if(l.resource!==e)throw TypeError(`Invalid issuer ${l.resource}`);return l}}t.OAuthProtectedResourceMetadataResolver=s},74915:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthResolverError=void 0;let n=r(96625);class a extends Error{constructor(e,t){super(e,t)}static from(e,t){if(e instanceof a)return e;let r=e instanceof n.ZodError?`${e.errors[0].path} ${e.errors[0].message}`:null;return new a((t??"Unable to resolve identity")+(r?` (${r})`:""),{cause:e})}}t.OAuthResolverError=a},78223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthResolver=void 0;let n=r(72094),a=r(74915);class i{constructor(e,t,r){Object.defineProperty(this,"identityResolver",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"protectedResourceMetadataResolver",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"authorizationServerMetadataResolver",{enumerable:!0,configurable:!0,writable:!0,value:r})}async resolve(e,t){return/^https?:\/\//.test(e)?this.resolveFromService(e,t):this.resolveFromIdentity(e,t)}async resolveFromService(e,t){try{return{metadata:await this.getResourceServerMetadata(e,t)}}catch(r){if(!t?.signal?.aborted&&r instanceof a.OAuthResolverError)try{let r=n.oauthIssuerIdentifierSchema.safeParse(e);if(r.success)return{metadata:await this.getAuthorizationServerMetadata(r.data,t)}}catch{}throw r}}async resolveFromIdentity(e,t){let r=await this.resolveIdentity(e,t);t?.signal?.throwIfAborted();let n=await this.getResourceServerMetadata(r.pds,t);return{identity:r,metadata:n}}async resolveIdentity(e,t){try{return await this.identityResolver.resolve(e,t)}catch(t){throw a.OAuthResolverError.from(t,`Failed to resolve identity: ${e}`)}}async getAuthorizationServerMetadata(e,t){try{return await this.authorizationServerMetadataResolver.get(e,t)}catch(t){throw a.OAuthResolverError.from(t,`Failed to resolve OAuth server metadata for issuer: ${e}`)}}async getResourceServerMetadata(e,t){try{let r=await this.protectedResourceMetadataResolver.get(e,t);if(r.authorization_servers?.length!==1)throw new a.OAuthResolverError(r.authorization_servers?.length?`Unable to determine authorization server for PDS: ${e}`:`No authorization servers found for PDS: ${e}`);let n=r.authorization_servers[0];t?.signal?.throwIfAborted();let i=await this.getAuthorizationServerMetadata(n,t);if(i.protected_resources&&!i.protected_resources.includes(r.resource))throw new a.OAuthResolverError(`PDS "${e}" not protected by issuer "${n}"`);return i}catch(t){throw a.OAuthResolverError.from(t,`Failed to resolve OAuth server metadata for resource: ${e}`)}}}t.OAuthResolver=i},19951:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthResponseError=void 0;let n=r(44322);class a extends Error{constructor(e,t){let r="object"==typeof t?t:void 0,a=(0,n.ifString)(r?.error),i=(0,n.ifString)(r?.error_description);super(`OAuth ${a?`"${a}"`:"unknown"} error${i?`: ${i}`:""}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"payload",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"errorDescription",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.error=a,this.errorDescription=i}get status(){return this.response.status}get headers(){return this.response.headers}}t.OAuthResponseError=a},84630:function(e,t,r){var n,a=this&&this.__addDisposableResource||function(e,t,r){if(null!=t){var n,a;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t},i=this&&this.__disposeResources||(n="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n},function(e){function t(t){e.error=e.hasError?new n(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,a=0;return function n(){for(;r=e.stack.pop();)try{if(!r.async&&1===a)return a=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(i).then(n,function(e){return t(e),n()})}else a|=1}catch(e){t(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()});Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthServerAgent=void 0;let o=r(72094),s=r(31285),l=r(5028),d=r(80580),u=r(47471),c=r(71817),h=r(19951),p=r(44322);class f{constructor(e,t,r,n,a,i,o,l){Object.defineProperty(this,"dpopKey",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"serverMetadata",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"clientMetadata",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"dpopNonces",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"oauthResolver",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"keyset",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"dpopFetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dpopFetch=(0,c.dpopFetchWrapper)({fetch:(0,s.bindFetch)(l),iss:r.client_id,key:e,supportedAlgs:t.dpop_signing_alg_values_supported,sha256:async e=>i.sha256(e),nonces:n,isAuthServer:!0})}get issuer(){return this.serverMetadata.issuer}async revoke(e){try{await this.request("revocation",{token:e})}catch{}}async exchangeCode(e,t){let r=Date.now(),n=await this.request("token",{grant_type:"authorization_code",redirect_uri:this.clientMetadata.redirect_uris[0],code:e,code_verifier:t});try{return{aud:await this.verifyIssuer(n.sub),sub:n.sub,iss:this.issuer,scope:n.scope,refresh_token:n.refresh_token,access_token:n.access_token,token_type:n.token_type,expires_at:"number"==typeof n.expires_in?new Date(r+1e3*n.expires_in).toISOString():void 0}}catch(e){throw await this.revoke(n.access_token),e}}async refresh(e){if(!e.refresh_token)throw new u.TokenRefreshError(e.sub,"No refresh token available");let t=await this.verifyIssuer(e.sub),r=Date.now(),n=await this.request("token",{grant_type:"refresh_token",refresh_token:e.refresh_token});return{aud:t,sub:e.sub,iss:this.issuer,scope:n.scope,refresh_token:n.refresh_token,access_token:n.access_token,token_type:n.token_type,expires_at:"number"==typeof n.expires_in?new Date(r+1e3*n.expires_in).toISOString():void 0}}async verifyIssuer(e){let t={stack:[],error:void 0,hasError:!1};try{let r=a(t,(0,p.timeoutSignal)(1e4),!1),n=await this.oauthResolver.resolveFromIdentity(e,{noCache:!0,allowStale:!1,signal:r});if(this.issuer!==n.metadata.issuer)throw TypeError("Issuer mismatch");return n.identity.pds.href}catch(e){t.error=e,t.hasError=!0}finally{i(t)}}async request(e,t){let r=this.serverMetadata[`${e}_endpoint`];if(!r)throw Error(`No ${e} endpoint available`);let n=await this.buildClientAuth(e),{response:a,json:i}=await this.dpopFetch(r,{method:"POST",headers:{...n.headers,"Content-Type":"application/json"},body:JSON.stringify({...t,...n.payload})}).then((0,s.fetchJsonProcessor)());if(a.ok)switch(e){case"token":return l.atprotoTokenResponseSchema.parse(i);case"pushed_authorization_request":return o.oauthParResponseSchema.parse(i);default:return i}else throw new h.OAuthResponseError(a,i)}async buildClientAuth(e){let t=this.serverMetadata.token_endpoint_auth_methods_supported,r=this.clientMetadata.token_endpoint_auth_method;if("private_key_jwt"===r||this.keyset&&!r&&t?.includes("private_key_jwt")){if(!this.keyset)throw Error("No keyset available");try{let e=this.serverMetadata.token_endpoint_auth_signing_alg_values_supported??d.FALLBACK_ALG,t=this.clientMetadata.jwks?.keys.map(({kid:e})=>e).filter(e=>"string"==typeof e);return{payload:{client_id:this.clientMetadata.client_id,client_assertion_type:o.CLIENT_ASSERTION_TYPE_JWT_BEARER,client_assertion:await this.keyset.createJwt({alg:e,kid:t},{iss:this.clientMetadata.client_id,sub:this.clientMetadata.client_id,aud:this.serverMetadata.issuer,jti:await this.runtime.generateNonce(),iat:Math.floor(Date.now()/1e3)})}}}catch(e){if("private_key_jwt"===r)throw e}}if("none"===r||!r&&(t?.includes("none")??!0))return{payload:{client_id:this.clientMetadata.client_id}};throw Error(`Unsupported ${e} authentication method`)}}t.OAuthServerAgent=f},14209:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthServerFactory=void 0;let n=r(84630);class a{constructor(e,t,r,n,a,i){Object.defineProperty(this,"clientMetadata",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"resolver",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"keyset",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"dpopNonceCache",{enumerable:!0,configurable:!0,writable:!0,value:i})}async fromIssuer(e,t,r){let n=await this.resolver.getAuthorizationServerMetadata(e,r);return this.fromMetadata(n,t)}async fromMetadata(e,t){return new n.OAuthServerAgent(t,e,this.clientMetadata,this.dpopNonceCache,this.resolver,this.runtime,this.keyset,this.fetch)}}t.OAuthServerFactory=a},89307:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthSession=void 0;let n=r(31285),a=r(2508),i=r(41190),o=r(71817),s=globalThis.ReadableStream;class l{constructor(e,t,r,a=globalThis.fetch){Object.defineProperty(this,"server",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"sub",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"sessionGetter",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"dpopFetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dpopFetch=(0,o.dpopFetchWrapper)({fetch:(0,n.bindFetch)(a),iss:e.clientMetadata.client_id,key:e.dpopKey,supportedAlgs:e.serverMetadata.dpop_signing_alg_values_supported,sha256:async t=>e.runtime.sha256(t),nonces:e.dpopNonces,isAuthServer:!1})}get did(){return this.sub}get serverMetadata(){return this.server.serverMetadata}async getTokenSet(e){let{tokenSet:t}=await this.sessionGetter.get(this.sub,{noCache:!0===e,allowStale:!1===e});return t}async getTokenInfo(e="auto"){let t=await this.getTokenSet(e),r=null==t.expires_at?void 0:new Date(t.expires_at);return{expiresAt:r,get expired(){return null==r?void 0:r.getTime()<Date.now()-5e3},scope:t.scope,iss:t.iss,aud:t.aud,sub:t.sub}}async signOut(){try{let e=await this.getTokenSet(!1);await this.server.revoke(e.access_token)}finally{await this.sessionGetter.delStored(this.sub,new i.TokenRevokedError(this.sub))}}async fetchHandler(e,t){let r;let n=await this.getTokenSet("auto"),i=new URL(e,n.aud),o=`${n.token_type} ${n.access_token}`,l=new Headers(t?.headers);l.set("Authorization",o);let u=await this.dpopFetch(i,{...t,headers:l});if(!d(u))return u;try{r=await this.getTokenSet(!0)}catch(e){return u}if(s&&t?.body instanceof s)return u;let c=`${r.token_type} ${r.access_token}`,h=new URL(e,r.aud);l.set("Authorization",c);let p=await this.dpopFetch(h,{...t,headers:l});return d(p)&&await this.sessionGetter.delStored(this.sub,new a.TokenInvalidError(this.sub)),p}}function d(e){if(401!==e.status)return!1;let t=e.headers.get("WWW-Authenticate");return null!=t&&(t.startsWith("Bearer ")||t.startsWith("DPoP "))&&t.includes('error="invalid_token"')}t.OAuthSession=l},24778:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},57275:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Runtime=void 0;let n=r(59716),a=r(73642);class i{constructor(e){Object.defineProperty(this,"implementation",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"hasImplementationLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usingLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{requestLock:t}=e;this.hasImplementationLock=null!=t,this.usingLock=t?.bind(e)||a.requestLocalLock}async generateKey(e){let t=Array.from(e).sort(o);return this.implementation.createKey(t)}async sha256(e){let t=new TextEncoder().encode(e),r=await this.implementation.digest(t,{name:"sha256"});return n.base64url.baseEncode(r)}async generateNonce(e=16){let t=await this.implementation.getRandomValues(e);return n.base64url.baseEncode(t)}async generatePKCE(e){let t=await this.generateVerifier(e);return{verifier:t,challenge:await this.sha256(t),method:"S256"}}async calculateJwkThumbprint(e){let t=JSON.stringify(function(e){let t=t=>{let r=e[t];if("string"!=typeof r||!r)throw TypeError(`"${t}" Parameter missing or invalid`);return r};switch(e.kty){case"EC":return{crv:t("crv"),kty:t("kty"),x:t("x"),y:t("y")};case"OKP":return{crv:t("crv"),kty:t("kty"),x:t("x")};case"RSA":return{e:t("e"),kty:t("kty"),n:t("n")};case"oct":return{k:t("k"),kty:t("kty")};default:throw TypeError('"kty" (Key Type) Parameter missing or unsupported')}}(e));return this.sha256(t)}async generateVerifier(e=32){if(e<32||e>96)throw TypeError("Invalid code_verifier length");let t=await this.implementation.getRandomValues(e);return n.base64url.baseEncode(t)}}function o(e,t){if("ES256K"===e)return -1;if("ES256K"===t)return 1;for(let r of["ES","PS","RS"]){if(e.startsWith(r)){if(t.startsWith(r))return parseInt(e.slice(2,5))-parseInt(t.slice(2,5));return -1}if(t.startsWith(r))return 1}return 0}t.Runtime=i},52198:function(e,t,r){var n,a=this&&this.__addDisposableResource||function(e,t,r){if(null!=t){var n,a;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t},i=this&&this.__disposeResources||(n="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n},function(e){function t(t){e.error=e.hasError?new n(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,a=0;return function n(){for(;r=e.stack.pop();)try{if(!r.async&&1===a)return a=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(i).then(n,function(e){return t(e),n()})}else a|=1}catch(e){t(e)}if(1===a)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()});Object.defineProperty(t,"__esModule",{value:!0}),t.SessionGetter=void 0;let o=r(2032),s=r(2508),l=r(47471),d=r(41190),u=r(19951),c=r(44322);class h extends o.CachedGetter{constructor(e,t,r){super(async(e,n,a)=>{if(void 0===a){let t=new l.TokenRefreshError(e,"The session was deleted by another process");throw this.dispatchEvent("deleted",{sub:e,cause:t}),t}let{dpopKey:i,tokenSet:o}=a;if(e!==o.sub)throw new l.TokenRefreshError(e,"Stored session sub mismatch");if(!o.refresh_token)throw new l.TokenRefreshError(e,"No refresh token available");let s=await t.fromIssuer(o.iss,i);n?.signal?.throwIfAborted();try{let t=await s.refresh(o);if(e!==t.sub)throw new l.TokenRefreshError(e,"Token set sub mismatch");return{dpopKey:i,tokenSet:t}}catch(t){if(t instanceof u.OAuthResponseError&&400===t.status&&"invalid_grant"===t.error){if(!r.hasImplementationLock){await new Promise(e=>setTimeout(e,1e3));let r=await this.getStored(e);if(void 0===r)throw new l.TokenRefreshError(e,"The session was deleted by another process",{cause:t});if(r.tokenSet.access_token!==o.access_token||r.tokenSet.refresh_token!==o.refresh_token)return r}let n=t.errorDescription??"The session was revoked";throw new l.TokenRefreshError(e,n,{cause:t})}throw t}},e,{isStale:(e,{tokenSet:t})=>null!=t.expires_at&&new Date(t.expires_at).getTime()<Date.now()+1e4+3e4*Math.random(),onStoreError:async(e,r,{tokenSet:n,dpopKey:a})=>{let i=await t.fromIssuer(n.iss,a);throw await i.revoke(n.refresh_token??n.access_token),e},deleteOnError:async e=>e instanceof l.TokenRefreshError||e instanceof d.TokenRevokedError||e instanceof s.TokenInvalidError}),Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"eventTarget",{enumerable:!0,configurable:!0,writable:!0,value:new c.CustomEventTarget})}addEventListener(e,t,r){this.eventTarget.addEventListener(e,t,r)}removeEventListener(e,t,r){this.eventTarget.removeEventListener(e,t,r)}dispatchEvent(e,t){return this.eventTarget.dispatchCustomEvent(e,t)}async setStored(e,t){if(e!==t.tokenSet.sub)throw TypeError("Token set does not match the expected sub");await super.setStored(e,t),this.dispatchEvent("updated",{sub:e,...t})}async delStored(e,t){await super.delStored(e,t),this.dispatchEvent("deleted",{sub:e,cause:t})}async getSession(e,t){return this.get(e,{noCache:!0===t,allowStale:!1===t})}async get(e,t){let r=await this.runtime.usingLock(`@atproto-oauth-client-${e}`,async()=>{let r={stack:[],error:void 0,hasError:!1};try{let n=a(r,(0,c.timeoutSignal)(3e4,t),!1),i=a(r,(0,c.combineSignals)([t?.signal,n]),!1);return await super.get(e,{...t,signal:i.signal})}catch(e){r.error=e,r.hasError=!0}finally{i(r)}});if(e!==r.tokenSet.sub)throw Error("Token set does not match the expected sub");return r}}t.SessionGetter=h},88882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},41043:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clientMetadataSchema=void 0;let n=r(96625),a=r(72094);t.clientMetadataSchema=a.oauthClientMetadataSchema.extend({client_id:n.z.union([a.oauthClientIdDiscoverableSchema,a.oauthClientIdLoopbackSchema])})},44322:function(e,t){var r=this&&this.__classPrivateFieldSet||function(e,t,r,n,a){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},n=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.includesSpaceSeparatedValue=t.CustomEventTarget=t.CustomEvent=t.timeoutSignal=t.ifString=void 0,t.contentMime=function(e){return e.get("content-type")?.split(";")[0].trim()},t.combineSignals=function(e){let t=new AbortController,r=function(e){let r=Error("This operation was aborted",{cause:this.reason});t.abort(r)};for(let n of e)if(n){if(n.aborted)throw t.abort(),Error("One of the signals is already aborted",{cause:n.reason});n.addEventListener("abort",r,{signal:t.signal})}return t[Symbol.dispose]=()=>{let e=Error("AbortController was disposed");t.abort(e)},t},Symbol.dispose??(Symbol.dispose=Symbol("@@dispose")),t.ifString=e=>"string"==typeof e?e:void 0,t.timeoutSignal=(e,t)=>{if(!Number.isInteger(e)||e<0)throw TypeError("Expected a positive integer");t?.signal?.throwIfAborted();let r=new AbortController,{signal:n}=r;t?.signal?.addEventListener("abort",e=>r.abort(e),{once:!0,signal:n});let a=setTimeout(e=>r.abort(e),e,Error("Timeout"));return a?.unref?.(),n.addEventListener("abort",()=>clearTimeout(a),{once:!0,signal:n}),Object.defineProperty(n,Symbol.dispose,{value:()=>r.abort()}),n},t.CustomEvent=globalThis.CustomEvent??(()=>{var e;class t extends Event{constructor(t,n){if(!arguments.length)throw TypeError("type argument is required");super(t,n),e.set(this,void 0),r(this,e,n?.detail??null,"f")}get detail(){return n(this,e,"f")}}return e=new WeakMap,Object.defineProperties(t.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:"CustomEvent"},detail:{enumerable:!0}}),t})();class a{constructor(){Object.defineProperty(this,"eventTarget",{enumerable:!0,configurable:!0,writable:!0,value:new EventTarget})}addEventListener(e,t,r){this.eventTarget.addEventListener(e,t,r)}removeEventListener(e,t,r){this.eventTarget.removeEventListener(e,t,r)}dispatchCustomEvent(e,r,n){return this.eventTarget.dispatchEvent(new t.CustomEvent(e,{...n,detail:r}))}}t.CustomEventTarget=a,t.includesSpaceSeparatedValue=(e,t)=>{let r;if(0===t.length)throw TypeError("Value cannot be empty");if(t.includes(" "))throw TypeError("Value cannot contain spaces");let n=e.length,a=t.length;if(n<a)return!1;let i=e.indexOf(t);for(;-1!==i;){if(r=i+a,(0===i||" "===e[i-1])&&(r===n||" "===e[r]))return!0;i=e.indexOf(t,r+1)}return!1}},92763:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateClientMetadata=function(e,t){if(e.jwks){if(!t)throw TypeError("Keyset must not be provided when jwks is provided");for(let r of e.jwks.keys)if(r.kid){if(!t.has(r.kid))throw TypeError(`Key with kid "${r.kid}" not found in keyset`)}else throw TypeError('Key must have a "kid" property')}!e.jwks&&!e.jwks_uri&&t?.size&&(e={...e,jwks:t.toJSON()});let r=a.clientMetadataSchema.parse(e);r.client_id.startsWith("http:")?(0,n.assertOAuthLoopbackClientId)(r.client_id):(0,n.assertOAuthDiscoverableClientId)(r.client_id);let s=r.scope?.split(" ");if(!s?.includes("atproto"))throw TypeError('Client metadata must include the "atproto" scope');if(!r.response_types.includes("code"))throw TypeError('"response_types" must include "code"');if(!r.grant_types.includes("authorization_code"))throw TypeError('"grant_types" must include "authorization_code"');let l=r[i];switch(l){case void 0:throw TypeError(`${i} must be provided`);case"none":if(r[o])throw TypeError(`${o} must not be provided when ${i} is "${l}"`);break;case"private_key_jwt":if(!t?.size)throw TypeError(`A non-empty keyset must be provided when ${i} is "${l}"`);if(!r[o])throw TypeError(`${o} must be provided when ${i} is "${l}"`);break;default:throw TypeError(`Invalid "token_endpoint_auth_method" value: ${l}`)}return r};let n=r(72094),a=r(41043),i="token_endpoint_auth_method",o="token_endpoint_auth_signing_alg"},52689:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.atprotoLoopbackClientMetadata=function(e){let{scope:t="atproto",redirect_uris:r=["http://127.0.0.1/","http://[::1]/"]}=(0,n.parseOAuthLoopbackClientId)(e);return{client_id:e,scope:t,redirect_uris:r,response_types:["code"],grant_types:["authorization_code","refresh_token"],token_endpoint_auth_method:"none",application_type:"native",dpop_bound_access_tokens:!0}};let n=r(14718)},18289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_ASSERTION_TYPE_JWT_BEARER=void 0,t.CLIENT_ASSERTION_TYPE_JWT_BEARER="urn:ietf:params:oauth:client-assertion-type:jwt-bearer"},72094:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(18289),t),a(r(93233),t),a(r(37309),t),a(r(52689),t),a(r(58200),t),a(r(61230),t),a(r(52238),t),a(r(31954),t),a(r(86809),t),a(r(26291),t),a(r(58269),t),a(r(87702),t),a(r(87188),t),a(r(10500),t),a(r(6856),t),a(r(73187),t),a(r(80513),t),a(r(14718),t),a(r(50595),t),a(r(9872),t),a(r(13101),t),a(r(41371),t),a(r(97416),t),a(r(75435),t),a(r(29780),t),a(r(96530),t),a(r(43498),t),a(r(24335),t),a(r(82581),t),a(r(37537),t),a(r(16296),t),a(r(53452),t),a(r(60024),t),a(r(76745),t),a(r(1572),t),a(r(71117),t),a(r(76691),t),a(r(35046),t),a(r(83196),t),a(r(81899),t),a(r(49333),t),a(r(28689),t),a(r(86884),t),a(r(66399),t)},58200:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAccessTokenSchema=void 0;let n=r(96625);t.oauthAccessTokenSchema=n.z.string().min(1)},61230:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthenticationErrorResponseSchema=void 0;let n=r(96625);t.oauthAuthenticationErrorResponseSchema=n.z.enum(["invalid_request","unauthorized_client","access_denied","unsupported_response_type","invalid_scope","server_error","temporarily_unavailable"])},52238:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationCodeGrantTokenRequestSchema=void 0;let n=r(96625),a=r(82581);t.oauthAuthorizationCodeGrantTokenRequestSchema=n.z.object({grant_type:n.z.literal("authorization_code"),code:n.z.string().min(1),redirect_uri:a.oauthRedirectUriSchema,code_verifier:n.z.string().min(43).max(128).regex(/^[a-zA-Z0-9-._~]+$/).optional()})},31954:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationDetailsSchema=t.oauthAuthorizationDetailSchema=void 0;let n=r(96625),a=r(93233);t.oauthAuthorizationDetailSchema=n.z.object({type:n.z.string(),locations:n.z.array(a.dangerousUriSchema).optional(),actions:n.z.array(n.z.string()).optional(),datatypes:n.z.array(n.z.string()).optional(),identifier:n.z.string().optional(),privileges:n.z.array(n.z.string()).optional()}),t.oauthAuthorizationDetailsSchema=n.z.array(t.oauthAuthorizationDetailSchema)},86809:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationRequestJarSchema=void 0;let n=r(96625),a=r(16516);t.oauthAuthorizationRequestJarSchema=n.z.object({request:n.z.union([a.signedJwtSchema,a.unsignedJwtSchema])})},26291:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationRequestParSchema=void 0;let n=r(96625),a=r(86809),i=r(58269);t.oauthAuthorizationRequestParSchema=n.z.union([i.oauthAuthorizationRequestParametersSchema,a.oauthAuthorizationRequestJarSchema])},58269:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationRequestParametersSchema=void 0;let n=r(96625),a=r(16516),i=r(31954),o=r(50595),s=r(64887),l=r(82581),d=r(60024),u=r(76745),c=r(1572),h=r(49333),p=r(28689),f=r(86884);t.oauthAuthorizationRequestParametersSchema=n.z.object({client_id:o.oauthClientIdSchema,state:n.z.string().optional(),redirect_uri:l.oauthRedirectUriSchema.optional(),scope:c.oauthScopeSchema.optional(),response_type:u.oauthResponseTypeSchema,code_challenge:n.z.string().optional(),code_challenge_method:s.oauthCodeChallengeMethodSchema.default("S256").optional(),dpop_jkt:n.z.string().optional(),response_mode:d.oauthResponseModeSchema.optional(),nonce:n.z.string().optional(),max_age:n.z.number().int().min(0).optional(),claims:n.z.record(f.oidcEntityTypeSchema,n.z.record(h.oidcClaimsParameterSchema,n.z.union([n.z.literal(null),p.oidcClaimsPropertiesSchema]))).optional(),login_hint:n.z.string().min(1).optional(),ui_locales:n.z.string().regex(/^[a-z]{2,3}(-[A-Z]{2})?( [a-z]{2,3}(-[A-Z]{2})?)*$/).optional(),id_token_hint:a.signedJwtSchema.optional(),display:n.z.enum(["page","popup","touch","wap"]).optional(),prompt:n.z.enum(["none","login","consent","select_account"]).optional(),authorization_details:i.oauthAuthorizationDetailsSchema.optional()})},87702:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationRequestQuerySchema=void 0;let n=r(96625),a=r(86809),i=r(58269),o=r(87188);t.oauthAuthorizationRequestQuerySchema=n.z.union([i.oauthAuthorizationRequestParametersSchema,a.oauthAuthorizationRequestJarSchema,o.oauthAuthorizationRequestUriSchema])},87188:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationRequestUriSchema=void 0;let n=r(96625),a=r(53452);t.oauthAuthorizationRequestUriSchema=n.z.object({request_uri:a.oauthRequestUriSchema})},10500:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthAuthorizationServerMetadataValidator=t.oauthAuthorizationServerMetadataSchema=void 0;let n=r(96625),a=r(64887),i=r(29780),o=r(93233);t.oauthAuthorizationServerMetadataSchema=n.z.object({issuer:i.oauthIssuerIdentifierSchema,claims_supported:n.z.array(n.z.string()).optional(),claims_locales_supported:n.z.array(n.z.string()).optional(),claims_parameter_supported:n.z.boolean().optional(),request_parameter_supported:n.z.boolean().optional(),request_uri_parameter_supported:n.z.boolean().optional(),require_request_uri_registration:n.z.boolean().optional(),scopes_supported:n.z.array(n.z.string()).optional(),subject_types_supported:n.z.array(n.z.string()).optional(),response_types_supported:n.z.array(n.z.string()).optional(),response_modes_supported:n.z.array(n.z.string()).optional(),grant_types_supported:n.z.array(n.z.string()).optional(),code_challenge_methods_supported:n.z.array(a.oauthCodeChallengeMethodSchema).min(1).optional(),ui_locales_supported:n.z.array(n.z.string()).optional(),id_token_signing_alg_values_supported:n.z.array(n.z.string()).optional(),display_values_supported:n.z.array(n.z.string()).optional(),request_object_signing_alg_values_supported:n.z.array(n.z.string()).optional(),authorization_response_iss_parameter_supported:n.z.boolean().optional(),authorization_details_types_supported:n.z.array(n.z.string()).optional(),request_object_encryption_alg_values_supported:n.z.array(n.z.string()).optional(),request_object_encryption_enc_values_supported:n.z.array(n.z.string()).optional(),jwks_uri:o.webUriSchema.optional(),authorization_endpoint:o.webUriSchema,token_endpoint:o.webUriSchema,token_endpoint_auth_methods_supported:n.z.array(n.z.string()).optional(),token_endpoint_auth_signing_alg_values_supported:n.z.array(n.z.string()).optional(),revocation_endpoint:o.webUriSchema.optional(),introspection_endpoint:o.webUriSchema.optional(),pushed_authorization_request_endpoint:o.webUriSchema.optional(),require_pushed_authorization_requests:n.z.boolean().optional(),userinfo_endpoint:o.webUriSchema.optional(),end_session_endpoint:o.webUriSchema.optional(),registration_endpoint:o.webUriSchema.optional(),dpop_signing_alg_values_supported:n.z.array(n.z.string()).optional(),protected_resources:n.z.array(o.webUriSchema).optional(),client_id_metadata_document_supported:n.z.boolean().optional()}),t.oauthAuthorizationServerMetadataValidator=t.oauthAuthorizationServerMetadataSchema.superRefine((e,t)=>{e.require_pushed_authorization_requests&&!e.pushed_authorization_request_endpoint&&t.addIssue({code:n.z.ZodIssueCode.custom,message:'"pushed_authorization_request_endpoint" required when "require_pushed_authorization_requests" is true'})}).superRefine((e,t)=>{e.response_types_supported&&!e.response_types_supported.includes("code")&&t.addIssue({code:n.z.ZodIssueCode.custom,message:'Response type "code" is required'})})},6856:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthClientCredentialsGrantTokenRequestSchema=void 0;let n=r(96625);t.oauthClientCredentialsGrantTokenRequestSchema=n.z.object({grant_type:n.z.literal("client_credentials")})},73187:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthClientCredentialsSchema=t.oauthClientCredentialsNoneSchema=t.oauthClientCredentialsSecretPostSchema=t.oauthClientCredentialsJwtBearerSchema=void 0;let n=r(96625),a=r(16516),i=r(18289),o=r(50595);t.oauthClientCredentialsJwtBearerSchema=n.z.object({client_id:o.oauthClientIdSchema,client_assertion_type:n.z.literal(i.CLIENT_ASSERTION_TYPE_JWT_BEARER),client_assertion:a.signedJwtSchema}),t.oauthClientCredentialsSecretPostSchema=n.z.object({client_id:o.oauthClientIdSchema,client_secret:n.z.string()}),t.oauthClientCredentialsNoneSchema=n.z.object({client_id:o.oauthClientIdSchema}),t.oauthClientCredentialsSchema=n.z.union([t.oauthClientCredentialsJwtBearerSchema,t.oauthClientCredentialsSecretPostSchema,t.oauthClientCredentialsNoneSchema])},80513:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.conventionalOAuthClientIdSchema=t.oauthClientIdDiscoverableSchema=void 0,t.isOAuthClientIdDiscoverable=function(e){return t.oauthClientIdDiscoverableSchema.safeParse(e).success},t.isConventionalOAuthClientId=function(e){return t.conventionalOAuthClientIdSchema.safeParse(e).success},t.assertOAuthDiscoverableClientId=function(e){t.oauthClientIdDiscoverableSchema.parse(e)},t.parseOAuthDiscoverableClientId=function(e){return new URL(t.oauthClientIdDiscoverableSchema.parse(e))};let n=r(96625),a=r(50595),i=r(93233),o=r(37309);t.oauthClientIdDiscoverableSchema=n.z.intersection(a.oauthClientIdSchema,i.httpsUriSchema).superRefine((e,t)=>{let r=new URL(e);return r.username||r.password?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"ClientID must not contain credentials"}),!1):r.hash?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"ClientID must not contain a fragment"}),!1):"/"===r.pathname?(t.addIssue({code:n.z.ZodIssueCode.custom,message:'ClientID must contain a path component (e.g. "/client-metadata.json")'}),!1):r.pathname.endsWith("/")?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"ClientID path must not end with a trailing slash"}),!1):(0,o.isHostnameIP)(r.hostname)?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"ClientID hostname must not be an IP address"}),!1):(0,o.extractUrlPath)(e)===r.pathname||(t.addIssue({code:n.z.ZodIssueCode.custom,message:`ClientID must be in canonical form ("${r.href}", got "${e}")`}),!1)}),t.conventionalOAuthClientIdSchema=t.oauthClientIdDiscoverableSchema.superRefine((e,t)=>{let r=new URL(e);return r.port?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"ClientID must not contain a port"}),!1):r.search?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"ClientID must not contain a query string"}),!1):"/oauth-client-metadata.json"===r.pathname||(t.addIssue({code:n.z.ZodIssueCode.custom,message:'ClientID must be "/oauth-client-metadata.json"'}),!1)})},14718:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthClientIdLoopbackSchema=void 0,t.isOAuthClientIdLoopback=function(e){try{return l(e),!0}catch{return!1}},t.assertOAuthLoopbackClientId=function(e){l(e)},t.parseOAuthLoopbackClientId=l;let n=r(96625),a=r(50595),i=r(82581),o=r(1572),s="http://localhost";function l(e){if(e.startsWith(s)){if(e.includes("#",s.length))throw TypeError("Loopback ClientID must not contain a hash component")}else throw TypeError(`Loopback ClientID must start with "${s}"`);let t=e.length>s.length&&"/"===e[s.length]?s.length+1:s.length;if(e.length===t)return{};if("?"!==e[t])throw TypeError("Loopback ClientID must not contain a path component");let r=new URLSearchParams(e.slice(t+1));for(let e of r.keys())if("redirect_uri"!==e&&"scope"!==e)throw TypeError(`Invalid query parameter "${e}" in client ID`);let n=r.get("scope")??void 0;if(null!=n){if(r.getAll("scope").length>1)throw TypeError("Loopback ClientID must contain at most one scope query parameter");if(!o.oauthScopeSchema.safeParse(n).success)throw TypeError("Invalid scope query parameter in client ID")}return{scope:n,redirect_uris:r.has("redirect_uri")?r.getAll("redirect_uri").map(e=>i.oauthLoopbackRedirectURISchema.parse(e)):void 0}}t.oauthClientIdLoopbackSchema=a.oauthClientIdSchema.superRefine((e,t)=>{try{return l(e),!0}catch(e){return t.addIssue({code:n.ZodIssueCode.custom,message:e instanceof TypeError?e.message:"Invalid loopback client ID"}),!1}})},50595:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthClientIdSchema=void 0;let n=r(96625);t.oauthClientIdSchema=n.z.string().min(1)},9872:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthClientMetadataSchema=void 0;let n=r(96625),a=r(16516),i=r(50595),o=r(13101),s=r(97416),l=r(82581),d=r(76745),u=r(1572),c=r(93233);t.oauthClientMetadataSchema=n.z.object({redirect_uris:n.z.array(l.oauthRedirectUriSchema).nonempty(),response_types:n.z.array(d.oauthResponseTypeSchema).nonempty().default(["code"]),grant_types:n.z.array(s.oauthGrantTypeSchema).nonempty().default(["authorization_code"]),scope:u.oauthScopeSchema.optional(),token_endpoint_auth_method:o.oauthEndpointAuthMethod.default("none").optional(),token_endpoint_auth_signing_alg:n.z.string().optional(),userinfo_signed_response_alg:n.z.string().optional(),userinfo_encrypted_response_alg:n.z.string().optional(),jwks_uri:c.webUriSchema.optional(),jwks:a.jwksPubSchema.optional(),application_type:n.z.enum(["web","native"]).default("web").optional(),subject_type:n.z.enum(["public","pairwise"]).default("public").optional(),request_object_signing_alg:n.z.string().optional(),id_token_signed_response_alg:n.z.string().optional(),authorization_signed_response_alg:n.z.string().default("RS256").optional(),authorization_encrypted_response_enc:n.z.enum(["A128CBC-HS256"]).optional(),authorization_encrypted_response_alg:n.z.string().optional(),client_id:i.oauthClientIdSchema.optional(),client_name:n.z.string().optional(),client_uri:c.webUriSchema.optional(),policy_uri:c.webUriSchema.optional(),tos_uri:c.webUriSchema.optional(),logo_uri:c.webUriSchema.optional(),default_max_age:n.z.number().optional(),require_auth_time:n.z.boolean().optional(),contacts:n.z.array(n.z.string().email()).optional(),tls_client_certificate_bound_access_tokens:n.z.boolean().optional(),dpop_bound_access_tokens:n.z.boolean().optional(),authorization_details_types:n.z.array(n.z.string()).optional()})},64887:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthCodeChallengeMethodSchema=void 0;let n=r(96625);t.oauthCodeChallengeMethodSchema=n.z.enum(["S256","plain"])},13101:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthEndpointAuthMethod=void 0;let n=r(96625);t.oauthEndpointAuthMethod=n.z.enum(["client_secret_basic","client_secret_jwt","client_secret_post","none","private_key_jwt","self_signed_tls_client_auth","tls_client_auth"])},41371:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OAUTH_ENDPOINT_NAMES=void 0,t.OAUTH_ENDPOINT_NAMES=["token","revocation","introspection","pushed_authorization_request"]},97416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthGrantTypeSchema=void 0;let n=r(96625);t.oauthGrantTypeSchema=n.z.enum(["authorization_code","implicit","refresh_token","password","client_credentials","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])},75435:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},29780:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthIssuerIdentifierSchema=void 0;let n=r(96625),a=r(93233);t.oauthIssuerIdentifierSchema=a.webUriSchema.superRefine((e,t)=>{if(e.endsWith("/"))return t.addIssue({code:n.z.ZodIssueCode.custom,message:"Issuer URL must not end with a slash"}),!1;let r=new URL(e);return r.username||r.password?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"Issuer URL must not contain a username or password"}),!1):r.hash||r.search?(t.addIssue({code:n.z.ZodIssueCode.custom,message:"Issuer URL must not contain a query or fragment"}),!1):e===("/"===r.pathname?r.origin:r.href)||(t.addIssue({code:n.z.ZodIssueCode.custom,message:"Issuer URL must be in the canonical form"}),!1)})},96530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthParResponseSchema=void 0;let n=r(96625);t.oauthParResponseSchema=n.z.object({request_uri:n.z.string(),expires_in:n.z.number().int().positive()})},43498:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthPasswordGrantTokenRequestSchema=void 0;let n=r(96625);t.oauthPasswordGrantTokenRequestSchema=n.z.object({grant_type:n.z.literal("password"),username:n.z.string(),password:n.z.string()})},24335:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthProtectedResourceMetadataSchema=void 0;let n=r(96625),a=r(29780),i=r(93233);t.oauthProtectedResourceMetadataSchema=n.z.object({resource:i.webUriSchema.refine(e=>!e.includes("?"),{message:"Resource URL must not contain query parameters"}).refine(e=>!e.includes("#"),{message:"Resource URL must not contain a fragment"}),authorization_servers:n.z.array(a.oauthIssuerIdentifierSchema).optional(),jwks_uri:i.webUriSchema.optional(),scopes_supported:n.z.array(n.z.string()).optional(),bearer_methods_supported:n.z.array(n.z.enum(["header","body","query"])).optional(),resource_signing_alg_values_supported:n.z.array(n.z.string()).optional(),resource_documentation:i.webUriSchema.optional(),resource_policy_uri:i.webUriSchema.optional(),resource_tos_uri:i.webUriSchema.optional()})},82581:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthRedirectUriSchema=t.oauthPrivateUseRedirectURISchema=t.oauthHttpsRedirectURISchema=t.oauthLoopbackRedirectURISchema=void 0;let n=r(96625),a=r(93233);t.oauthLoopbackRedirectURISchema=a.loopbackUriSchema.superRefine((e,t)=>!e.startsWith("http://localhost")||(t.addIssue({code:n.ZodIssueCode.custom,message:'Use of "localhost" hostname is not allowed (RFC 8252), use a loopback IP such as "127.0.0.1" instead'}),!1)),t.oauthHttpsRedirectURISchema=a.httpsUriSchema,t.oauthPrivateUseRedirectURISchema=a.privateUseUriSchema,t.oauthRedirectUriSchema=n.z.union([t.oauthLoopbackRedirectURISchema,t.oauthHttpsRedirectURISchema,t.oauthPrivateUseRedirectURISchema],{message:'URL must use the "https:" or "http:" protocol, or a private-use URI scheme (RFC 8252)'})},37537:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthRefreshTokenGrantTokenRequestSchema=void 0;let n=r(96625),a=r(16296);t.oauthRefreshTokenGrantTokenRequestSchema=n.z.object({grant_type:n.z.literal("refresh_token"),refresh_token:a.oauthRefreshTokenSchema})},16296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthRefreshTokenSchema=void 0;let n=r(96625);t.oauthRefreshTokenSchema=n.z.string().min(1)},53452:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthRequestUriSchema=void 0;let n=r(96625);t.oauthRequestUriSchema=n.z.string()},60024:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthResponseModeSchema=void 0;let n=r(96625);t.oauthResponseModeSchema=n.z.enum(["query","fragment","form_post"])},76745:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthResponseTypeSchema=void 0;let n=r(96625);t.oauthResponseTypeSchema=n.z.enum(["code","token","none","code id_token token","code id_token","code token","id_token token","id_token"])},1572:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthScopeSchema=void 0;let n=r(96625);t.oauthScopeSchema=n.z.string().regex(/^[\x21\x23-\x5B\x5D-\x7E]+(?: [\x21\x23-\x5B\x5D-\x7E]+)*$/)},71117:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthTokenIdentificationSchema=void 0;let n=r(96625),a=r(58200),i=r(16296);t.oauthTokenIdentificationSchema=n.z.object({token:n.z.union([a.oauthAccessTokenSchema,i.oauthRefreshTokenSchema]),token_type_hint:n.z.enum(["access_token","refresh_token"]).optional()})},76691:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthTokenRequestSchema=void 0;let n=r(96625),a=r(52238),i=r(6856),o=r(43498),s=r(37537);t.oauthTokenRequestSchema=n.z.discriminatedUnion("grant_type",[a.oauthAuthorizationCodeGrantTokenRequestSchema,s.oauthRefreshTokenGrantTokenRequestSchema,o.oauthPasswordGrantTokenRequestSchema,i.oauthClientCredentialsGrantTokenRequestSchema])},35046:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthTokenResponseSchema=void 0;let n=r(96625),a=r(16516),i=r(31954),o=r(83196);t.oauthTokenResponseSchema=n.z.object({access_token:n.z.string(),token_type:o.oauthTokenTypeSchema,scope:n.z.string().optional(),refresh_token:n.z.string().optional(),expires_in:n.z.number().optional(),id_token:a.signedJwtSchema.optional(),authorization_details:i.oauthAuthorizationDetailsSchema.optional()}).passthrough()},83196:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthTokenTypeSchema=void 0;let n=r(96625);t.oauthTokenTypeSchema=n.z.union([n.z.string().regex(/^DPoP$/i).transform(()=>"DPoP"),n.z.string().regex(/^Bearer$/i).transform(()=>"Bearer")])},81899:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oidcAuthenticationErrorResponseSchema=void 0;let n=r(96625);t.oidcAuthenticationErrorResponseSchema=n.z.enum(["interaction_required","login_required","account_selection_required","consent_required","invalid_request_uri","invalid_request_object","request_not_supported","request_uri_not_supported","registration_not_supported"])},49333:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oidcClaimsParameterSchema=void 0;let n=r(96625);t.oidcClaimsParameterSchema=n.z.enum(["auth_time","nonce","acr","name","family_name","given_name","middle_name","nickname","preferred_username","gender","picture","profile","website","birthdate","zoneinfo","locale","updated_at","email","email_verified","phone_number","phone_number_verified","address"])},28689:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oidcClaimsPropertiesSchema=void 0;let n=r(96625),a=n.z.union([n.z.string(),n.z.number(),n.z.boolean()]);t.oidcClaimsPropertiesSchema=n.z.object({essential:n.z.boolean().optional(),value:a.optional(),values:n.z.array(a).optional()})},86884:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oidcEntityTypeSchema=void 0;let n=r(96625);t.oidcEntityTypeSchema=n.z.enum(["userinfo","id_token"])},66399:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oidcUserinfoSchema=void 0;let n=r(96625);t.oidcUserinfoSchema=n.z.object({sub:n.z.string(),iss:n.z.string().url().optional(),aud:n.z.union([n.z.string(),n.z.array(n.z.string()).min(1)]).optional(),email:n.z.string().email().optional(),email_verified:n.z.boolean().optional(),name:n.z.string().optional(),preferred_username:n.z.string().optional(),picture:n.z.string().url().optional()})},93233:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.privateUseUriSchema=t.webUriSchema=t.httpsUriSchema=t.loopbackUriSchema=t.dangerousUriSchema=void 0;let n=r(96625),a=r(37309),i=URL.canParse??(e=>{try{return new URL(e),!0}catch{return!1}});t.dangerousUriSchema=n.z.string().refine(e=>e.includes(":")&&i(e),{message:"Invalid URL"}),t.loopbackUriSchema=t.dangerousUriSchema.superRefine((e,t)=>{if(!e.startsWith("http://"))return t.addIssue({code:n.ZodIssueCode.custom,message:'URL must use the "http:" protocol'}),!1;let r=new URL(e);return!!(0,a.isLoopbackHost)(r.hostname)||(t.addIssue({code:n.ZodIssueCode.custom,message:'URL must use "localhost", "127.0.0.1" or "[::1]" as hostname'}),!1)}),t.httpsUriSchema=t.dangerousUriSchema.superRefine((e,t)=>{if(!e.startsWith("https://"))return t.addIssue({code:n.ZodIssueCode.custom,message:'URL must use the "https:" protocol'}),!1;let r=new URL(e);if((0,a.isLoopbackHost)(r.hostname))return t.addIssue({code:n.ZodIssueCode.custom,message:"https: URL must not use a loopback host"}),!1;if((0,a.isHostnameIP)(r.hostname));else{if(!r.hostname.includes("."))return t.addIssue({code:n.ZodIssueCode.custom,message:"Domain name must contain at least two segments"}),!1;if(r.hostname.endsWith(".local"))return t.addIssue({code:n.ZodIssueCode.custom,message:'Domain name must not end with ".local"'}),!1}return!0}),t.webUriSchema=n.z.string().superRefine((e,r)=>{if(e.startsWith("http://")){let n=t.loopbackUriSchema.safeParse(e);return n.success||n.error.issues.forEach(r.addIssue,r),n.success}if(e.startsWith("https://")){let n=t.httpsUriSchema.safeParse(e);return n.success||n.error.issues.forEach(r.addIssue,r),n.success}return r.addIssue({code:n.ZodIssueCode.custom,message:'URL must use the "http:" or "https:" protocol'}),!1}),t.privateUseUriSchema=t.dangerousUriSchema.superRefine((e,t)=>{let r=e.indexOf("."),a=e.indexOf(":");if(-1===r||-1===a||r>a)return t.addIssue({code:n.ZodIssueCode.custom,message:'Private-use URI scheme requires a "." as part of the protocol'}),!1;let i=new URL(e);return i.protocol.includes(".")?!i.hostname||(t.addIssue({code:n.ZodIssueCode.custom,message:'Private-use URI schemes must not include a hostname (only one "/" is allowed after the protocol, as per RFC 8252)'}),!1):(t.addIssue({code:n.ZodIssueCode.custom,message:"Invalid private-use URI scheme"}),!1)})},37309:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isHostnameIP=function(e){return!!(e.match(/^\d+\.\d+\.\d+\.\d+$/)||e.startsWith("[")&&e.endsWith("]"))},t.isLoopbackHost=r,t.isLoopbackUrl=function(e){return r(("string"==typeof e?new URL(e):e).hostname)},t.safeUrl=function(e){try{return new URL(e)}catch{return null}},t.extractUrlPath=function(e){let t=e.startsWith("https://")?8:e.startsWith("http://")?7:-1;if(-1===t)throw TypeError('URL must use the "https:" or "http:" protocol');let r=e.indexOf("#",t),n=e.indexOf("?",t),a=-1!==n&&(-1===r||n<r)?n:-1,i=-1===r?-1===a?e.length:a:-1===a?r:Math.min(r,a),o=e.indexOf("/",t),s=-1===o||o>i?i:o;if(t===s)throw TypeError("URL must contain a host");return e.substring(s,i)};function r(e){return"localhost"===e||"127.0.0.1"===e||"[::1]"===e}},27168:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;let r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,n=new Set,a="object"==typeof process&&process?process:{},i=(e,t,r,n)=>{"function"==typeof a.emitWarning?a.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)},o=globalThis.AbortController,s=globalThis.AbortSignal;if(void 0===o){s=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},o=class{constructor(){t()}signal=new s;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=a.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}let l=e=>!n.has(e);Symbol("type");let d=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),u=e=>d(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=4294967296?Uint32Array:e<=Number.MAX_SAFE_INTEGER?c:null:null;class c extends Array{constructor(e){super(e),this.fill(0)}}class h{heap;length;static #e=!1;static create(e){let t=u(e);if(!t)return[];h.#e=!0;let r=new h(e,t);return h.#e=!1,r}constructor(e,t){if(!h.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class p{#t;#r;#n;#a;#i;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#l;#d;#u;#c;#h;#p;#f;#y;#m;#g;#v;#_;#b;#w;#S;#E;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#b,sizes:e.#v,keyMap:e.#d,keyList:e.#u,valList:e.#c,next:e.#h,prev:e.#p,get head(){return e.#f},get tail(){return e.#y},free:e.#m,isBackgroundFetch:t=>e.#P(t),backgroundFetch:(t,r,n,a)=>e.#O(t,r,n,a),moveToTail:t=>e.#j(t),indexes:t=>e.#R(t),rindexes:t=>e.#T(t),isStale:t=>e.#I(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#l}get size(){return this.#s}get fetchMethod(){return this.#i}get memoMethod(){return this.#o}get dispose(){return this.#n}get disposeAfter(){return this.#a}constructor(e){let{max:t=0,ttl:r,ttlResolution:a=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:c,allowStale:f,dispose:y,disposeAfter:m,noDisposeOnSet:g,noUpdateTTL:v,maxSize:_=0,maxEntrySize:b=0,sizeCalculation:w,fetchMethod:S,memoMethod:E,noDeleteOnFetchRejection:P,noDeleteOnStaleGet:O,allowStaleOnFetchRejection:j,allowStaleOnFetchAbort:R,ignoreFetchAbort:T}=e;if(0!==t&&!d(t))throw TypeError("max option must be a nonnegative integer");let I=t?u(t):Array;if(!I)throw Error("invalid max value: "+t);if(this.#t=t,this.#r=_,this.maxEntrySize=b||this.#r,this.sizeCalculation=w,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==E&&"function"!=typeof E)throw TypeError("memoMethod must be a function if defined");if(this.#o=E,void 0!==S&&"function"!=typeof S)throw TypeError("fetchMethod must be a function if specified");if(this.#i=S,this.#S=!!S,this.#d=new Map,this.#u=Array(t).fill(void 0),this.#c=Array(t).fill(void 0),this.#h=new I(t),this.#p=new I(t),this.#f=0,this.#y=0,this.#m=h.create(t),this.#s=0,this.#l=0,"function"==typeof y&&(this.#n=y),"function"==typeof m?(this.#a=m,this.#g=[]):(this.#a=void 0,this.#g=void 0),this.#w=!!this.#n,this.#E=!!this.#a,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!v,this.noDeleteOnFetchRejection=!!P,this.allowStaleOnFetchRejection=!!j,this.allowStaleOnFetchAbort=!!R,this.ignoreFetchAbort=!!T,0!==this.maxEntrySize){if(0!==this.#r&&!d(this.#r))throw TypeError("maxSize must be a positive integer if specified");if(!d(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#k()}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!O,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!c,this.ttlResolution=d(a)||0===a?a:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!d(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#A()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){let e="LRU_CACHE_UNBOUNDED";l(e)&&(n.add(e),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,p))}}getRemainingTTL(e){return this.#d.has(e)?1/0:0}#A(){let e=new c(this.#t),t=new c(this.#t);this.#b=e,this.#_=t,this.#C=(n,a,i=r.now())=>{if(t[n]=0!==a?i:0,e[n]=a,0!==a&&this.ttlAutopurge){let e=setTimeout(()=>{this.#I(n)&&this.#x(this.#u[n],"expire")},a+1);e.unref&&e.unref()}},this.#M=n=>{t[n]=0!==e[n]?r.now():0},this.#D=(r,i)=>{if(e[i]){let o=e[i],s=t[i];if(!o||!s)return;r.ttl=o,r.start=s,r.now=n||a();let l=r.now-s;r.remainingTTL=o-l}};let n=0,a=()=>{let e=r.now();if(this.ttlResolution>0){n=e;let t=setTimeout(()=>n=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{let i=this.#d.get(r);if(void 0===i)return 0;let o=e[i],s=t[i];return o&&s?o-((n||a())-s):1/0},this.#I=r=>{let i=t[r],o=e[r];return!!o&&!!i&&(n||a())-i>o}}#M=()=>{};#D=()=>{};#C=()=>{};#I=()=>!1;#k(){let e=new c(this.#t);this.#l=0,this.#v=e,this.#z=t=>{this.#l-=e[t],e[t]=0},this.#W=(e,t,r,n)=>{if(this.#P(t))return 0;if(!d(r)){if(n){if("function"!=typeof n)throw TypeError("sizeCalculation must be a function");if(!d(r=n(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return r},this.#U=(t,r,n)=>{if(e[t]=r,this.#r){let r=this.#r-e[t];for(;this.#l>r;)this.#N(!0)}this.#l+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#l)}}#z=e=>{};#U=(e,t,r)=>{};#W=(e,t,r,n)=>{if(r||n)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#R({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#y;this.#J(t)&&((e||!this.#I(t))&&(yield t),t!==this.#f);)t=this.#p[t]}*#T({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#f;this.#J(t)&&((e||!this.#I(t))&&(yield t),t!==this.#y);)t=this.#h[t]}#J(e){return void 0!==e&&this.#d.get(this.#u[e])===e}*entries(){for(let e of this.#R())void 0===this.#c[e]||void 0===this.#u[e]||this.#P(this.#c[e])||(yield[this.#u[e],this.#c[e]])}*rentries(){for(let e of this.#T())void 0===this.#c[e]||void 0===this.#u[e]||this.#P(this.#c[e])||(yield[this.#u[e],this.#c[e]])}*keys(){for(let e of this.#R()){let t=this.#u[e];void 0===t||this.#P(this.#c[e])||(yield t)}}*rkeys(){for(let e of this.#T()){let t=this.#u[e];void 0===t||this.#P(this.#c[e])||(yield t)}}*values(){for(let e of this.#R())void 0===this.#c[e]||this.#P(this.#c[e])||(yield this.#c[e])}*rvalues(){for(let e of this.#T())void 0===this.#c[e]||this.#P(this.#c[e])||(yield this.#c[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#R()){let n=this.#c[r],a=this.#P(n)?n.__staleWhileFetching:n;if(void 0!==a&&e(a,this.#u[r],this))return this.get(this.#u[r],t)}}forEach(e,t=this){for(let r of this.#R()){let n=this.#c[r],a=this.#P(n)?n.__staleWhileFetching:n;void 0!==a&&e.call(t,a,this.#u[r],this)}}rforEach(e,t=this){for(let r of this.#T()){let n=this.#c[r],a=this.#P(n)?n.__staleWhileFetching:n;void 0!==a&&e.call(t,a,this.#u[r],this)}}purgeStale(){let e=!1;for(let t of this.#T({allowStale:!0}))this.#I(t)&&(this.#x(this.#u[t],"expire"),e=!0);return e}info(e){let t=this.#d.get(e);if(void 0===t)return;let n=this.#c[t],a=this.#P(n)?n.__staleWhileFetching:n;if(void 0===a)return;let i={value:a};if(this.#b&&this.#_){let e=this.#b[t],n=this.#_[t];if(e&&n){let t=e-(r.now()-n);i.ttl=t,i.start=Date.now()}}return this.#v&&(i.size=this.#v[t]),i}dump(){let e=[];for(let t of this.#R({allowStale:!0})){let n=this.#u[t],a=this.#c[t],i=this.#P(a)?a.__staleWhileFetching:a;if(void 0===i||void 0===n)continue;let o={value:i};if(this.#b&&this.#_){o.ttl=this.#b[t];let e=r.now()-this.#_[t];o.start=Math.floor(Date.now()-e)}this.#v&&(o.size=this.#v[t]),e.unshift([n,o])}return e}load(e){for(let[t,n]of(this.clear(),e)){if(n.start){let e=Date.now()-n.start;n.start=r.now()-e}this.set(t,n.value,n)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;let{ttl:n=this.ttl,start:a,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:s}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,d=this.#W(e,t,r.size||0,o);if(this.maxEntrySize&&d>this.maxEntrySize)return s&&(s.set="miss",s.maxEntrySizeExceeded=!0),this.#x(e,"set"),this;let u=0===this.#s?void 0:this.#d.get(e);if(void 0===u)u=0===this.#s?this.#y:0!==this.#m.length?this.#m.pop():this.#s===this.#t?this.#N(!1):this.#s,this.#u[u]=e,this.#c[u]=t,this.#d.set(e,u),this.#h[this.#y]=u,this.#p[u]=this.#y,this.#y=u,this.#s++,this.#U(u,d,s),s&&(s.set="add"),l=!1;else{this.#j(u);let r=this.#c[u];if(t!==r){if(this.#S&&this.#P(r)){r.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!i&&(this.#w&&this.#n?.(t,e,"set"),this.#E&&this.#g?.push([t,e,"set"]))}else!i&&(this.#w&&this.#n?.(r,e,"set"),this.#E&&this.#g?.push([r,e,"set"]));if(this.#z(u),this.#U(u,d,s),this.#c[u]=t,s){s.set="replace";let e=r&&this.#P(r)?r.__staleWhileFetching:r;void 0!==e&&(s.oldValue=e)}}else s&&(s.set="update")}if(0===n||this.#b||this.#A(),this.#b&&(l||this.#C(u,n,a),s&&this.#D(s,u)),!i&&this.#E&&this.#g){let e;let t=this.#g;for(;e=t?.shift();)this.#a?.(...e)}return this}pop(){try{for(;this.#s;){let e=this.#c[this.#f];if(this.#N(!0),this.#P(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#E&&this.#g){let e;let t=this.#g;for(;e=t?.shift();)this.#a?.(...e)}}}#N(e){let t=this.#f,r=this.#u[t],n=this.#c[t];return this.#S&&this.#P(n)?n.__abortController.abort(Error("evicted")):(this.#w||this.#E)&&(this.#w&&this.#n?.(n,r,"evict"),this.#E&&this.#g?.push([n,r,"evict"])),this.#z(t),e&&(this.#u[t]=void 0,this.#c[t]=void 0,this.#m.push(t)),1===this.#s?(this.#f=this.#y=0,this.#m.length=0):this.#f=this.#h[t],this.#d.delete(r),this.#s--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,a=this.#d.get(e);if(void 0!==a){let e=this.#c[a];if(this.#P(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#I(a))return r&&this.#M(a),n&&(n.has="hit",this.#D(n,a)),!0;n&&(n.has="stale",this.#D(n,a))}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,n=this.#d.get(e);if(void 0===n||!r&&this.#I(n))return;let a=this.#c[n];return this.#P(a)?a.__staleWhileFetching:a}#O(e,t,r,n){let a=void 0===t?void 0:this.#c[t];if(this.#P(a))return a;let i=new o,{signal:s}=r;s?.addEventListener("abort",()=>i.abort(s.reason),{signal:i.signal});let l={signal:i.signal,options:r,context:n},d=(n,a=!1)=>{let{aborted:o}=i.signal,s=r.ignoreFetchAbort&&void 0!==n;return(r.status&&(o&&!a?(r.status.fetchAborted=!0,r.status.fetchError=i.signal.reason,s&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),!o||s||a)?(this.#c[t]===c&&(void 0===n?c.__staleWhileFetching?this.#c[t]=c.__staleWhileFetching:this.#x(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,l.options))),n):u(i.signal.reason)},u=n=>{let{aborted:a}=i.signal,o=a&&r.allowStaleOnFetchAbort,s=o||r.allowStaleOnFetchRejection,l=s||r.noDeleteOnFetchRejection;if(this.#c[t]!==c||(l&&void 0!==c.__staleWhileFetching?o||(this.#c[t]=c.__staleWhileFetching):this.#x(e,"fetch")),s)return r.status&&void 0!==c.__staleWhileFetching&&(r.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw n};r.status&&(r.status.fetchDispatched=!0);let c=new Promise((t,n)=>{let o=this.#i?.(e,a,l);o&&o instanceof Promise&&o.then(e=>t(void 0===e?void 0:e),n),i.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>d(e,!0)))})}).then(d,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),u(e))),h=Object.assign(c,{__abortController:i,__staleWhileFetching:a,__returned:void 0});return void 0===t?(this.set(e,h,{...l.options,status:void 0}),t=this.#d.get(e)):this.#c[t]=h,h}#P(e){return!!this.#S&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof o}async fetch(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:s=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:c=this.allowStaleOnFetchRejection,ignoreFetchAbort:h=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:f,forceRefresh:y=!1,status:m,signal:g}=t;if(!this.#S)return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:a,status:m});let v={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:a,ttl:i,noDisposeOnSet:o,size:s,sizeCalculation:l,noUpdateTTL:d,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:c,allowStaleOnFetchAbort:p,ignoreFetchAbort:h,status:m,signal:g},_=this.#d.get(e);if(void 0===_){m&&(m.fetch="miss");let t=this.#O(e,_,v,f);return t.__returned=t}{let t=this.#c[_];if(this.#P(t)){let e=r&&void 0!==t.__staleWhileFetching;return m&&(m.fetch="inflight",e&&(m.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let a=this.#I(_);if(!y&&!a)return m&&(m.fetch="hit"),this.#j(_),n&&this.#M(_),m&&this.#D(m,_),t;let i=this.#O(e,_,v,f),o=void 0!==i.__staleWhileFetching&&r;return m&&(m.fetch=a?"stale":"refresh",o&&a&&(m.returnedStale=!0)),o?i.__staleWhileFetching:i.__returned=i}}async forceFetch(e,t={}){let r=await this.fetch(e,t);if(void 0===r)throw Error("fetch() returned undefined");return r}memo(e,t={}){let r=this.#o;if(!r)throw Error("no memoMethod provided to constructor");let{context:n,forceRefresh:a,...i}=t,o=this.get(e,i);if(!a&&void 0!==o)return o;let s=r(e,o,{options:i,context:n});return this.set(e,s,i),s}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,status:i}=t,o=this.#d.get(e);if(void 0!==o){let t=this.#c[o],s=this.#P(t);return(i&&this.#D(i,o),this.#I(o))?(i&&(i.get="stale"),s)?(i&&r&&void 0!==t.__staleWhileFetching&&(i.returnedStale=!0),r?t.__staleWhileFetching:void 0):(a||this.#x(e,"expire"),i&&r&&(i.returnedStale=!0),r?t:void 0):(i&&(i.get="hit"),s)?t.__staleWhileFetching:(this.#j(o),n&&this.#M(o),t)}i&&(i.get="miss")}#L(e,t){this.#p[t]=e,this.#h[e]=t}#j(e){e!==this.#y&&(e===this.#f?this.#f=this.#h[e]:this.#L(this.#p[e],this.#h[e]),this.#L(this.#y,e),this.#y=e)}delete(e){return this.#x(e,"delete")}#x(e,t){let r=!1;if(0!==this.#s){let n=this.#d.get(e);if(void 0!==n){if(r=!0,1===this.#s)this.#K(t);else{this.#z(n);let r=this.#c[n];if(this.#P(r)?r.__abortController.abort(Error("deleted")):(this.#w||this.#E)&&(this.#w&&this.#n?.(r,e,t),this.#E&&this.#g?.push([r,e,t])),this.#d.delete(e),this.#u[n]=void 0,this.#c[n]=void 0,n===this.#y)this.#y=this.#p[n];else if(n===this.#f)this.#f=this.#h[n];else{let e=this.#p[n];this.#h[e]=this.#h[n];let t=this.#h[n];this.#p[t]=this.#p[n]}this.#s--,this.#m.push(n)}}}if(this.#E&&this.#g?.length){let e;let t=this.#g;for(;e=t?.shift();)this.#a?.(...e)}return r}clear(){return this.#K("delete")}#K(e){for(let t of this.#T({allowStale:!0})){let r=this.#c[t];if(this.#P(r))r.__abortController.abort(Error("deleted"));else{let n=this.#u[t];this.#w&&this.#n?.(r,n,e),this.#E&&this.#g?.push([r,n,e])}}if(this.#d.clear(),this.#c.fill(void 0),this.#u.fill(void 0),this.#b&&this.#_&&(this.#b.fill(0),this.#_.fill(0)),this.#v&&this.#v.fill(0),this.#f=0,this.#y=0,this.#m.length=0,this.#l=0,this.#s=0,this.#E&&this.#g){let e;let t=this.#g;for(;e=t?.shift();)this.#a?.(...e)}}}t.LRUCache=p},98285:(e,t,r)=>{function n(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}r.r(t),r.d(t,{_:()=>n,_class_private_field_loose_base:()=>n})},78817:(e,t,r)=>{r.r(t),r.d(t,{_:()=>a,_class_private_field_loose_key:()=>a});var n=0;function a(e){return"__private_"+n+++"_"+e}},91174:(e,t,r)=>{function n(e){return e&&e.__esModule?e:{default:e}}r.r(t),r.d(t,{_:()=>n,_interop_require_default:()=>n})},58374:(e,t,r)=>{function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}r.r(t),r.d(t,{_:()=>a,_interop_require_wildcard:()=>a})},49690:(e,t,r)=>{r.d(t,{Analytics:()=>n}),r(17577);function n(e){return null}},53370:(e,t,r)=>{function n(e){return e&&e.__esModule?e:{default:e}}r.r(t),r.d(t,{_:()=>n,_interop_require_default:()=>n})},36674:(e,t,r)=>{r.d(t,{c:()=>a});var n=r(68570);let a=(0,n.createProxy)(String.raw`/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/@vercel/analytics/dist/react/index.mjs#Analytics`);(0,n.createProxy)(String.raw`/Users/dame/Library/Mobile Documents/com~apple~CloudDocs/Software/flushes/app/node_modules/@vercel/analytics/dist/react/index.mjs#track`)}};