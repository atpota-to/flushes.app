(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{8094:function(e,t,a){Promise.resolve().then(a.bind(a,8288))},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},8288:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(7437),o=a(2265),i=a(9376),n=a(5763),s=a.n(n),l=a(3896),c=a(5443);function d(){let e=(0,i.useParams)().handle,[t,a]=(0,o.useState)([]),[n,d]=(0,o.useState)(0),[u,p]=(0,o.useState)(!0),[f,h]=(0,o.useState)(!0),[_,m]=(0,o.useState)(null),[g,D]=(0,o.useState)(null),[j,x]=(0,o.useState)(0),[b,N]=(0,o.useState)([]),[S,E]=(0,o.useState)([]),[v,y]=(0,o.useState)(null);(0,o.useEffect)(()=>{w(),C()},[e]);let C=async()=>{try{h(!0),D(null);let t=await fetch("https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=".concat(encodeURIComponent(e)));if(t.ok){let e=await t.json();y(e),console.log("Fetched profile data:",e)}else{let e=await t.text();console.warn("Failed to fetch profile data: ".concat(t.statusText),e),D("Failed to fetch profile: ".concat(t.status))}}catch(e){console.error("Error fetching profile:",e),D(e.message||"Failed to fetch profile data")}finally{h(!1)}},w=async()=>{try{p(!0),m(null);let t=await fetch("/api/bluesky/profile?handle=".concat(encodeURIComponent(e)),{cache:"no-store",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!t.ok)throw Error("Failed to fetch profile: ".concat(t.status));let r=await t.json(),o=r.entries||[];if(a(o),d(r.count||0),E(r.emojiStats||[]),o.length>0){let e=new Set;o.forEach(t=>{let a=new Date(t.created_at),r="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"),"-").concat(String(a.getDate()).padStart(2,"0"));e.add(r)});let t=Math.max(1,e.size),a=parseFloat((o.length/t).toFixed(1));x(a);let r=new Map;o.forEach(e=>{let t=new Date(e.created_at),a="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"));r.has(a)?r.set(a,r.get(a)+1):r.set(a,1)});let i=Array.from(r.entries()).map(e=>{let[t,a]=e;return{date:t,count:a}}).sort((e,t)=>e.date.localeCompare(t.date)).slice(-30);N(i)}else x(0),N([])}catch(e){console.error("Error fetching profile:",e),m(e.message||"Failed to load profile")}finally{p(!1)}};return(0,r.jsxs)("div",{className:s().container,children:[(0,r.jsx)("div",{className:s().profileHeader,children:(0,r.jsxs)("div",{className:s().profileInfo,children:[f?(0,r.jsxs)("div",{className:s().profileLoading,children:[(0,r.jsx)("h2",{className:"".concat(s().profileTitle," font-bold"),children:e.startsWith("did:")?"Loading Profile...":"@".concat(e)}),(0,r.jsx)("div",{className:s().smallLoader})]}):g?(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"".concat(s().profileTitle," font-bold"),children:e.startsWith("did:")?"Profile":"@".concat(e)}),(0,r.jsx)("p",{className:s().smallError,children:"Unable to load profile details"})]}):(0,r.jsxs)(r.Fragment,{children:[(null==v?void 0:v.displayName)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"".concat(s().profileTitle," font-bold"),children:v.displayName}),(0,r.jsxs)("h3",{className:"".concat(s().profileHandle," font-medium"),children:["@",v.handle]})]}):(0,r.jsx)("h2",{className:"".concat(s().profileTitle," font-bold"),children:e.startsWith("did:")?"Profile":"@".concat(e)}),(null==v?void 0:v.description)&&(0,r.jsx)("p",{className:"".concat(s().description," font-regular"),children:v.description})]}),(0,r.jsx)("a",{href:v?"https://bsky.app/profile/".concat(v.handle):"https://bsky.app/profile/".concat(e),target:"_blank",rel:"noopener noreferrer",className:s().viewOnBluesky,children:"View account on Bluesky"})]})}),_&&(0,r.jsx)("div",{className:s().error,children:_}),!u&&!_&&(0,r.jsxs)("section",{className:s().statsSection,children:[(0,r.jsx)("h3",{className:s().statsHeader,children:"Flushing Statistics"}),(0,r.jsxs)("p",{className:s().statDetails,children:[n," total ",1===n?"flush":"flushes",j>0&&", averaging ".concat(j," ").concat(1===j?"flush":"flushes"," per active day")]}),b.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:s().chartContainer,children:b.map((e,t)=>{let a=Math.max(...b.map(e=>e.count)),o=Math.max(10,Math.min(100,e.count/a*100));return(0,r.jsx)("div",{className:s().chartBar,style:{height:"".concat(o,"%")},title:"".concat(e.date,": ").concat(e.count," flushes")},t)})}),(0,r.jsxs)("div",{className:s().chartLegend,children:[(0,r.jsx)("span",{className:s().chartLegendItem,children:b.length>0?new Date(b[0].date).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}),(0,r.jsx)("span",{className:s().chartLegendItem,children:b.length>0?new Date(b[b.length-1].date).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""})]}),(0,r.jsx)("button",{className:s().shareStatsButton,onClick:()=>{let t=(null==v?void 0:v.handle)||e,a="I've made ".concat(n," decentralized ").concat(1===n?"flush":"flushes").concat(j>0?" (averaging ".concat(j," per active day)"):""," on @flushes.app. Flush with me here: https://flushes.app/profile/").concat(t);window.open("https://bsky.app/intent/compose?text=".concat(encodeURIComponent(a)),"_blank")},children:"Share My Stats"})]}):(0,r.jsx)("p",{className:s().noDataMessage,children:"Not enough data to display activity chart"}),S.length>0&&(0,r.jsxs)("div",{className:s().emojiStatsSection,children:[(0,r.jsx)("h4",{className:s().emojiStatsHeader,children:"Favorite Emoji"}),(0,r.jsx)("div",{className:s().emojiGrid,children:S.slice(0,8).map((e,t)=>(0,r.jsxs)("div",{className:s().emojiCard,children:[(0,r.jsx)("div",{className:s().emojiDisplay,children:e.emoji}),(0,r.jsx)("div",{className:s().emojiCount,children:e.count})]},t))})]})]}),u?(0,r.jsxs)("div",{className:s().loadingContainer,children:[(0,r.jsx)("div",{className:s().loader}),(0,r.jsx)("p",{children:"Loading profile..."})]}):(0,r.jsx)("div",{className:s().feedList,children:t.length>0?t.map(t=>(0,r.jsx)("div",{className:s().feedItem,children:(0,r.jsxs)("div",{className:s().content,children:[(0,r.jsxs)("div",{className:s().contentLeft,children:[(0,r.jsx)("span",{className:s().emoji,children:t.emoji}),(0,r.jsxs)("span",{className:s().author,children:["@",e]}),(0,r.jsx)("span",{className:s().text,children:t.text?e&&e.endsWith(".is")&&(0,l.oO)(t.text).toLowerCase().startsWith("is ")?t.text.length>63?"".concat((0,l.oO)(t.text.substring(3,63)),"..."):(0,l.oO)(t.text.substring(3)):t.text.length>60?"".concat((0,l.oO)(t.text.substring(0,60)),"..."):(0,l.oO)(t.text):e&&e.endsWith(".is")?"flushing":"is flushing"})]}),(0,r.jsx)("span",{className:s().timestamp,children:(0,c.S)(t.created_at)})]})},t.id)):(0,r.jsx)("div",{className:s().emptyState,children:(0,r.jsx)("p",{children:"No statuses found for this user."})})})]})}},3896:function(e,t,a){"use strict";a.d(t,{$B:function(){return s},Lt:function(){return i},oO:function(){return n}});let r=["slur","racist","bigot","bigotry","homophobic","transphobic","fuck","damn","ass","asshole","bitch","kill","murder","attack","violence","harm","hurt","retard","retarded","idiot","stupid","dumb","penis","vagina","dick","cock","pussy","sex","masturbate","orgasm","horny","erection","blowjob","handjob","viagra","cialis","enlarge","cryptocurrency","bitcoin","ethereum","make money","get rich","earn fast","pyramid","scheme","discord.gg","telegram.me"],o=[/\bc[hH][iIl1][nN][kKsS]?\b/,/\bc[oO]{2}[nN][sS]?\b/,/\bf[aA][gG]{1,2}([oOeE][tT]?|[iIyY][nNeE]?)?s?\b/,/\bk[iIyY][kK][eE][sS]?\b/,/\bn[iIl1oO][gG]{2}([aAeE][rR]?|[lL][eE][tT]|[nNoO][gG])?s?\b/,/\bn[iIl1oO][gG]{2}[aAeE][sS]\b/,/\bt[rR][aA][nN][nN][iIyY][eE]?[sS]?\b/];function i(e){if(!e)return!1;let t=e.toLowerCase().replace(/0/g,"o").replace(/1/g,"i").replace(/3/g,"e").replace(/4/g,"a").replace(/5/g,"s").replace(/\$/g,"s").replace(/@/g,"a").replace(/!/g,"i").replace(/\*/g,"").replace(/\./g,"").replace(/-/g,"").replace(/_/g,"").replace(/\s+/g," ");for(let t of o)if(t.test(e))return!0;return r.some(e=>{if(RegExp("\\b".concat(e,"\\b"),"i").test(t))return!0;let a=e.split("").join("\\s*");return!!RegExp("\\b".concat(a,"\\b"),"i").test(t)||e.length<=4&&RegExp(e,"i").test(t)})}function n(e){if(!e)return e;let t=e;return r.forEach(e=>{let a=RegExp("\\b".concat(e,"\\b"),"gi");t=t.replace(a,"*".repeat(e.length))}),r.forEach(e=>{if(e.length>2){let a=e.split("").join("\\s*"),r=RegExp("\\b".concat(a,"\\b"),"gi");t=t.replace(r,e=>"*".repeat(e.replace(/\s+/g,"").length))}}),r.filter(e=>e.length<=4).forEach(e=>{let a=RegExp("(?<!\\w)".concat(e,"(?!\\w)"),"gi");t=t.replace(a,"*".repeat(e.length))}),t}function s(e){return["\uD83D\uDEBD","\uD83E\uDDFB","\uD83D\uDCA9","\uD83D\uDCA8","\uD83D\uDEBE","\uD83E\uDDFC","\uD83E\uDEA0","\uD83D\uDEBB","\uD83E\uDE78","\uD83D\uDCA7","\uD83D\uDCA6","\uD83D\uDE0C","\uD83D\uDE23","\uD83E\uDD22","\uD83E\uDD2E","\uD83E\uDD74","\uD83D\uDE2E‍\uD83D\uDCA8","\uD83D\uDE33","\uD83D\uDE35","\uD83C\uDF3E","\uD83C\uDF66","\uD83D\uDCF1","\uD83D\uDCD6","\uD83D\uDCAD","1️⃣","2️⃣","\uD83D\uDFE1","\uD83D\uDFE4"].includes(e)}},5443:function(e,t,a){"use strict";function r(e){if(!e)return"";let t=new Date(e),a=Math.floor((new Date().getTime()-t.getTime())/1e3);if(a<60)return"just now";let r=Math.floor(a/60);if(r<60)return"".concat(r,"m ago");let o=Math.floor(r/60);if(o<24)return"".concat(o,"h ago");let i=Math.floor(o/24);if(i<7)return"".concat(i,"d ago");let n=Math.floor(i/7);return n<5?"".concat(n,"w ago"):t.toLocaleDateString()}a.d(t,{S:function(){return r}})},5763:function(e){e.exports={container:"profile_container__iOOo5",header:"profile_header__eeAAU",headerContent:"profile_headerContent__34_gz",title:"profile_title__z44Sd",subtitle:"profile_subtitle__rXay2",description:"profile_description__H88J9",profileHeader:"profile_profileHeader__oIQnf",profileInfo:"profile_profileInfo__5b4Lh",profileTitle:"profile_profileTitle__7nIX2",profileHandle:"profile_profileHandle__OiszG",profileStats:"profile_profileStats__YPYjP",viewOnBluesky:"profile_viewOnBluesky__0UKr3",statsSection:"profile_statsSection__nLPlE",statsHeader:"profile_statsHeader__d7Sm0",statDetails:"profile_statDetails___SUpa",chartContainer:"profile_chartContainer__DVkCN",chartBar:"profile_chartBar__SK0z0",chartAxis:"profile_chartAxis__CXe0l",chartLegend:"profile_chartLegend__r99k_",chartLegendItem:"profile_chartLegendItem__ICt7Y",shareStatsButton:"profile_shareStatsButton__yNkbH",noDataMessage:"profile_noDataMessage__Bha1R",emojiStatsSection:"profile_emojiStatsSection__CmnSL",emojiStatsHeader:"profile_emojiStatsHeader__aW2O1",emojiGrid:"profile_emojiGrid__wV9fi",emojiCard:"profile_emojiCard__wDw6b",emojiDisplay:"profile_emojiDisplay__72wIr",emojiCount:"profile_emojiCount__Ffn4w",headerActions:"profile_headerActions__01zcW",profileText:"profile_profileText__n_Rl_",contentLeft:"profile_contentLeft__Bt28t",backButton:"profile_backButton__wBmv3",error:"profile_error__HGDWE",loadingContainer:"profile_loadingContainer__8fv8L",loader:"profile_loader__prsak",spin:"profile_spin__Vk3bp",smallLoader:"profile_smallLoader__9Wft_",profileLoading:"profile_profileLoading__Wvjt4",smallError:"profile_smallError__vLLIg",feedList:"profile_feedList__L3gy7",feedItem:"profile_feedItem__utlSU",content:"profile_content__dPXiW",emoji:"profile_emoji__j0EiN",author:"profile_author__kjwaN",text:"profile_text__bZmgK",timestamp:"profile_timestamp__aoZ0B",userLine:"profile_userLine__NPztf",emptyState:"profile_emptyState__s3xIX"}}},function(e){e.O(0,[824,971,117,744],function(){return e(e.s=8094)}),_N_E=e.O()}]);